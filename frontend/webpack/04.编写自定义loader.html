<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>4.ç¼–å†™è‡ªå®šä¹‰loader | é›ªå±±ä¹‹å·…</title>
    <meta name="generator" content="VuePress 1.9.7">
    <link rel="apple-touch-icon" href="/jerry.github.io/apple-touch-icon.png">
    <link rel="icon" href="/jerry.github.io/favicon.ico">
    <link rel="manifest" href="/jerry.github.io/manifest.json">
    <meta name="description" content="æˆ‘ä¸å¤é£çš†è¿‡å®¢1">
    <meta name="theme-color" content="#ffffff">
    
    <link rel="preload" href="/jerry.github.io/assets/css/0.styles.ba9d0c50.css" as="style"><link rel="preload" href="/jerry.github.io/assets/js/app.8cb867ca.js" as="script"><link rel="preload" href="/jerry.github.io/assets/js/2.7d547363.js" as="script"><link rel="preload" href="/jerry.github.io/assets/js/11.230bdafc.js" as="script"><link rel="preload" href="/jerry.github.io/assets/js/20.cf42ebc2.js" as="script"><link rel="prefetch" href="/jerry.github.io/assets/js/10.a1c8416b.js"><link rel="prefetch" href="/jerry.github.io/assets/js/100.504935d6.js"><link rel="prefetch" href="/jerry.github.io/assets/js/101.21e817bf.js"><link rel="prefetch" href="/jerry.github.io/assets/js/102.65169271.js"><link rel="prefetch" href="/jerry.github.io/assets/js/103.6fcbe2c9.js"><link rel="prefetch" href="/jerry.github.io/assets/js/104.11583416.js"><link rel="prefetch" href="/jerry.github.io/assets/js/105.151c8c59.js"><link rel="prefetch" href="/jerry.github.io/assets/js/106.5363313f.js"><link rel="prefetch" href="/jerry.github.io/assets/js/107.b871dbb1.js"><link rel="prefetch" href="/jerry.github.io/assets/js/108.3c9edfb6.js"><link rel="prefetch" href="/jerry.github.io/assets/js/109.a2864e45.js"><link rel="prefetch" href="/jerry.github.io/assets/js/110.a19fcc30.js"><link rel="prefetch" href="/jerry.github.io/assets/js/111.093fdfd1.js"><link rel="prefetch" href="/jerry.github.io/assets/js/112.10ea3de4.js"><link rel="prefetch" href="/jerry.github.io/assets/js/113.95e556d2.js"><link rel="prefetch" href="/jerry.github.io/assets/js/114.bab0361c.js"><link rel="prefetch" href="/jerry.github.io/assets/js/115.a9cf132f.js"><link rel="prefetch" href="/jerry.github.io/assets/js/116.da97d300.js"><link rel="prefetch" href="/jerry.github.io/assets/js/117.36250871.js"><link rel="prefetch" href="/jerry.github.io/assets/js/118.e52f5780.js"><link rel="prefetch" href="/jerry.github.io/assets/js/119.7758e874.js"><link rel="prefetch" href="/jerry.github.io/assets/js/12.8cade74a.js"><link rel="prefetch" href="/jerry.github.io/assets/js/120.8f88acbb.js"><link rel="prefetch" href="/jerry.github.io/assets/js/121.6dcee880.js"><link rel="prefetch" href="/jerry.github.io/assets/js/122.8777c1e2.js"><link rel="prefetch" href="/jerry.github.io/assets/js/123.16bc758e.js"><link rel="prefetch" href="/jerry.github.io/assets/js/124.f8f1ed86.js"><link rel="prefetch" href="/jerry.github.io/assets/js/125.b4d23aeb.js"><link rel="prefetch" href="/jerry.github.io/assets/js/126.29d9ca54.js"><link rel="prefetch" href="/jerry.github.io/assets/js/127.cfe3a252.js"><link rel="prefetch" href="/jerry.github.io/assets/js/128.e7ab0c95.js"><link rel="prefetch" href="/jerry.github.io/assets/js/129.d0cac2ec.js"><link rel="prefetch" href="/jerry.github.io/assets/js/13.f32bffef.js"><link rel="prefetch" href="/jerry.github.io/assets/js/130.53ae1e24.js"><link rel="prefetch" href="/jerry.github.io/assets/js/131.b382f1b0.js"><link rel="prefetch" href="/jerry.github.io/assets/js/132.9f7a7079.js"><link rel="prefetch" href="/jerry.github.io/assets/js/133.9bedf5c8.js"><link rel="prefetch" href="/jerry.github.io/assets/js/134.0fde1402.js"><link rel="prefetch" href="/jerry.github.io/assets/js/135.8ce45018.js"><link rel="prefetch" href="/jerry.github.io/assets/js/136.165553e5.js"><link rel="prefetch" href="/jerry.github.io/assets/js/137.6e606b3c.js"><link rel="prefetch" href="/jerry.github.io/assets/js/138.21058c26.js"><link rel="prefetch" href="/jerry.github.io/assets/js/139.695a93ac.js"><link rel="prefetch" href="/jerry.github.io/assets/js/14.3eb5eb18.js"><link rel="prefetch" href="/jerry.github.io/assets/js/140.a9f8a3df.js"><link rel="prefetch" href="/jerry.github.io/assets/js/141.c7f4ec43.js"><link rel="prefetch" href="/jerry.github.io/assets/js/142.e5649d1a.js"><link rel="prefetch" href="/jerry.github.io/assets/js/143.1ee6e8a2.js"><link rel="prefetch" href="/jerry.github.io/assets/js/144.94acf2f4.js"><link rel="prefetch" href="/jerry.github.io/assets/js/145.eb5135d7.js"><link rel="prefetch" href="/jerry.github.io/assets/js/146.18f8a40e.js"><link rel="prefetch" href="/jerry.github.io/assets/js/147.b21fb0df.js"><link rel="prefetch" href="/jerry.github.io/assets/js/148.adfd1662.js"><link rel="prefetch" href="/jerry.github.io/assets/js/149.dc7e9bb0.js"><link rel="prefetch" href="/jerry.github.io/assets/js/15.5fbe3ada.js"><link rel="prefetch" href="/jerry.github.io/assets/js/150.f8fa379b.js"><link rel="prefetch" href="/jerry.github.io/assets/js/151.6f065a1f.js"><link rel="prefetch" href="/jerry.github.io/assets/js/152.1475f8d1.js"><link rel="prefetch" href="/jerry.github.io/assets/js/153.78885179.js"><link rel="prefetch" href="/jerry.github.io/assets/js/154.4047c70a.js"><link rel="prefetch" href="/jerry.github.io/assets/js/155.406967ab.js"><link rel="prefetch" href="/jerry.github.io/assets/js/156.751598e1.js"><link rel="prefetch" href="/jerry.github.io/assets/js/157.e7a7a219.js"><link rel="prefetch" href="/jerry.github.io/assets/js/158.d1ca1de8.js"><link rel="prefetch" href="/jerry.github.io/assets/js/159.93693f00.js"><link rel="prefetch" href="/jerry.github.io/assets/js/16.13e04a1e.js"><link rel="prefetch" href="/jerry.github.io/assets/js/160.4657154d.js"><link rel="prefetch" href="/jerry.github.io/assets/js/161.27b64c01.js"><link rel="prefetch" href="/jerry.github.io/assets/js/162.d58c457f.js"><link rel="prefetch" href="/jerry.github.io/assets/js/163.79343a4c.js"><link rel="prefetch" href="/jerry.github.io/assets/js/164.5a25522e.js"><link rel="prefetch" href="/jerry.github.io/assets/js/165.c52e5816.js"><link rel="prefetch" href="/jerry.github.io/assets/js/166.d5d598c8.js"><link rel="prefetch" href="/jerry.github.io/assets/js/167.82b2360f.js"><link rel="prefetch" href="/jerry.github.io/assets/js/168.88cc8b96.js"><link rel="prefetch" href="/jerry.github.io/assets/js/169.1cb9b389.js"><link rel="prefetch" href="/jerry.github.io/assets/js/17.283191f2.js"><link rel="prefetch" href="/jerry.github.io/assets/js/170.e3dcbc16.js"><link rel="prefetch" href="/jerry.github.io/assets/js/171.07ef11f3.js"><link rel="prefetch" href="/jerry.github.io/assets/js/172.c183eb41.js"><link rel="prefetch" href="/jerry.github.io/assets/js/173.59fc33e7.js"><link rel="prefetch" href="/jerry.github.io/assets/js/174.d37ec705.js"><link rel="prefetch" href="/jerry.github.io/assets/js/175.ab467af4.js"><link rel="prefetch" href="/jerry.github.io/assets/js/176.6d5f2e13.js"><link rel="prefetch" href="/jerry.github.io/assets/js/177.fd722926.js"><link rel="prefetch" href="/jerry.github.io/assets/js/178.901e44b1.js"><link rel="prefetch" href="/jerry.github.io/assets/js/179.95aecdf1.js"><link rel="prefetch" href="/jerry.github.io/assets/js/18.f812f6af.js"><link rel="prefetch" href="/jerry.github.io/assets/js/180.6f7205ee.js"><link rel="prefetch" href="/jerry.github.io/assets/js/181.7e1e1402.js"><link rel="prefetch" href="/jerry.github.io/assets/js/182.eb3c32f9.js"><link rel="prefetch" href="/jerry.github.io/assets/js/183.794272e9.js"><link rel="prefetch" href="/jerry.github.io/assets/js/184.3ed1d5af.js"><link rel="prefetch" href="/jerry.github.io/assets/js/185.2430ff76.js"><link rel="prefetch" href="/jerry.github.io/assets/js/186.46272a01.js"><link rel="prefetch" href="/jerry.github.io/assets/js/187.c617b164.js"><link rel="prefetch" href="/jerry.github.io/assets/js/19.f9e85296.js"><link rel="prefetch" href="/jerry.github.io/assets/js/21.724fc087.js"><link rel="prefetch" href="/jerry.github.io/assets/js/22.c6929093.js"><link rel="prefetch" href="/jerry.github.io/assets/js/23.f56ff06f.js"><link rel="prefetch" href="/jerry.github.io/assets/js/24.44ba2312.js"><link rel="prefetch" href="/jerry.github.io/assets/js/25.f35c5403.js"><link rel="prefetch" href="/jerry.github.io/assets/js/26.b731cd9b.js"><link rel="prefetch" href="/jerry.github.io/assets/js/27.3d5daa0a.js"><link rel="prefetch" href="/jerry.github.io/assets/js/28.8cc8bab9.js"><link rel="prefetch" href="/jerry.github.io/assets/js/29.7730d077.js"><link rel="prefetch" href="/jerry.github.io/assets/js/3.5ab0026b.js"><link rel="prefetch" href="/jerry.github.io/assets/js/30.6d37c03b.js"><link rel="prefetch" href="/jerry.github.io/assets/js/31.e8f4a77a.js"><link rel="prefetch" href="/jerry.github.io/assets/js/32.549d6f8e.js"><link rel="prefetch" href="/jerry.github.io/assets/js/33.95792b9f.js"><link rel="prefetch" href="/jerry.github.io/assets/js/34.b7e709b1.js"><link rel="prefetch" href="/jerry.github.io/assets/js/35.daed2e5c.js"><link rel="prefetch" href="/jerry.github.io/assets/js/36.90c3c71a.js"><link rel="prefetch" href="/jerry.github.io/assets/js/37.dfa11bd8.js"><link rel="prefetch" href="/jerry.github.io/assets/js/38.e36c7a27.js"><link rel="prefetch" href="/jerry.github.io/assets/js/39.017d9b19.js"><link rel="prefetch" href="/jerry.github.io/assets/js/4.7259a42f.js"><link rel="prefetch" href="/jerry.github.io/assets/js/40.e43eaee9.js"><link rel="prefetch" href="/jerry.github.io/assets/js/41.697e21b6.js"><link rel="prefetch" href="/jerry.github.io/assets/js/42.f01531a7.js"><link rel="prefetch" href="/jerry.github.io/assets/js/43.84df7d63.js"><link rel="prefetch" href="/jerry.github.io/assets/js/44.891e9a3f.js"><link rel="prefetch" href="/jerry.github.io/assets/js/45.f19e5ca4.js"><link rel="prefetch" href="/jerry.github.io/assets/js/46.f81f1bfa.js"><link rel="prefetch" href="/jerry.github.io/assets/js/47.8f4693a3.js"><link rel="prefetch" href="/jerry.github.io/assets/js/48.b0c93d91.js"><link rel="prefetch" href="/jerry.github.io/assets/js/49.f9f0f3f8.js"><link rel="prefetch" href="/jerry.github.io/assets/js/5.e04d3d1e.js"><link rel="prefetch" href="/jerry.github.io/assets/js/50.e03d13cd.js"><link rel="prefetch" href="/jerry.github.io/assets/js/51.f8825ce8.js"><link rel="prefetch" href="/jerry.github.io/assets/js/52.ec76efc3.js"><link rel="prefetch" href="/jerry.github.io/assets/js/53.c9a34637.js"><link rel="prefetch" href="/jerry.github.io/assets/js/54.8abbd387.js"><link rel="prefetch" href="/jerry.github.io/assets/js/55.c468aca8.js"><link rel="prefetch" href="/jerry.github.io/assets/js/56.f4b50a04.js"><link rel="prefetch" href="/jerry.github.io/assets/js/57.de666ddb.js"><link rel="prefetch" href="/jerry.github.io/assets/js/58.458d0401.js"><link rel="prefetch" href="/jerry.github.io/assets/js/59.40e6b3d1.js"><link rel="prefetch" href="/jerry.github.io/assets/js/6.c98e06b3.js"><link rel="prefetch" href="/jerry.github.io/assets/js/60.43848b9a.js"><link rel="prefetch" href="/jerry.github.io/assets/js/61.2fe1e137.js"><link rel="prefetch" href="/jerry.github.io/assets/js/62.3f176587.js"><link rel="prefetch" href="/jerry.github.io/assets/js/63.f552851c.js"><link rel="prefetch" href="/jerry.github.io/assets/js/64.d50a2fff.js"><link rel="prefetch" href="/jerry.github.io/assets/js/65.0d627c3b.js"><link rel="prefetch" href="/jerry.github.io/assets/js/66.78e14677.js"><link rel="prefetch" href="/jerry.github.io/assets/js/67.caf5006d.js"><link rel="prefetch" href="/jerry.github.io/assets/js/68.39e8b4be.js"><link rel="prefetch" href="/jerry.github.io/assets/js/69.bd962060.js"><link rel="prefetch" href="/jerry.github.io/assets/js/7.5838a81a.js"><link rel="prefetch" href="/jerry.github.io/assets/js/70.578ae89e.js"><link rel="prefetch" href="/jerry.github.io/assets/js/71.8c97f45c.js"><link rel="prefetch" href="/jerry.github.io/assets/js/72.d9e369a7.js"><link rel="prefetch" href="/jerry.github.io/assets/js/73.4b42860a.js"><link rel="prefetch" href="/jerry.github.io/assets/js/74.1a99cf28.js"><link rel="prefetch" href="/jerry.github.io/assets/js/75.58b36cd5.js"><link rel="prefetch" href="/jerry.github.io/assets/js/76.ed9de37a.js"><link rel="prefetch" href="/jerry.github.io/assets/js/77.227912ee.js"><link rel="prefetch" href="/jerry.github.io/assets/js/78.93f12412.js"><link rel="prefetch" href="/jerry.github.io/assets/js/79.81a03b40.js"><link rel="prefetch" href="/jerry.github.io/assets/js/8.4e52af96.js"><link rel="prefetch" href="/jerry.github.io/assets/js/80.b777d54f.js"><link rel="prefetch" href="/jerry.github.io/assets/js/81.0b43f0cc.js"><link rel="prefetch" href="/jerry.github.io/assets/js/82.28396efa.js"><link rel="prefetch" href="/jerry.github.io/assets/js/83.1277f065.js"><link rel="prefetch" href="/jerry.github.io/assets/js/84.8e6d03c2.js"><link rel="prefetch" href="/jerry.github.io/assets/js/85.2376dca3.js"><link rel="prefetch" href="/jerry.github.io/assets/js/86.555d125a.js"><link rel="prefetch" href="/jerry.github.io/assets/js/87.d6aee5d0.js"><link rel="prefetch" href="/jerry.github.io/assets/js/88.1737751f.js"><link rel="prefetch" href="/jerry.github.io/assets/js/89.e3d5e734.js"><link rel="prefetch" href="/jerry.github.io/assets/js/9.6a9d759a.js"><link rel="prefetch" href="/jerry.github.io/assets/js/90.f1b5cd88.js"><link rel="prefetch" href="/jerry.github.io/assets/js/91.87444e61.js"><link rel="prefetch" href="/jerry.github.io/assets/js/92.45ed101b.js"><link rel="prefetch" href="/jerry.github.io/assets/js/93.18f7d79e.js"><link rel="prefetch" href="/jerry.github.io/assets/js/94.efb5658f.js"><link rel="prefetch" href="/jerry.github.io/assets/js/95.1228ac2d.js"><link rel="prefetch" href="/jerry.github.io/assets/js/96.c1a66ad9.js"><link rel="prefetch" href="/jerry.github.io/assets/js/97.32033135.js"><link rel="prefetch" href="/jerry.github.io/assets/js/98.37b12cfd.js"><link rel="prefetch" href="/jerry.github.io/assets/js/99.cd7ac96d.js">
    <link rel="stylesheet" href="/jerry.github.io/assets/css/0.styles.ba9d0c50.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/jerry.github.io/" class="home-link router-link-active"><!----> <span class="site-name">é›ªå±±ä¹‹å·…</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/jerry.github.io/" class="nav-link">
  é¦–é¡µ
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="å‰ç«¯çŸ¥è¯†" class="dropdown-title"><span class="title">å‰ç«¯çŸ¥è¯†</span> <span class="arrow down"></span></button> <button type="button" aria-label="å‰ç«¯çŸ¥è¯†" class="mobile-dropdown-title"><span class="title">å‰ç«¯çŸ¥è¯†</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/jerry.github.io/frontend/es6/" class="nav-link">
  ECMAScript6
</a></li><li class="dropdown-item"><!----> <a href="/jerry.github.io/frontend/typescript/" class="nav-link">
  TypeScript
</a></li><li class="dropdown-item"><!----> <a href="/jerry.github.io/frontend/webpack/.html" class="nav-link">
  ---------------
</a></li><li class="dropdown-item"><!----> <a href="/jerry.github.io/frontend/javascript/" class="nav-link">
  JSåŸºç¡€ä¸“é¢˜
</a></li><li class="dropdown-item"><!----> <a href="/jerry.github.io/frontend/jsTopic/" class="nav-link">
  JSæŠ€æœ¯ä¸“é¢˜
</a></li><li class="dropdown-item"><!----> <a href="/jerry.github.io/frontend/jsOpt/" class="nav-link">
  JSä¼˜åŒ–ä¸“é¢˜
</a></li><li class="dropdown-item"><!----> <a href="/jerry.github.io/frontend/webpack/.html" class="nav-link">
  ---------------
</a></li><li class="dropdown-item"><!----> <a href="/jerry.github.io/frontend/webpack/" class="nav-link router-link-active">
  Webpack
</a></li><li class="dropdown-item"><!----> <a href="/jerry.github.io/frontend/webpack4/" class="nav-link">
  Webpack4é…ç½®å®æˆ˜
</a></li><li class="dropdown-item"><!----> <a href="/jerry.github.io/frontend/webpack/.html" class="nav-link">
  ---------------
</a></li><li class="dropdown-item"><!----> <a href="/jerry.github.io/frontend/web/" class="nav-link">
  æµè§ˆå™¨ç›¸å…³
</a></li><li class="dropdown-item"><!----> <a href="/jerry.github.io/frontend/html/" class="nav-link">
  HTML5
</a></li><li class="dropdown-item"><!----> <a href="/jerry.github.io/frontend/css/" class="nav-link">
  CSS3
</a></li><li class="dropdown-item"><!----> <a href="/jerry.github.io/frontend/excellent/" class="nav-link">
  ä¼˜ç§€åšå®¢
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="æ¡†æ¶çŸ¥è¯†" class="dropdown-title"><span class="title">æ¡†æ¶çŸ¥è¯†</span> <span class="arrow down"></span></button> <button type="button" aria-label="æ¡†æ¶çŸ¥è¯†" class="mobile-dropdown-title"><span class="title">æ¡†æ¶çŸ¥è¯†</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/jerry.github.io/frameModule/vue/" class="nav-link">
  Vue3
</a></li><li class="dropdown-item"><!----> <a href="/jerry.github.io/frameModule/ReactNative/" class="nav-link">
  React Native
</a></li><li class="dropdown-item"><!----> <a href="/jerry.github.io/frameModule/weixin/" class="nav-link">
  å¾®ä¿¡å°ç¨‹åº
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="æœåŠ¡ç«¯çŸ¥è¯†" class="dropdown-title"><span class="title">æœåŠ¡ç«¯çŸ¥è¯†</span> <span class="arrow down"></span></button> <button type="button" aria-label="æœåŠ¡ç«¯çŸ¥è¯†" class="mobile-dropdown-title"><span class="title">æœåŠ¡ç«¯çŸ¥è¯†</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/jerry.github.io/backend/nodejs/" class="nav-link">
  NodeJS
</a></li><li class="dropdown-item"><!----> <a href="/jerry.github.io/backend/koa/" class="nav-link">
  Koa
</a></li><li class="dropdown-item"><!----> <a href="/jerry.github.io/backend/mysql/" class="nav-link">
  Mysql
</a></li><li class="dropdown-item"><!----> <a href="/jerry.github.io/backend/mongodb/" class="nav-link">
  MongoDB
</a></li><li class="dropdown-item"><!----> <a href="/jerry.github.io/backend/nginx/" class="nav-link">
  Nginx
</a></li><li class="dropdown-item"><!----> <a href="/jerry.github.io/backend/http/" class="nav-link">
  HTTPåè®®
</a></li><li class="dropdown-item"><!----> <a href="/jerry.github.io/backend/docker/" class="nav-link">
  å®˜ç½‘çŸ¥è¯†æ¨è
</a></li></ul></div></div><div class="nav-item"><a href="/jerry.github.io/blog/" class="nav-link">
  å…¶ä»–æ‚è°ˆ
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/jerry.github.io/" class="nav-link">
  é¦–é¡µ
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="å‰ç«¯çŸ¥è¯†" class="dropdown-title"><span class="title">å‰ç«¯çŸ¥è¯†</span> <span class="arrow down"></span></button> <button type="button" aria-label="å‰ç«¯çŸ¥è¯†" class="mobile-dropdown-title"><span class="title">å‰ç«¯çŸ¥è¯†</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/jerry.github.io/frontend/es6/" class="nav-link">
  ECMAScript6
</a></li><li class="dropdown-item"><!----> <a href="/jerry.github.io/frontend/typescript/" class="nav-link">
  TypeScript
</a></li><li class="dropdown-item"><!----> <a href="/jerry.github.io/frontend/webpack/.html" class="nav-link">
  ---------------
</a></li><li class="dropdown-item"><!----> <a href="/jerry.github.io/frontend/javascript/" class="nav-link">
  JSåŸºç¡€ä¸“é¢˜
</a></li><li class="dropdown-item"><!----> <a href="/jerry.github.io/frontend/jsTopic/" class="nav-link">
  JSæŠ€æœ¯ä¸“é¢˜
</a></li><li class="dropdown-item"><!----> <a href="/jerry.github.io/frontend/jsOpt/" class="nav-link">
  JSä¼˜åŒ–ä¸“é¢˜
</a></li><li class="dropdown-item"><!----> <a href="/jerry.github.io/frontend/webpack/.html" class="nav-link">
  ---------------
</a></li><li class="dropdown-item"><!----> <a href="/jerry.github.io/frontend/webpack/" class="nav-link router-link-active">
  Webpack
</a></li><li class="dropdown-item"><!----> <a href="/jerry.github.io/frontend/webpack4/" class="nav-link">
  Webpack4é…ç½®å®æˆ˜
</a></li><li class="dropdown-item"><!----> <a href="/jerry.github.io/frontend/webpack/.html" class="nav-link">
  ---------------
</a></li><li class="dropdown-item"><!----> <a href="/jerry.github.io/frontend/web/" class="nav-link">
  æµè§ˆå™¨ç›¸å…³
</a></li><li class="dropdown-item"><!----> <a href="/jerry.github.io/frontend/html/" class="nav-link">
  HTML5
</a></li><li class="dropdown-item"><!----> <a href="/jerry.github.io/frontend/css/" class="nav-link">
  CSS3
</a></li><li class="dropdown-item"><!----> <a href="/jerry.github.io/frontend/excellent/" class="nav-link">
  ä¼˜ç§€åšå®¢
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="æ¡†æ¶çŸ¥è¯†" class="dropdown-title"><span class="title">æ¡†æ¶çŸ¥è¯†</span> <span class="arrow down"></span></button> <button type="button" aria-label="æ¡†æ¶çŸ¥è¯†" class="mobile-dropdown-title"><span class="title">æ¡†æ¶çŸ¥è¯†</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/jerry.github.io/frameModule/vue/" class="nav-link">
  Vue3
</a></li><li class="dropdown-item"><!----> <a href="/jerry.github.io/frameModule/ReactNative/" class="nav-link">
  React Native
</a></li><li class="dropdown-item"><!----> <a href="/jerry.github.io/frameModule/weixin/" class="nav-link">
  å¾®ä¿¡å°ç¨‹åº
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="æœåŠ¡ç«¯çŸ¥è¯†" class="dropdown-title"><span class="title">æœåŠ¡ç«¯çŸ¥è¯†</span> <span class="arrow down"></span></button> <button type="button" aria-label="æœåŠ¡ç«¯çŸ¥è¯†" class="mobile-dropdown-title"><span class="title">æœåŠ¡ç«¯çŸ¥è¯†</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/jerry.github.io/backend/nodejs/" class="nav-link">
  NodeJS
</a></li><li class="dropdown-item"><!----> <a href="/jerry.github.io/backend/koa/" class="nav-link">
  Koa
</a></li><li class="dropdown-item"><!----> <a href="/jerry.github.io/backend/mysql/" class="nav-link">
  Mysql
</a></li><li class="dropdown-item"><!----> <a href="/jerry.github.io/backend/mongodb/" class="nav-link">
  MongoDB
</a></li><li class="dropdown-item"><!----> <a href="/jerry.github.io/backend/nginx/" class="nav-link">
  Nginx
</a></li><li class="dropdown-item"><!----> <a href="/jerry.github.io/backend/http/" class="nav-link">
  HTTPåè®®
</a></li><li class="dropdown-item"><!----> <a href="/jerry.github.io/backend/docker/" class="nav-link">
  å®˜ç½‘çŸ¥è¯†æ¨è
</a></li></ul></div></div><div class="nav-item"><a href="/jerry.github.io/blog/" class="nav-link">
  å…¶ä»–æ‚è°ˆ
</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Webpack</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/jerry.github.io/frontend/webpack/" aria-current="page" class="sidebar-link">é¦–é¡µ</a></li><li><a href="/jerry.github.io/frontend/webpack/01.é¡µé¢è‡ªåŠ¨åˆ·æ–°é…ç½®å’ŒåŸç†.html" class="sidebar-link">1. é¡µé¢è‡ªåŠ¨åˆ·æ–°é…ç½®å’ŒåŸç†</a></li><li><a href="/jerry.github.io/frontend/webpack/02.æ¨¡å—çƒ­æ›¿æ¢é…ç½®å’ŒåŸç†.html" class="sidebar-link">2. æ¨¡å—çƒ­æ›´æ–°é…ç½®å’ŒåŸç†</a></li><li><a href="/jerry.github.io/frontend/webpack/03.Tapable.html" class="sidebar-link">3.Tapableå­¦ä¹ </a></li><li><a href="/jerry.github.io/frontend/webpack/04.ç¼–å†™è‡ªå®šä¹‰loader.html" class="active sidebar-link">4.ç¼–å†™è‡ªå®šä¹‰loader</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/jerry.github.io/frontend/webpack/04.ç¼–å†™è‡ªå®šä¹‰loader.html#å‡½æ•°ç»„åˆçš„ä¸¤ç§æƒ…å†µ" class="sidebar-link">å‡½æ•°ç»„åˆçš„ä¸¤ç§æƒ…å†µ</a></li><li class="sidebar-sub-header"><a href="/jerry.github.io/frontend/webpack/04.ç¼–å†™è‡ªå®šä¹‰loader.html#ä»€ä¹ˆæ˜¯loader" class="sidebar-link">ä»€ä¹ˆæ˜¯loader</a></li><li class="sidebar-sub-header"><a href="/jerry.github.io/frontend/webpack/04.ç¼–å†™è‡ªå®šä¹‰loader.html#loaderç‰¹ç‚¹" class="sidebar-link">loaderç‰¹ç‚¹</a></li><li class="sidebar-sub-header"><a href="/jerry.github.io/frontend/webpack/04.ç¼–å†™è‡ªå®šä¹‰loader.html#loaderåŸºç¡€" class="sidebar-link">loaderåŸºç¡€</a></li><li class="sidebar-sub-header"><a href="/jerry.github.io/frontend/webpack/04.ç¼–å†™è‡ªå®šä¹‰loader.html#åˆå§‹åŒ–loaderåˆ›å»º" class="sidebar-link">åˆå§‹åŒ–loaderåˆ›å»º</a></li><li class="sidebar-sub-header"><a href="/jerry.github.io/frontend/webpack/04.ç¼–å†™è‡ªå®šä¹‰loader.html#loaderè¿›é˜¶" class="sidebar-link">loaderè¿›é˜¶</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/jerry.github.io/frontend/webpack/04.ç¼–å†™è‡ªå®šä¹‰loader.html#ä½¿ç”¨loader-runneré«˜æ•ˆè¿›è¡Œloaderçš„è°ƒè¯•" class="sidebar-link">ä½¿ç”¨loader-runneré«˜æ•ˆè¿›è¡Œloaderçš„è°ƒè¯•</a></li><li class="sidebar-sub-header"><a href="/jerry.github.io/frontend/webpack/04.ç¼–å†™è‡ªå®šä¹‰loader.html#loaderå‚æ•°çš„è·å–-é€šè¿‡loader-utils" class="sidebar-link">loaderå‚æ•°çš„è·å–(é€šè¿‡loader-utils)</a></li><li class="sidebar-sub-header"><a href="/jerry.github.io/frontend/webpack/04.ç¼–å†™è‡ªå®šä¹‰loader.html#è¿”å›å…¶å®ƒç»“æœ" class="sidebar-link">è¿”å›å…¶å®ƒç»“æœ</a></li><li class="sidebar-sub-header"><a href="/jerry.github.io/frontend/webpack/04.ç¼–å†™è‡ªå®šä¹‰loader.html#loaderè¿”å›å€¼å¤„ç†" class="sidebar-link">loaderè¿”å›å€¼å¤„ç†</a></li><li class="sidebar-sub-header"><a href="/jerry.github.io/frontend/webpack/04.ç¼–å†™è‡ªå®šä¹‰loader.html#åŒæ­¥ä¸å¼‚æ­¥" class="sidebar-link">åŒæ­¥ä¸å¼‚æ­¥</a></li><li class="sidebar-sub-header"><a href="/jerry.github.io/frontend/webpack/04.ç¼–å†™è‡ªå®šä¹‰loader.html#åŒæ­¥loaderå¼‚å¸¸å¤„ç†" class="sidebar-link">åŒæ­¥loaderå¼‚å¸¸å¤„ç†</a></li></ul></li><li class="sidebar-sub-header"><a href="/jerry.github.io/frontend/webpack/04.ç¼–å†™è‡ªå®šä¹‰loader.html#å¤„ç†äºŒè¿›åˆ¶æ•°æ®" class="sidebar-link">å¤„ç†äºŒè¿›åˆ¶æ•°æ®</a></li><li class="sidebar-sub-header"><a href="/jerry.github.io/frontend/webpack/04.ç¼–å†™è‡ªå®šä¹‰loader.html#å¼€å¯loaderç¼“å­˜åŠ é€Ÿ" class="sidebar-link">å¼€å¯loaderç¼“å­˜åŠ é€Ÿ</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/jerry.github.io/frontend/webpack/04.ç¼–å†™è‡ªå®šä¹‰loader.html#loaderå¦‚ä½•è¿›è¡Œæ–‡ä»¶è¾“å‡º" class="sidebar-link">loaderå¦‚ä½•è¿›è¡Œæ–‡ä»¶è¾“å‡ºï¼Ÿ</a></li><li class="sidebar-sub-header"><a href="/jerry.github.io/frontend/webpack/04.ç¼–å†™è‡ªå®šä¹‰loader.html#å…¶å®ƒloader-api" class="sidebar-link">å…¶å®ƒLoader API</a></li></ul></li><li class="sidebar-sub-header"><a href="/jerry.github.io/frontend/webpack/04.ç¼–å†™è‡ªå®šä¹‰loader.html#_4ç§æœ¬åœ°å¼€å‘æµ‹è¯•loaderçš„æ–¹æ³•-åŠ è½½æœ¬åœ°-loader" class="sidebar-link">4ç§æœ¬åœ°å¼€å‘æµ‹è¯•loaderçš„æ–¹æ³•(åŠ è½½æœ¬åœ° Loader)</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/jerry.github.io/frontend/webpack/04.ç¼–å†™è‡ªå®šä¹‰loader.html#åŒ¹é…å•ä¸ªloader-ä½ å¯ä»¥ç®€å•é€šè¿‡åœ¨ruleå¯¹è±¡è®¾ç½®path-resolveæŒ‡å‘è¿™ä¸ªæœ¬åœ°æ–‡ä»¶" class="sidebar-link">åŒ¹é…å•ä¸ªloaderï¼Œä½ å¯ä»¥ç®€å•é€šè¿‡åœ¨ruleå¯¹è±¡è®¾ç½®path.resolveæŒ‡å‘è¿™ä¸ªæœ¬åœ°æ–‡ä»¶</a></li><li class="sidebar-sub-header"><a href="/jerry.github.io/frontend/webpack/04.ç¼–å†™è‡ªå®šä¹‰loader.html#åŒ¹é…å¤šä¸ªloaders-å¯ä»¥ä½¿ç”¨resolveloader-modules-é…ç½®" class="sidebar-link">åŒ¹é…å¤šä¸ªloadersï¼Œå¯ä»¥ä½¿ç”¨resolveLoader.modules é…ç½®</a></li><li class="sidebar-sub-header"><a href="/jerry.github.io/frontend/webpack/04.ç¼–å†™è‡ªå®šä¹‰loader.html#resolveloader-alias" class="sidebar-link">resolveLoader.alias</a></li><li class="sidebar-sub-header"><a href="/jerry.github.io/frontend/webpack/04.ç¼–å†™è‡ªå®šä¹‰loader.html#ä½¿ç”¨npm-link" class="sidebar-link">ä½¿ç”¨npm link</a></li></ul></li><li class="sidebar-sub-header"><a href="/jerry.github.io/frontend/webpack/04.ç¼–å†™è‡ªå®šä¹‰loader.html#loaderåˆ†ç±»" class="sidebar-link">loaderåˆ†ç±»</a></li><li class="sidebar-sub-header"><a href="/jerry.github.io/frontend/webpack/04.ç¼–å†™è‡ªå®šä¹‰loader.html#é…ç½®å¤šä¸ªloader" class="sidebar-link">é…ç½®å¤šä¸ªloader</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/jerry.github.io/frontend/webpack/04.ç¼–å†™è‡ªå®šä¹‰loader.html#æ•°ç»„å½¢å¼" class="sidebar-link">æ•°ç»„å½¢å¼</a></li><li class="sidebar-sub-header"><a href="/jerry.github.io/frontend/webpack/04.ç¼–å†™è‡ªå®šä¹‰loader.html#å¯¹è±¡å½¢å¼-å¯ä»¥é…ç½®loaderå‚æ•°" class="sidebar-link">å¯¹è±¡å½¢å¼(å¯ä»¥é…ç½®loaderå‚æ•°)</a></li><li class="sidebar-sub-header"><a href="/jerry.github.io/frontend/webpack/04.ç¼–å†™è‡ªå®šä¹‰loader.html#å¤šä¸ªloaderæ‰§è¡Œé¡ºåº" class="sidebar-link">å¤šä¸ªloaderæ‰§è¡Œé¡ºåº</a></li><li class="sidebar-sub-header"><a href="/jerry.github.io/frontend/webpack/04.ç¼–å†™è‡ªå®šä¹‰loader.html#é…ç½®å‚æ•°æ”¹å˜loaderæ‰§è¡Œé¡ºåº" class="sidebar-link">é…ç½®å‚æ•°æ”¹å˜loaderæ‰§è¡Œé¡ºåº</a></li></ul></li><li class="sidebar-sub-header"><a href="/jerry.github.io/frontend/webpack/04.ç¼–å†™è‡ªå®šä¹‰loader.html#inline-loader-è¡Œå†…loader" class="sidebar-link">inline-loader(è¡Œå†…loader)</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/jerry.github.io/frontend/webpack/04.ç¼–å†™è‡ªå®šä¹‰loader.html#ç¦ç”¨normal-loader" class="sidebar-link">!ç¦ç”¨normal-loader</a></li><li class="sidebar-sub-header"><a href="/jerry.github.io/frontend/webpack/04.ç¼–å†™è‡ªå®šä¹‰loader.html#ç¦ç”¨pre-loaderå’Œnormal-loader" class="sidebar-link">-!ç¦ç”¨pre-loaderå’Œnormal-loader</a></li><li class="sidebar-sub-header"><a href="/jerry.github.io/frontend/webpack/04.ç¼–å†™è‡ªå®šä¹‰loader.html#ç¦ç”¨pre-loaderã€normal-loaderã€post-loader-åªèƒ½è¡Œå†…å¤„ç†" class="sidebar-link">!!ç¦ç”¨pre-loaderã€normal-loaderã€post-loaderï¼Œåªèƒ½è¡Œå†…å¤„ç†</a></li></ul></li><li class="sidebar-sub-header"><a href="/jerry.github.io/frontend/webpack/04.ç¼–å†™è‡ªå®šä¹‰loader.html#loaderç»„æˆ" class="sidebar-link">loaderç»„æˆ</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/jerry.github.io/frontend/webpack/04.ç¼–å†™è‡ªå®šä¹‰loader.html#æ‰€æœ‰loaderå‡æ— è¿”å›å€¼" class="sidebar-link">æ‰€æœ‰loaderå‡æ— è¿”å›å€¼</a></li><li class="sidebar-sub-header"><a href="/jerry.github.io/frontend/webpack/04.ç¼–å†™è‡ªå®šä¹‰loader.html#æœ‰pitchloaderå­˜åœ¨è¿”å›å€¼" class="sidebar-link">æœ‰pitchLoaderå­˜åœ¨è¿”å›å€¼</a></li></ul></li><li class="sidebar-sub-header"><a href="/jerry.github.io/frontend/webpack/04.ç¼–å†™è‡ªå®šä¹‰loader.html#loader-runner" class="sidebar-link">loader-runner</a></li><li class="sidebar-sub-header"><a href="/jerry.github.io/frontend/webpack/04.ç¼–å†™è‡ªå®šä¹‰loader.html#å®æˆ˜" class="sidebar-link">å®æˆ˜</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/jerry.github.io/frontend/webpack/04.ç¼–å†™è‡ªå®šä¹‰loader.html#raw-loader" class="sidebar-link">raw-loader</a></li></ul></li><li class="sidebar-sub-header"><a href="/jerry.github.io/frontend/webpack/04.ç¼–å†™è‡ªå®šä¹‰loader.html#å‚è€ƒæ–‡æ¡£" class="sidebar-link">å‚è€ƒæ–‡æ¡£</a></li></ul></li><li><a href="/jerry.github.io/frontend/webpack/05.ç¼–å†™è‡ªå®šä¹‰plugin.html" class="sidebar-link">5.ç¼–å†™è‡ªå®šä¹‰plugin</a></li><li><a href="/jerry.github.io/frontend/webpack/06.æå‡Webpackæ‰“åŒ…é€Ÿåº¦.html" class="sidebar-link">6.æå‡Webpackæ‰“åŒ…é€Ÿåº¦</a></li><li><a href="/jerry.github.io/frontend/webpack/07.æ¨¡å—åˆ†æ.html" class="sidebar-link">7. Webpackæ¨¡å—æ‰“åŒ…åˆ†æ</a></li><li><a href="/jerry.github.io/frontend/webpack/08.Webpackæ‰“åŒ…æµç¨‹åˆ†æ.html" class="sidebar-link">8.Webpackæ‰“åŒ…æµç¨‹åˆ†æ</a></li><li><a href="/jerry.github.io/frontend/webpack/09.HMRçƒ­æ›´æ–°åŸç†.html" class="sidebar-link">9. HMRçƒ­æ›´æ–°åŸç†</a></li><li><a href="/jerry.github.io/frontend/webpack/10.Webpackæœ€æ˜“æ··æ·†çš„ç‚¹.html" class="sidebar-link">10. Webpackæœ€æ˜“æ··æ·†çš„ç‚¹</a></li><li><a href="/jerry.github.io/frontend/webpack/11.æ‰‹å†™webpack.html" class="sidebar-link">11. æ‰‹å†™Webpack</a></li><li><a href="/jerry.github.io/frontend/webpack/12.å¸¸ç”¨loaderå®ç°.html" class="sidebar-link">12. å¸¸ç”¨loaderå®ç°</a></li><li><a href="/jerry.github.io/frontend/webpack/13.webpackå¯åŠ¨è¿‡ç¨‹åˆ†æ.html" class="sidebar-link">13. webpackå¯åŠ¨è¿‡ç¨‹åˆ†æ</a></li><li><a href="/jerry.github.io/frontend/webpack/14.Webpack4.xé…ç½®æ€»ç»“.html" class="sidebar-link">14. Webpack4.x é…ç½®</a></li><li><a href="/jerry.github.io/frontend/webpack/WebpackåŸç†.html" class="sidebar-link">WebpackåŸç†</a></li><li><a href="/jerry.github.io/frontend/webpack/http.html" class="sidebar-link">/frontend/webpack/http.html</a></li><li><a href="/jerry.github.io/frontend/webpack/http-proxy-middleware.html" class="sidebar-link">http-proxy-middleware</a></li><li><a href="/jerry.github.io/frontend/webpack/å‰ç«¯å·¥ç¨‹åŒ–.html" class="sidebar-link">å‰ç«¯å·¥ç¨‹åŒ–</a></li><li><a href="/jerry.github.io/frontend/webpack/ç¼–å†™å¯ç»´æŠ¤çš„webpackæ„å»ºé…ç½®.html" class="sidebar-link">ç¼–å†™å¯ç»´æŠ¤çš„webpackæ„å»ºé…ç½®</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><p>[TOC]
åŸåˆ™ä¸Šwebpackåªèƒ½å¤„ç†jsæ¨¡å—ï¼Œå¦‚æœè¦å¤„ç†å…¶ä»–ç±»å‹çš„æ–‡ä»¶ï¼Œéœ€è¦ä½¿ç”¨å¯¹åº”çš„loaderè¿›è¡Œè½¬æ¢å¤„ç†ã€‚</p> <p>ä¸¾ä¸ªğŸŒ°ï¼šå¤„ç†SCSSæ–‡ä»¶</p> <ul><li>å…ˆå°†SCSSæºä»£ç æäº¤ç»™sass-loaderï¼Œå°†SCSSè½¬æ¢æˆCSSï¼›</li> <li>å°†sass-loaderè¾“å‡ºçš„CSSæäº¤ç»™css-loaderå¤„ç†ï¼Œæ‰¾å‡ºCSSä¸­ä¾èµ–çš„èµ„æºã€å‹ç¼©CSSç­‰ï¼›</li> <li>å°†css-loaderè¾“å‡ºçš„CSSæäº¤ç»™style-loaderå¤„ç†ï¼Œè½¬æ¢æˆé€šè¿‡è„šæœ¬åŠ è½½çš„JavaScriptä»£ç ï¼›</li></ul> <p>Webpackç›¸å…³é…ç½®å¦‚ä¸‹ï¼š</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">module</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">rules</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        <span class="token comment">// å¢åŠ å¯¹ SCSS æ–‡ä»¶çš„æ”¯æŒ</span>
        <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.scss$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
        <span class="token comment">// SCSSæ–‡ä»¶çš„å¤„ç†é¡ºåºä¸ºå…ˆsass-loaderï¼Œå†css-loaderï¼Œå†style-loader</span>
        <span class="token literal-property property">use</span><span class="token operator">:</span> <span class="token punctuation">[</span>
          <span class="token string">'style-loader'</span><span class="token punctuation">,</span>
          <span class="token punctuation">{</span>
            <span class="token literal-property property">loader</span><span class="token operator">:</span> <span class="token string">'css-loader'</span><span class="token punctuation">,</span>
            <span class="token comment">// ç»™css-loaderä¼ å…¥é…ç½®é¡¹</span>
            <span class="token literal-property property">options</span><span class="token operator">:</span> <span class="token punctuation">{</span>
              <span class="token literal-property property">minimize</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
            <span class="token punctuation">}</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token string">'sass-loader'</span><span class="token punctuation">]</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><p>å¯ä»¥çœ‹å‡ºï¼Œä»¥ä¸Šå¤„ç†è¿‡ç¨‹éœ€è¦æœ‰é¡ºåºçš„é“¾å¼æ‰§è¡Œï¼Œå…ˆsass-loaderï¼Œå†css-loaderï¼Œå†style-loaderã€‚æ˜¯<strong>ä»åå‘å‰</strong>ä¾æ¬¡æ‰§è¡Œå¯¹åº”çš„loaderï¼Œé‚£ä¹ˆä¸ºä»€ä¹ˆloaderçš„æ‰§è¡Œé¡ºåºæ˜¯ä»åå‘å‰çš„å‘¢ï¼Ÿè¿™å°±è¦è¯´åˆ°å‡½æ•°ç»„åˆäº†ã€‚</p> <h2 id="å‡½æ•°ç»„åˆçš„ä¸¤ç§æƒ…å†µ"><a href="#å‡½æ•°ç»„åˆçš„ä¸¤ç§æƒ…å†µ" class="header-anchor">#</a> å‡½æ•°ç»„åˆçš„ä¸¤ç§æƒ…å†µ</h2> <ul><li>Unixä¸­çš„piplineï¼šæ‰§è¡Œé¡ºåºæ˜¯<strong>ä»å·¦å¾€å³</strong></li> <li>å‡½æ•°ç»„åˆCompose(webpacké‡‡ç”¨çš„å°±æ˜¯è¿™ç§)ï¼šæ‰§è¡Œé¡ºåºæ˜¯<strong>ä»å³å¾€å·¦</strong></li></ul> <h2 id="ä»€ä¹ˆæ˜¯loader"><a href="#ä»€ä¹ˆæ˜¯loader" class="header-anchor">#</a> ä»€ä¹ˆæ˜¯loader</h2> <p>loaderæ˜¯webpackä¸­ä¸€ä¸ªé‡è¦çš„æ¦‚å¿µï¼Œç”¨æ¥å°†ä¸€æ®µä»£ç è½¬æ¢æˆå¦ä¸€æ®µä»£ç çš„webpackåŠ è½½å™¨ã€‚<strong>loaderæœ¬è´¨ä¸Šå°±æ˜¯å¯¼å‡ºä¸ºä¸€ä¸ªå‡½æ•°çš„nodeæ¨¡å—ï¼Œè¯¥å‡½æ•°åœ¨loaderè½¬æ¢èµ„æºçš„æ—¶å€™è°ƒç”¨</strong>ã€‚ç»™å®šçš„å‡½æ•°å°†è°ƒç”¨loader APIï¼Œå¹¶é€šè¿‡thisä¸Šä¸‹æ–‡è®¿é—®ã€‚loaderå°±åƒæ˜¯ä¸€ä¸ªç¿»è¯‘å‘˜ï¼Œèƒ½å°†æºæ–‡ä»¶ç»è¿‡è½¬åŒ–åè¾“å‡ºæ–°çš„ç»“æœï¼Œå¹¶ä¸”ä¸€ä¸ªæ–‡ä»¶è¿˜å¯ä»¥é“¾å¼åœ°ç»è¿‡å¤šä¸ªç¿»è¯‘å‘˜ç¿»è¯‘ã€‚</p> <h2 id="loaderç‰¹ç‚¹"><a href="#loaderç‰¹ç‚¹" class="header-anchor">#</a> loaderç‰¹ç‚¹</h2> <ul><li>ç¬¬ä¸€ä¸ªloaderè¦è¿”å›jsè„šæœ¬</li> <li>æ¯ä¸ªloaderçš„èŒè´£æ˜¯å•ä¸€çš„ï¼Œå³åªåšä¸€ä»¶äº‹(åªéœ€è¦å®Œæˆä¸€ç§è½¬æ¢)</li> <li>æ¯ä¸€ä¸ªloaderéƒ½æ˜¯ä¸€ä¸ªNodeæ¨¡å—</li> <li>æ¯ä¸ªloaderéƒ½æ˜¯æ— çŠ¶æ€çš„ï¼Œç¡®ä¿loaderåœ¨ä¸åŒæ¨¡å—è½¬æ¢ä¹‹é—´ä¸ä¿å­˜çŠ¶æ€</li></ul> <div class="custom-block warning"><p class="custom-block-title">WARNING</p> <p>éœ€è¦æ³¨æ„ï¼šåœ¨å¼€å‘ä¸€ä¸ªloaderæ—¶ï¼Œè¯·ä¿æŒå…¶<strong>èŒè´£çš„å•ä¸€æ€§</strong>ï¼Œæˆ‘ä»¬åªéœ€å…³å¿ƒè¾“å…¥å’Œè¾“å‡ºã€‚å¦‚æœä¸€ä¸ªæºæ–‡ä»¶éœ€è¦ç»å†å¤šæ­¥è½¬æ¢æ‰èƒ½æ­£å¸¸ä½¿ç”¨ï¼Œå°±é€šè¿‡å¤šä¸ªloaderå»è½¬æ¢ã€‚ åœ¨è°ƒç”¨å¤šä¸ªloader`è½¬æ¢ä¸€ä¸ªæ–‡ä»¶æ—¶ï¼Œæ¯ä¸ªloaderéƒ½ä¼šé“¾å¼åœ°é¡ºåºæ‰§è¡Œã€‚ç¬¬ä¸€ä¸ªloaderå°†ä¼šæ‹¿åˆ°éœ€å¤„ç†çš„åŸå†…å®¹ï¼Œä¸Šä¸€ä¸ªloaderå¤„ç†åçš„ç»“æœä¼šè¢«ä¼ ç»™ä¸‹ä¸€ä¸ªloaderæ¥ç€å¤„ç†ï¼Œæœ€åçš„loaderå°†å¤„ç†åçš„æœ€ç»ˆç»“æœè¿”å›ç»™Webpackã€‚</p></div> <h2 id="loaderåŸºç¡€"><a href="#loaderåŸºç¡€" class="header-anchor">#</a> loaderåŸºç¡€</h2> <p>Webpackæ˜¯è¿è¡Œåœ¨Node.jsä¹‹ä¸Šçš„ï¼Œ<strong>ä¸€ä¸ªloaderå…¶å®å°±æ˜¯ä¸€ä¸ªNode.jsæ¨¡å—</strong>ï¼Œè¿™ä¸ªæ¨¡å—éœ€è¦å¯¼å‡ºä¸€ä¸ªå‡½æ•°ã€‚è¿™ä¸ªå¯¼å‡ºå‡½æ•°çš„å·¥ä½œå°±æ˜¯ï¼šè·å¾—å¤„ç†å‰çš„åŸå†…å®¹ï¼Œå¯¹åŸå†…å®¹æ‰§è¡Œå¤„ç†åï¼Œè¿”å›å¤„ç†åçš„å†…å®¹ã€‚</p> <p>ä¸€ä¸ªæœ€ç®€å•çš„loaderçš„æºç å¦‚ä¸‹ï¼š</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>module<span class="token punctuation">.</span><span class="token function-variable function">exports</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">source</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// sourceä¸ºcompilerä¼ é€’ç»™loaderçš„ä¸€ä¸ªæ–‡ä»¶çš„åŸå†…å®¹</span>
  <span class="token comment">// è¯¥å‡½æ•°éœ€è¦è¿”å›å¤„ç†åçš„å†…å®¹ï¼Œè¿™é‡Œä¸ºäº†ç®€å•èµ·è§ï¼Œç›´æ¥æŠŠåŸå†…å®¹è¿”å›äº†ï¼Œç›¸å½“äºè¯¥loaderæ²¡æœ‰åšä»»ä½•è½¬æ¢</span>
  <span class="token keyword">return</span> source<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>ç”±äºloaderè¿è¡Œåœ¨Nodejsä¸­ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥è°ƒç”¨ä»»æ„Nodejsè‡ªå¸¦çš„APIï¼Œæˆ–è€…å®‰è£…ç¬¬ä¸‰æ–¹æ¨¡å—è¿›è¡Œè°ƒç”¨ï¼š</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> sass <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'node-sass'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
module<span class="token punctuation">.</span><span class="token function-variable function">exports</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">source</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token function">sass</span><span class="token punctuation">(</span>source<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h2 id="åˆå§‹åŒ–loaderåˆ›å»º"><a href="#åˆå§‹åŒ–loaderåˆ›å»º" class="header-anchor">#</a> åˆå§‹åŒ–loaderåˆ›å»º</h2> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// å…ˆå®‰è£…webpack-cli</span>
webpack<span class="token operator">-</span>cli generate<span class="token operator">-</span>loader
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h2 id="loaderè¿›é˜¶"><a href="#loaderè¿›é˜¶" class="header-anchor">#</a> loaderè¿›é˜¶</h2> <p>ä»¥ä¸Šåªæ˜¯ä¸ªæœ€ç®€å•çš„loaderï¼ŒWebpackè¿˜æä¾›ä¸€äº›APIä¾›loaderè°ƒç”¨ï¼Œä¸‹é¢æ¥ä¸€ä¸€ä»‹ç»ï¼š</p> <h3 id="ä½¿ç”¨loader-runneré«˜æ•ˆè¿›è¡Œloaderçš„è°ƒè¯•"><a href="#ä½¿ç”¨loader-runneré«˜æ•ˆè¿›è¡Œloaderçš„è°ƒè¯•" class="header-anchor">#</a> ä½¿ç”¨loader-runneré«˜æ•ˆè¿›è¡Œloaderçš„è°ƒè¯•</h3> <p><code>loader-runner</code>å…è®¸æˆ‘ä»¬åœ¨ä¸å®‰è£…webpackçš„æƒ…å†µä¸‹è¿è¡Œloadersã€‚
ä½œç”¨ï¼š</p> <ul><li>ä½œä¸ºwebpackçš„ä¾èµ–ï¼Œwebpackä¸­ä½¿ç”¨å®ƒæ‰§è¡Œloaderï¼›</li> <li>è¿›è¡Œloaderçš„å¼€å‘å’Œè°ƒè¯•ã€‚</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token punctuation">{</span>runLoaders<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'loader-runner'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'fs'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">runLoaders</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">resource</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'./src/demo.txt'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token literal-property property">loaders</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
            <span class="token literal-property property">loader</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'./src/raw-loader.js'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token literal-property property">options</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token comment">// loaderå‚æ•°</span>
                <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'test-loader'</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token literal-property property">context</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token function-variable function">emitFile</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">readResource</span><span class="token operator">:</span> fs<span class="token punctuation">.</span><span class="token function">readFile</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span>fs<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> result</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>resourceBuffer<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// foobar</span>
    err <span class="token operator">?</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token operator">:</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// resultçš„å†…å®¹ï¼š</span>
<span class="token comment">/*
{ result: [ 'export default &quot;bar&quot;' ], // loaderæ‰§è¡Œç»“æœ
  resourceBuffer: &lt;Buffer 66 6f 6f 62 61 72&gt;,
  cacheable: true, // ç»“æœæ˜¯å¦è¢«ç¼“å­˜
  fileDependencies:
   [ '/Users/liujie26/geektime-webpack-course/code/chapter07/raw-loader/src/demo.txt' ],
  contextDependencies: [] }
*/</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br></div></div><h3 id="loaderå‚æ•°çš„è·å–-é€šè¿‡loader-utils"><a href="#loaderå‚æ•°çš„è·å–-é€šè¿‡loader-utils" class="header-anchor">#</a> loaderå‚æ•°çš„è·å–(é€šè¿‡loader-utils)</h3> <p>åœ¨æœ€ä¸Šé¢å¤„ç†SCSSæ–‡ä»¶çš„Webpacké…ç½®ä¸­ï¼Œå°†optionså‚æ•°ä¼ ç»™äº†css-loaderï¼Œä»¥æ§åˆ¶css-loaderã€‚å¦‚ä½•åœ¨è‡ªå·±ç¼–å†™çš„Loaderä¸­è·å–åˆ°ç”¨æˆ·ä¼ å…¥çš„optionså‘¢ï¼Ÿéœ€è¦è¿™æ ·åšï¼š</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> loaderUtils <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'loader-utils'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
module<span class="token punctuation">.</span><span class="token function-variable function">exports</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">source</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// è·å–ç”¨æˆ·ä¸ºå½“å‰Loaderä¼ å…¥çš„options</span>
  <span class="token keyword">const</span> options <span class="token operator">=</span> loaderUtils<span class="token punctuation">.</span><span class="token function">getOptions</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> source<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="è¿”å›å…¶å®ƒç»“æœ"><a href="#è¿”å›å…¶å®ƒç»“æœ" class="header-anchor">#</a> è¿”å›å…¶å®ƒç»“æœ</h3> <p>ä¸Šé¢çš„loaderéƒ½åªæ˜¯è¿”å›äº†åŸå†…å®¹è½¬æ¢åçš„å†…å®¹ï¼Œä½†åœ¨æŸäº›åœºæ™¯ä¸‹è¿˜éœ€è¦è¿”å›é™¤äº†å†…å®¹ä¹‹å¤–çš„ä¸œè¥¿ã€‚</p> <p>ä»¥ç”¨babel-loaderè½¬æ¢ES6ä»£ç ä¸ºä¾‹ï¼Œå®ƒè¿˜éœ€è¦è¾“å‡ºè½¬æ¢åçš„ES5ä»£ç å¯¹åº”çš„Source Mapï¼Œä»¥æ–¹ä¾¿è°ƒè¯•æºç ã€‚ä¸ºäº†å°†Source Mapä¹Ÿä¸€èµ·éšç€ES5 ä»£ç è¿”å›ç»™Webpackï¼Œå¯ä»¥è¿™æ ·å†™ï¼š</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>module<span class="token punctuation">.</span><span class="token function-variable function">exports</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">source</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// é€šè¿‡ this.callback å‘Šè¯‰ Webpack è¿”å›çš„ç»“æœ</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">callback</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> source<span class="token punctuation">,</span> sourceMaps<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// å½“æˆ‘ä»¬ä½¿ç”¨ this.callback è¿”å›å†…å®¹æ—¶ï¼Œè¯¥ Loader å¿…é¡»è¿”å› undefinedï¼Œ</span>
  <span class="token comment">// ä»¥è®© Webpack çŸ¥é“è¯¥ Loader è¿”å›çš„ç»“æœåœ¨ this.callback ä¸­ï¼Œè€Œä¸æ˜¯ return ä¸­</span>
  <span class="token keyword">return</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>å…¶ä¸­çš„<code>this.callback</code>æ˜¯ Webpack ç»™ Loader æ³¨å…¥çš„ APIï¼Œä»¥æ–¹ä¾¿ Loader å’Œ Webpack ä¹‹é—´é€šä¿¡ã€‚<code>this.callback</code>çš„è¯¦ç»†ä½¿ç”¨æ–¹æ³•å¦‚ä¸‹ï¼š</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">callback</span><span class="token punctuation">(</span>
    <span class="token comment">// å½“æ— æ³•è½¬æ¢åŸå†…å®¹æ—¶ï¼Œç»™ Webpack è¿”å›ä¸€ä¸ª Error</span>
    <span class="token literal-property property">err</span><span class="token operator">:</span> Error <span class="token operator">|</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
    <span class="token comment">// åŸå†…å®¹è½¬æ¢åçš„å†…å®¹</span>
    <span class="token literal-property property">content</span><span class="token operator">:</span> string <span class="token operator">|</span> Buffer<span class="token punctuation">,</span>
    <span class="token comment">// ç”¨äºæŠŠè½¬æ¢åçš„å†…å®¹å¾—å‡ºåŸå†…å®¹çš„ Source Mapï¼Œæ–¹ä¾¿è°ƒè¯•</span>
    sourceMap<span class="token operator">?</span><span class="token operator">:</span> SourceMap<span class="token punctuation">,</span>
    <span class="token comment">// å¦‚æœæœ¬æ¬¡è½¬æ¢ä¸ºåŸå†…å®¹ç”Ÿæˆäº† AST è¯­æ³•æ ‘ï¼Œå¯ä»¥æŠŠè¿™ä¸ª AST è¿”å›ï¼Œ</span>
    <span class="token comment">// ä»¥æ–¹ä¾¿ä¹‹åéœ€è¦ AST çš„ Loader å¤ç”¨è¯¥ ASTï¼Œä»¥é¿å…é‡å¤ç”Ÿæˆ ASTï¼Œæå‡æ€§èƒ½</span>
    abstractSyntaxTree<span class="token operator">?</span><span class="token operator">:</span> <span class="token constant">AST</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p><code>Source Map</code>çš„ç”Ÿæˆå¾ˆè€—æ—¶ï¼Œé€šå¸¸åœ¨å¼€å‘ç¯å¢ƒä¸‹æ‰ä¼šç”Ÿæˆ<code>Source Map</code>ï¼Œå…¶ä»–ç¯å¢ƒä¸‹ä¸ç”¨ç”Ÿæˆï¼Œä»¥åŠ é€Ÿæ„å»ºã€‚å› æ­¤ï¼ŒWebpackä¸ºLoaderæä¾›äº† this.sourceMap APIå»å‘Šè¯‰<code>Loader</code>å½“å‰æ„å»ºç¯å¢ƒä¸‹ç”¨æˆ·æ˜¯å¦éœ€è¦ Source Mapã€‚å¦‚æœæˆ‘ä»¬ç¼–å†™çš„Loaderä¼šç”ŸæˆSource Mapï¼Œè¯·è€ƒè™‘åˆ°è¿™ç‚¹ã€‚</p> <h3 id="loaderè¿”å›å€¼å¤„ç†"><a href="#loaderè¿”å›å€¼å¤„ç†" class="header-anchor">#</a> loaderè¿”å›å€¼å¤„ç†</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">export default </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>json<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
<span class="token comment">// loaderè¿”å›ä¸€ä¸ªå€¼çš„è¯å¯ä»¥é‡‡ç”¨returnçš„æ–¹å¼</span>
<span class="token comment">// å¦‚æœè¦è¿”å›å¤šä¸ªå€¼çš„è¯å°±éœ€è¦é‡‡ç”¨this.callbackçš„æ–¹å¼äº†</span>
<span class="token comment">// this.callback(null, json, 2, 3, 4);</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="åŒæ­¥ä¸å¼‚æ­¥"><a href="#åŒæ­¥ä¸å¼‚æ­¥" class="header-anchor">#</a> åŒæ­¥ä¸å¼‚æ­¥</h3> <p>Loaderæœ‰åŒæ­¥å’Œå¼‚æ­¥ä¹‹åˆ†ï¼Œä¸Šé¢ä»‹ç»çš„Loaderéƒ½æ˜¯åŒæ­¥çš„Loaderï¼Œå› ä¸ºå®ƒä»¬çš„è½¬æ¢æµç¨‹éƒ½æ˜¯åŒæ­¥çš„ï¼Œè½¬æ¢å®Œæˆåå†è¿”å›ç»“æœã€‚ä½†åœ¨æŸäº›åœºæ™¯ä¸‹è½¬æ¢çš„æ­¥éª¤åªèƒ½æ˜¯å¼‚æ­¥å®Œæˆçš„ï¼Œä¾‹å¦‚ï¼šæˆ‘ä»¬éœ€è¦é€šè¿‡ç½‘ç»œè¯·æ±‚æ‰èƒ½å¾—å‡ºç»“æœï¼Œå¦‚æœé‡‡ç”¨åŒæ­¥çš„æ–¹å¼ï¼Œåˆ™ç½‘ç»œè¯·æ±‚ä¼šé˜»å¡æ•´ä¸ªæ„å»ºï¼Œå¯¼è‡´æ„å»ºéå¸¸ç¼“æ…¢ã€‚</p> <p>å¦‚æœæ˜¯å¼‚æ­¥è½¬æ¢ï¼Œæˆ‘ä»¬å¯ä»¥è¿™æ ·ï¼šé€šè¿‡this.asyncæ¥è¿”å›ä¸€ä¸ªå¼‚æ­¥å‡½æ•°ã€‚</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>module<span class="token punctuation">.</span><span class="token function-variable function">exports</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">source</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// å‘Šè¯‰ Webpack æœ¬æ¬¡è½¬æ¢æ˜¯å¼‚æ­¥çš„ï¼ŒLoader ä¼šåœ¨ callback ä¸­å›è°ƒç»“æœ</span>
    <span class="token keyword">var</span> callback <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">async</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">someAsyncOperation</span><span class="token punctuation">(</span>source<span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> result<span class="token punctuation">,</span> sourceMaps<span class="token punctuation">,</span> ast</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// é€šè¿‡ callback è¿”å›å¼‚æ­¥æ‰§è¡Œåçš„ç»“æœ</span>
        <span class="token comment">// callbackæ˜¯this.asyncè¿”å›çš„å¼‚æ­¥å‡½æ•°</span>
        <span class="token comment">// ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯Errorï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯å¤„ç†çš„ç»“æœ</span>
        <span class="token function">callback</span><span class="token punctuation">(</span>err<span class="token punctuation">,</span> result<span class="token punctuation">,</span> sourceMaps<span class="token punctuation">,</span> ast<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h3 id="åŒæ­¥loaderå¼‚å¸¸å¤„ç†"><a href="#åŒæ­¥loaderå¼‚å¸¸å¤„ç†" class="header-anchor">#</a> åŒæ­¥loaderå¼‚å¸¸å¤„ç†</h3> <ul><li>loaderå†…ç›´æ¥é€šè¿‡throwæŠ›å‡º</li> <li>é€šè¿‡this.callbackä¼ é€’é”™è¯¯</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">callback</span><span class="token punctuation">(</span>
    <span class="token literal-property property">err</span><span class="token operator">:</span> Error <span class="token operator">|</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
    <span class="token literal-property property">content</span><span class="token operator">:</span> string <span class="token operator">|</span> Buffer<span class="token punctuation">,</span>
    sourceMap<span class="token operator">?</span><span class="token operator">:</span> SourceMap<span class="token punctuation">,</span>
    meta<span class="token operator">?</span><span class="token operator">:</span> any
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h2 id="å¤„ç†äºŒè¿›åˆ¶æ•°æ®"><a href="#å¤„ç†äºŒè¿›åˆ¶æ•°æ®" class="header-anchor">#</a> å¤„ç†äºŒè¿›åˆ¶æ•°æ®</h2> <p>åœ¨é»˜è®¤çš„æƒ…å†µä¸‹ï¼ŒWebpackä¼ ç»™Loaderçš„åŸå†…å®¹éƒ½æ˜¯UTF-8æ ¼å¼ç¼–ç çš„å­—ç¬¦ä¸²ã€‚ä½†æŸäº›åœºæ™¯ä¸‹ï¼ŒLoaderä¸ä¼šå¤„ç†æ–‡æœ¬æ–‡ä»¶ï¼Œè€Œæ˜¯ä¼šå¤„ç†äºŒè¿›åˆ¶æ–‡ä»¶å¦‚file-loaderï¼Œå°±éœ€è¦Webpackç»™Loaderä¼ å…¥äºŒè¿›åˆ¶æ ¼å¼çš„æ•°æ®ã€‚ä¸ºæ­¤ï¼Œæˆ‘ä»¬éœ€è¦è¿™æ ·ç¼–å†™Loaderï¼š</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>module<span class="token punctuation">.</span><span class="token function-variable function">exports</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">source</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// åœ¨ exports.raw === true æ—¶ï¼ŒWebpack ä¼ ç»™ Loader çš„ source æ˜¯ Buffer ç±»å‹çš„</span>
    source <span class="token keyword">instanceof</span> <span class="token class-name">Buffer</span> <span class="token operator">===</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token comment">// Loader è¿”å›çš„ç±»å‹ä¹Ÿå¯ä»¥æ˜¯ Buffer ç±»å‹çš„</span>
    <span class="token comment">// åœ¨ exports.raw !== true æ—¶ï¼ŒLoader ä¹Ÿå¯ä»¥è¿”å› Buffer ç±»å‹çš„ç»“æœ</span>
    <span class="token keyword">return</span> source<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token comment">// é€šè¿‡exports.rawå±æ€§å‘Šè¯‰Webpackè¯¥Loaderæ˜¯å¦éœ€è¦äºŒè¿›åˆ¶æ•°æ®</span>
module<span class="token punctuation">.</span>exports<span class="token punctuation">.</span>raw <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>ä»¥ä¸Šä»£ç ä¸­æœ€å…³é”®çš„ä»£ç æ˜¯æœ€åä¸€è¡Œ<code>module.exports.raw = true;</code>ï¼Œå¦‚æœæ²¡æœ‰è¯¥è¡Œä»£ç ï¼Œåˆ™loaderåªèƒ½æ‹¿åˆ°å­—ç¬¦ä¸²ã€‚</p> <h2 id="å¼€å¯loaderç¼“å­˜åŠ é€Ÿ"><a href="#å¼€å¯loaderç¼“å­˜åŠ é€Ÿ" class="header-anchor">#</a> å¼€å¯loaderç¼“å­˜åŠ é€Ÿ</h2> <p>åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œæœ‰äº›è½¬æ¢æ“ä½œéœ€è¦å¤§é‡çš„è®¡ç®—ï¼Œéå¸¸è€—æ—¶ï¼Œå¦‚æœæ¯æ¬¡æ„å»ºéƒ½é‡æ–°æ‰§è¡Œé‡å¤çš„è½¬æ¢æ“ä½œï¼Œåˆ™æ„å»ºå°†ä¼šå˜å¾—éå¸¸ç¼“æ…¢ã€‚å› æ­¤ï¼Œ<strong>Webpackä¼šé»˜è®¤ç¼“å­˜æ‰€æœ‰loaderçš„å¤„ç†ç»“æœ</strong>ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼šåœ¨éœ€è¦è¢«å¤„ç†çš„æ–‡ä»¶æˆ–è€…å…¶ä¾èµ–çš„æ–‡ä»¶æ²¡æœ‰å‘ç”Ÿå˜åŒ–æ—¶ï¼Œæ˜¯ä¸ä¼šé‡æ–°è°ƒç”¨å¯¹åº”çš„Loaderå»æ‰§è¡Œè½¬æ¢æ“ä½œçš„ã€‚</p> <p>å¦‚æœæˆ‘ä»¬æƒ³è®©Webpackä¸ç¼“å­˜è¯¥loaderçš„å¤„ç†ç»“æœï¼Œå¯ä»¥è¿™æ ·è®¾ç½®ï¼š</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>module<span class="token punctuation">.</span><span class="token function-variable function">exports</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">source</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// å…³é—­loaderçš„ç¼“å­˜åŠŸèƒ½</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">cacheable</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> source<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>ç¼“å­˜æ¡ä»¶ï¼šloaderçš„ç»“æœåœ¨ç›¸åŒçš„è¾“å…¥ä¸‹æœ‰ç¡®å®šçš„è¾“å‡ºã€‚éœ€è¦æ³¨æ„ï¼šæœ‰ä¾èµ–çš„loaderæ— æ³•ä½¿ç”¨ç¼“å­˜ã€‚</p> <h3 id="loaderå¦‚ä½•è¿›è¡Œæ–‡ä»¶è¾“å‡º"><a href="#loaderå¦‚ä½•è¿›è¡Œæ–‡ä»¶è¾“å‡º" class="header-anchor">#</a> loaderå¦‚ä½•è¿›è¡Œæ–‡ä»¶è¾“å‡ºï¼Ÿ</h3> <p>å¯ä»¥é€šè¿‡<code>this.emitFile</code>è¿›è¡Œæ–‡ä»¶å†™å…¥ã€‚</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> loaderUtils <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'loader-utils'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span><span class="token function-variable function">exports</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">source</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Loader a is excuted!'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">const</span> url <span class="token operator">=</span> loaderUtils<span class="token punctuation">.</span><span class="token function">interpolateName</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token string">'[name].[ext]'</span><span class="token punctuation">,</span> source<span class="token punctuation">)</span><span class="token punctuation">;</span>

    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>url<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">emitFile</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span> source<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> source<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h3 id="å…¶å®ƒloader-api"><a href="#å…¶å®ƒloader-api" class="header-anchor">#</a> å…¶å®ƒLoader API</h3> <p>é™¤äº†ä»¥ä¸Šæåˆ°çš„åœ¨<code>Loader</code>ä¸­èƒ½è°ƒç”¨çš„<code>Webpack API</code>ï¼Œè¿˜å­˜åœ¨ä»¥ä¸‹å¸¸ç”¨ APIï¼š</p> <ul><li><strong>this.context</strong>ï¼šå½“å‰å¤„ç†æ–‡ä»¶çš„æ‰€åœ¨ç›®å½•ï¼Œå‡å¦‚å½“å‰ Loader å¤„ç†çš„æ–‡ä»¶æ˜¯ /src/main.jsï¼Œåˆ™ this.context å°±ç­‰äº /srcï¼›</li> <li><strong>this.resource</strong>ï¼šå½“å‰å¤„ç†çš„æ–‡ä»¶çš„å®Œæ•´è¯·æ±‚è·¯å¾„ï¼ŒåŒ…æ‹¬ querystringï¼Œä¾‹å¦‚<code>/src/main.js?name=1</code>ï¼›</li> <li><strong>this.resourcePath</strong>ï¼šå½“å‰å¤„ç†çš„æ–‡ä»¶çš„è·¯å¾„ï¼Œä¾‹å¦‚ /src/main.jsï¼›</li> <li><strong>this.resourceQuery</strong>ï¼šå½“å‰å¤„ç†çš„æ–‡ä»¶çš„ querystringï¼›</li> <li><strong>this.target</strong>ï¼šç­‰äº Webpack é…ç½®ä¸­çš„ Targetï¼›</li> <li><strong>this.loadModule</strong>ï¼šä½†Loader åœ¨å¤„ç†ä¸€ä¸ªæ–‡ä»¶æ—¶ï¼Œå¦‚æœä¾èµ–å…¶å®ƒæ–‡ä»¶çš„å¤„ç†ç»“æœæ‰èƒ½å¾—å‡ºå½“å‰æ–‡ä»¶çš„ç»“æœæ—¶ï¼Œå°±å¯ä»¥é€šè¿‡this.loadModule(request: string, callback: function(err, source, sourceMap, module)) å»è·å–requestå¯¹åº”æ–‡ä»¶çš„å¤„ç†ç»“æœï¼›</li> <li><strong>this.resolve</strong>ï¼šåƒrequireè¯­å¥ä¸€æ ·è·å¾—æŒ‡å®šæ–‡ä»¶çš„å®Œæ•´è·¯å¾„ï¼Œä½¿ç”¨æ–¹æ³•ä¸ºresolve(context: string, request: string, callback: function(err, result: string))ï¼›</li> <li><strong>this.addDependency</strong>ï¼šç»™å½“å‰å¤„ç†æ–‡ä»¶æ·»åŠ å…¶ä¾èµ–çš„æ–‡ä»¶ï¼Œä»¥ä¾¿å†å…¶ä¾èµ–çš„æ–‡ä»¶å‘ç”Ÿå˜åŒ–æ—¶ï¼Œä¼šé‡æ–°è°ƒç”¨ Loader å¤„ç†è¯¥æ–‡ä»¶ã€‚ä½¿ç”¨æ–¹æ³•ä¸º addDependency(file: string)ï¼›</li> <li><strong>this.addContextDependency</strong>ï¼šå’ŒaddDependency ç±»ä¼¼ï¼Œä½† addContextDependency æ˜¯æŠŠæ•´ä¸ªç›®å½•åŠ å…¥åˆ°å½“å‰æ­£åœ¨å¤„ç†æ–‡ä»¶çš„ä¾èµ–ä¸­ã€‚ä½¿ç”¨æ–¹æ³•ä¸º addContextDependency(directory: string)ï¼›</li> <li><strong>this.clearDependencies</strong>ï¼šæ¸…é™¤å½“å‰æ­£åœ¨å¤„ç†æ–‡ä»¶çš„æ‰€æœ‰ä¾èµ–ï¼Œä½¿ç”¨æ–¹æ³•ä¸º clearDependencies()ï¼›</li> <li><strong>this.emitFile</strong>ï¼šè¾“å‡ºä¸€ä¸ªæ–‡ä»¶ï¼Œä½¿ç”¨æ–¹æ³•ä¸º emitFile(name: string, content: Buffer|string, sourceMap: {...})ã€‚</li></ul> <h2 id="_4ç§æœ¬åœ°å¼€å‘æµ‹è¯•loaderçš„æ–¹æ³•-åŠ è½½æœ¬åœ°-loader"><a href="#_4ç§æœ¬åœ°å¼€å‘æµ‹è¯•loaderçš„æ–¹æ³•-åŠ è½½æœ¬åœ°-loader" class="header-anchor">#</a> 4ç§æœ¬åœ°å¼€å‘æµ‹è¯•loaderçš„æ–¹æ³•(åŠ è½½æœ¬åœ° Loader)</h2> <p>åœ¨å¼€å‘Loaderçš„è¿‡ç¨‹ä¸­ï¼Œä¸ºäº†æµ‹è¯•ç¼–å†™çš„Loaderæ˜¯å¦èƒ½æ­£å¸¸å·¥ä½œï¼Œéœ€è¦æŠŠå®ƒé…ç½®åˆ° Webpackä¸­åï¼Œæ‰å¯èƒ½ä¼šè°ƒç”¨è¯¥Loaderã€‚åœ¨å‰é¢çš„ç« èŠ‚ä¸­ï¼Œä½¿ç”¨çš„Loaderéƒ½æ˜¯é€šè¿‡npmå®‰è£…çš„ï¼Œè¦ä½¿ç”¨Loaderæ—¶ä¼šç›´æ¥ä½¿ç”¨Loaderçš„åç§°ï¼Œä»£ç å¦‚ä¸‹ï¼š</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">module</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">rules</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.css</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
        <span class="token literal-property property">use</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'style-loader'</span><span class="token punctuation">]</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>å¦‚æœè¿˜é‡‡å–ä»¥ä¸Šçš„æ–¹æ³•å»ä½¿ç”¨æœ¬åœ°å¼€å‘çš„Loaderå°†ä¼šå¾ˆéº»çƒ¦ï¼Œå› ä¸ºä½ éœ€è¦ç¡®ä¿ç¼–å†™çš„ Loader çš„æºç æ˜¯åœ¨<code>node_modules</code>ç›®å½•ä¸‹ã€‚ä¸ºæ­¤ä½ éœ€è¦å…ˆæŠŠç¼–å†™çš„ Loaderå‘å¸ƒåˆ°Npmä»“åº“åå†å®‰è£…åˆ°æœ¬åœ°é¡¹ç›®ä½¿ç”¨ã€‚</p> <p>è§£å†³ä»¥ä¸Šé—®é¢˜çš„ä¾¿æ·æ–¹æ³•æœ‰å¦‚ä¸‹å‡ ç§ï¼š</p> <h3 id="åŒ¹é…å•ä¸ªloader-ä½ å¯ä»¥ç®€å•é€šè¿‡åœ¨ruleå¯¹è±¡è®¾ç½®path-resolveæŒ‡å‘è¿™ä¸ªæœ¬åœ°æ–‡ä»¶"><a href="#åŒ¹é…å•ä¸ªloader-ä½ å¯ä»¥ç®€å•é€šè¿‡åœ¨ruleå¯¹è±¡è®¾ç½®path-resolveæŒ‡å‘è¿™ä¸ªæœ¬åœ°æ–‡ä»¶" class="header-anchor">#</a> åŒ¹é…å•ä¸ªloaderï¼Œä½ å¯ä»¥ç®€å•é€šè¿‡åœ¨ruleå¯¹è±¡è®¾ç½®path.resolveæŒ‡å‘è¿™ä¸ªæœ¬åœ°æ–‡ä»¶</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  <span class="token literal-property property">module</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">rules</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.js$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
        <span class="token literal-property property">use</span><span class="token operator">:</span> <span class="token punctuation">[</span>
          <span class="token punctuation">{</span>
            <span class="token literal-property property">loader</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">'path/to/loader.js'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token literal-property property">options</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token comment">/* ... */</span><span class="token punctuation">}</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">]</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><h3 id="åŒ¹é…å¤šä¸ªloaders-å¯ä»¥ä½¿ç”¨resolveloader-modules-é…ç½®"><a href="#åŒ¹é…å¤šä¸ªloaders-å¯ä»¥ä½¿ç”¨resolveloader-modules-é…ç½®" class="header-anchor">#</a> åŒ¹é…å¤šä¸ªloadersï¼Œå¯ä»¥ä½¿ç”¨<code>resolveLoader.modules</code> é…ç½®</h3> <p><code>ResolveLoader</code>ç”¨äºé…ç½®<code>Webpack</code>å¦‚ä½•å¯»æ‰¾<code>Loader</code>ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œåªä¼šå» <code>node_modules</code>ç›®å½•ä¸‹å¯»æ‰¾ï¼Œä¸ºäº†è®©<code>Webpack</code>åŠ è½½æ”¾åœ¨æœ¬åœ°é¡¹ç›®ä¸­çš„<code>Loader</code>éœ€è¦ä¿®æ”¹<code>resolveLoader.modules</code>ã€‚
<code>webpack</code>å°†ä¼šä»è¿™äº›ç›®å½•ä¸­æœç´¢è¿™äº›<code>loaders</code>ã€‚å‡å¦‚æœ¬åœ°çš„ Loader åœ¨é¡¹ç›®ç›®å½•ä¸­çš„<code>./loaders/loader-name</code>ä¸­ï¼Œåˆ™éœ€è¦å¦‚ä¸‹é…ç½®ï¼š</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  <span class="token literal-property property">resolveLoader</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// å»å“ªäº›ç›®å½•ä¸‹å¯»æ‰¾ Loaderï¼Œæœ‰å…ˆåé¡ºåºä¹‹åˆ†</span>
    <span class="token literal-property property">modules</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token string">'node_modules'</span><span class="token punctuation">,</span>
      path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'loaders'</span><span class="token punctuation">)</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>åŠ ä¸Šä¸Šè¿°é…ç½®åï¼ŒWebpackä¼šå…ˆå»<code>node_modules</code>é¡¹ç›®ä¸‹å¯»æ‰¾<code>Loader</code>ï¼Œå¦‚æœæ‰¾ä¸åˆ°ï¼Œä¼šå†å»<code>./loaders/</code>ç›®å½•ä¸‹å¯»æ‰¾ã€‚</p> <h3 id="resolveloader-alias"><a href="#resolveloader-alias" class="header-anchor">#</a> resolveLoader.alias</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token literal-property property">resolveLoader</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// ç»™loaderé…ç½®åˆ«å</span>
    <span class="token literal-property property">alias</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token string-property property">'my-loader'</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'loaders'</span><span class="token punctuation">,</span> <span class="token string">'my-loader'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// é»˜è®¤å»node_modulesç›®å½•ä¸‹æ‰¾å¯¹åº”çš„loaderï¼Œæ‰¾ä¸åˆ°äº†å†å»loadersç›®å½•ä¸‹å¯»æ‰¾</span>
    <span class="token comment">// æ¨èä½¿ç”¨</span>
    <span class="token comment">// modules: ['node_modules', path.resolve(__dirname, 'loaders')]</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h3 id="ä½¿ç”¨npm-link"><a href="#ä½¿ç”¨npm-link" class="header-anchor">#</a> ä½¿ç”¨<code>npm link</code></h3> <p><code>npm link</code>ä¸“é—¨ç”¨äºå¼€å‘å’Œè°ƒè¯•æœ¬åœ°çš„<code>npm</code>æ¨¡å—ï¼Œèƒ½åšåˆ°åœ¨ä¸å‘å¸ƒæ¨¡å—çš„æƒ…å†µä¸‹ï¼Œå°†æœ¬åœ°çš„ä¸€ä¸ªæ­£åœ¨å¼€å‘çš„æ¨¡å—çš„æºç é“¾æ¥åˆ°é¡¹ç›®çš„<code>node_modules</code>ç›®å½•ä¸‹ï¼Œè®©é¡¹ç›®å¯ä»¥ç›´æ¥ä½¿ç”¨æœ¬åœ°çš„Npmæ¨¡å—ã€‚ç”±äºæ˜¯é€šè¿‡è½¯é“¾æ¥çš„æ–¹å¼å®ç°çš„ï¼Œç¼–è¾‘äº†æœ¬åœ°çš„Npmæ¨¡å—ä»£ç ï¼Œæ‰€ä»¥åœ¨é¡¹ç›®ä¸­ä¹Ÿèƒ½ä½¿ç”¨åˆ°ç¼–è¾‘åçš„ä»£ç ã€‚</p> <p>å®Œæˆ<code>npm link</code>çš„æ­¥éª¤å¦‚ä¸‹ï¼š</p> <ol><li>ç¡®ä¿æ­£åœ¨å¼€å‘çš„æœ¬åœ°<code>npm</code>æ¨¡å—ï¼ˆä¹Ÿå°±æ˜¯æ­£åœ¨å¼€å‘çš„ Loaderï¼‰çš„ <code>package.json</code>å·²ç»æ­£ç¡®é…ç½®å¥½ï¼›</li> <li>åœ¨æœ¬åœ°<code>npm</code>æ¨¡å—æ ¹ç›®å½•ä¸‹æ‰§è¡Œ<code>npm link</code>ï¼ŒæŠŠæœ¬åœ°æ¨¡å—æ³¨å†Œåˆ°å…¨å±€ï¼›</li> <li>åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹æ‰§è¡Œ<code>npm link loader-name</code>ï¼ŒæŠŠç¬¬2æ­¥æ³¨å†Œåˆ°å…¨å±€çš„æœ¬åœ° Npm æ¨¡å—é“¾æ¥åˆ°é¡¹ç›®çš„<code>node_moduels</code>ä¸‹ï¼Œå…¶ä¸­çš„<code>loader-name</code>æ˜¯æŒ‡åœ¨ç¬¬1æ­¥ä¸­çš„<code>package.json</code>æ–‡ä»¶ä¸­é…ç½®çš„æ¨¡å—åç§°ã€‚</li></ol> <p>é“¾æ¥å¥½<code>Loader</code>åˆ°é¡¹ç›®åä½ å°±å¯ä»¥åƒä½¿ç”¨ä¸€ä¸ªçœŸæ­£çš„Npmæ¨¡å—ä¸€æ ·ä½¿ç”¨æœ¬åœ°çš„Loaderäº†ã€‚</p> <h2 id="loaderåˆ†ç±»"><a href="#loaderåˆ†ç±»" class="header-anchor">#</a> loaderåˆ†ç±»</h2> <ul><li>å‰ç½®(pre)loader</li> <li>æ™®é€š(normal)loader</li> <li>åç½®(post)loader</li> <li>è¡Œå†…(inline)loader</li></ul> <h2 id="é…ç½®å¤šä¸ªloader"><a href="#é…ç½®å¤šä¸ªloader" class="header-anchor">#</a> é…ç½®å¤šä¸ªloader</h2> <h3 id="æ•°ç»„å½¢å¼"><a href="#æ•°ç»„å½¢å¼" class="header-anchor">#</a> æ•°ç»„å½¢å¼</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token literal-property property">rules</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
        <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.js$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
        <span class="token literal-property property">loader</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'my-loader3'</span><span class="token punctuation">,</span> <span class="token string">'my-loader2'</span><span class="token punctuation">,</span> <span class="token string">'my-loader'</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p><img src="/jerry.github.io/assets/img/loader.4ba5468d.png" alt=""></p> <h3 id="å¯¹è±¡å½¢å¼-å¯ä»¥é…ç½®loaderå‚æ•°"><a href="#å¯¹è±¡å½¢å¼-å¯ä»¥é…ç½®loaderå‚æ•°" class="header-anchor">#</a> å¯¹è±¡å½¢å¼(å¯ä»¥é…ç½®loaderå‚æ•°)</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token literal-property property">rules</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
        <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.js$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
        <span class="token literal-property property">use</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token literal-property property">loader</span><span class="token operator">:</span> <span class="token string">'my-loader'</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.js$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
        <span class="token literal-property property">use</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token literal-property property">loader</span><span class="token operator">:</span> <span class="token string">'my-loader2'</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.js$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
        <span class="token literal-property property">use</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token literal-property property">loader</span><span class="token operator">:</span> <span class="token string">'my-loader3'</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><p><img src="/jerry.github.io/assets/img/loader2.7bd8bc60.png" alt=""></p> <h3 id="å¤šä¸ªloaderæ‰§è¡Œé¡ºåº"><a href="#å¤šä¸ªloaderæ‰§è¡Œé¡ºåº" class="header-anchor">#</a> å¤šä¸ªloaderæ‰§è¡Œé¡ºåº</h3> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>æ€»ç»“ï¼šä»ä¸Šé¢çš„ä¸¤ä¸ªä¾‹å­ä¸­å¯ä»¥çœ‹å‡ºï¼Œå¤šä¸ªloaderæ‰§è¡Œé¡ºåºæ˜¯ï¼š<strong>å¤šä¸ªloaderæ˜¯ä¸²è¡Œæ‰§è¡Œçš„ï¼Œä»å³åˆ°å·¦ï¼Œä»ä¸‹åˆ°ä¸Š</strong>ã€‚</p></div> <h3 id="é…ç½®å‚æ•°æ”¹å˜loaderæ‰§è¡Œé¡ºåº"><a href="#é…ç½®å‚æ•°æ”¹å˜loaderæ‰§è¡Œé¡ºåº" class="header-anchor">#</a> é…ç½®å‚æ•°æ”¹å˜loaderæ‰§è¡Œé¡ºåº</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token literal-property property">rules</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
        <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.js$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
        <span class="token literal-property property">use</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token literal-property property">loader</span><span class="token operator">:</span> <span class="token string">'my-loader'</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token literal-property property">enforce</span><span class="token operator">:</span> <span class="token string">'pre'</span> <span class="token comment">// æŒ‡å®šmy-loaderæœ€å…ˆä½¿ç”¨</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.js$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
        <span class="token literal-property property">use</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token literal-property property">loader</span><span class="token operator">:</span> <span class="token string">'my-loader2'</span> <span class="token comment">// é»˜è®¤ä¸ºnormal</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.js$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
        <span class="token literal-property property">use</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token literal-property property">loader</span><span class="token operator">:</span> <span class="token string">'my-loader3'</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token literal-property property">enforce</span><span class="token operator">:</span> <span class="token string">'post'</span> <span class="token comment">// æœ€åä½¿ç”¨</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><div class="custom-block warning"><p class="custom-block-title">WARNING</p> <p>éœ€è¦æ³¨æ„ï¼šloaderå¸¦å‚æ•°æ‰§è¡Œçš„é¡ºåº: pre -&gt; normal -&gt; inline -&gt; postï¼Œinlineä¸ºè¡Œå†…loaderã€‚</p></div> <h2 id="inline-loader-è¡Œå†…loader"><a href="#inline-loader-è¡Œå†…loader" class="header-anchor">#</a> inline-loader(è¡Œå†…loader)</h2> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// ./å‰é¢çš„!è¡¨ç¤ºå°†å½“å‰å¼•å…¥çš„æ–‡ä»¶äº¤ç»™è¡Œå†…loaderå¤„ç†</span>
<span class="token keyword">const</span> a <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'inline-loader!./a'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ä¸åŠ é™åˆ¶ï¼Œæ‰€æœ‰loaderéƒ½è°ƒç”¨æ¥å¤„ç†a.js</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code>npx webpack
<span class="token comment">// è¾“å‡º</span>
my<span class="token operator">-</span>loader1
my<span class="token operator">-</span>loader2
my<span class="token operator">-</span>loader3
my<span class="token operator">-</span>loader1 <span class="token comment">// pre</span>
my<span class="token operator">-</span>loader2 <span class="token comment">// normal</span>
inline<span class="token operator">-</span>loader
my<span class="token operator">-</span>loader3 <span class="token comment">// post</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h3 id="ç¦ç”¨normal-loader"><a href="#ç¦ç”¨normal-loader" class="header-anchor">#</a> !ç¦ç”¨normal-loader</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> a <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'!inline-loader!./a'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// !ç¦ç”¨normal-loaderï¼Œåªä½¿ç”¨pre-loaderã€post-loaderå’Œinline-loaderå¤„ç†å¤„ç†a.js</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code>npx webpack
<span class="token comment">// è¾“å‡º</span>
my<span class="token operator">-</span>loader1
my<span class="token operator">-</span>loader2
my<span class="token operator">-</span>loader3
my<span class="token operator">-</span>loader1 <span class="token comment">// pre</span>
inline<span class="token operator">-</span>loader
my<span class="token operator">-</span>loader3 <span class="token comment">// post</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h3 id="ç¦ç”¨pre-loaderå’Œnormal-loader"><a href="#ç¦ç”¨pre-loaderå’Œnormal-loader" class="header-anchor">#</a> -!ç¦ç”¨pre-loaderå’Œnormal-loader</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> a <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'-!inline-loader!./a'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// -!ç¦ç”¨pre-loaderã€normal-loaderï¼Œåªä½¿ç”¨post-loaderå’Œinline-loaderå¤„ç†å¤„ç†a.js</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code>npx webpack
<span class="token comment">// è¾“å‡º</span>
my<span class="token operator">-</span>loader1
my<span class="token operator">-</span>loader2
my<span class="token operator">-</span>loader3
inline<span class="token operator">-</span>loader
my<span class="token operator">-</span>loader3 <span class="token comment">// post</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h3 id="ç¦ç”¨pre-loaderã€normal-loaderã€post-loader-åªèƒ½è¡Œå†…å¤„ç†"><a href="#ç¦ç”¨pre-loaderã€normal-loaderã€post-loader-åªèƒ½è¡Œå†…å¤„ç†" class="header-anchor">#</a> !!ç¦ç”¨pre-loaderã€normal-loaderã€post-loaderï¼Œåªèƒ½è¡Œå†…å¤„ç†</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> a <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'!!inline-loader!./a'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// !!ç¦ç”¨pre-loaderã€normal-loaderã€post-loaderï¼Œåªä½¿ç”¨inline-loaderå¤„ç†å¤„ç†a.js</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code>npx webpack
<span class="token comment">// è¾“å‡º</span>
my<span class="token operator">-</span>loader1
my<span class="token operator">-</span>loader2
my<span class="token operator">-</span>loader3
inline<span class="token operator">-</span>loader
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h2 id="loaderç»„æˆ"><a href="#loaderç»„æˆ" class="header-anchor">#</a> loaderç»„æˆ</h2> <p>loaderé»˜è®¤ç”±<strong>pitchå’Œnormal</strong>ä¸¤éƒ¨åˆ†ç»„æˆã€‚</p> <p>æ¯ä¸ªloaderæ¨¡å—éƒ½æ”¯æŒä¸€ä¸ª<code>.pitch</code>å±æ€§ï¼Œä¸Šé¢çš„æ–¹æ³•ä¼šä¼˜å…ˆäºloaderçš„å®é™…æ–¹æ³•æ‰§è¡Œã€‚å®é™…ä¸Šï¼Œwebpackå®˜æ–¹ä¹Ÿç»™å‡ºäº†pitchä¸loaderæœ¬èº«æ–¹æ³•çš„æ‰§è¡Œé¡ºåºå›¾ï¼š</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token operator">|</span><span class="token operator">-</span> a<span class="token operator">-</span>loader <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">pitch</span><span class="token template-punctuation string">`</span></span>
  <span class="token operator">|</span><span class="token operator">-</span> b<span class="token operator">-</span>loader <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">pitch</span><span class="token template-punctuation string">`</span></span>
    <span class="token operator">|</span><span class="token operator">-</span> c<span class="token operator">-</span>loader <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">pitch</span><span class="token template-punctuation string">`</span></span>
      <span class="token operator">|</span><span class="token operator">-</span> requested module is picked up <span class="token keyword">as</span> a dependency
    <span class="token operator">|</span><span class="token operator">-</span> c<span class="token operator">-</span>loader normal execution
  <span class="token operator">|</span><span class="token operator">-</span> b<span class="token operator">-</span>loader normal execution
<span class="token operator">|</span><span class="token operator">-</span> a<span class="token operator">-</span>loader normal execution
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>pitchå’Œnormalçš„æ‰§è¡Œé¡ºåºæ­£å¥½ç›¸åï¼Œå½“pitchæ²¡æœ‰å®šä¹‰æˆ–è€…æ²¡æœ‰è¿”å›å€¼æ—¶ï¼Œä¼šå…ˆä¾æ¬¡æ‰§è¡Œå†è·å–èµ„æºæ‰§è¡Œloaderã€‚å¦‚æœå®šä¹‰çš„æŸä¸ªpitchæœ‰è¿”å›å€¼ï¼Œåˆ™ä¼šè·³è¿‡è¯»å–èµ„æºå’Œè‡ªå·±çš„loaderã€‚</p> <h3 id="æ‰€æœ‰loaderå‡æ— è¿”å›å€¼"><a href="#æ‰€æœ‰loaderå‡æ— è¿”å›å€¼" class="header-anchor">#</a> æ‰€æœ‰loaderå‡æ— è¿”å›å€¼</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token literal-property property">use</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'my-loader3'</span><span class="token punctuation">,</span> <span class="token string">'my-loader2'</span><span class="token punctuation">,</span> <span class="token string">'my-loader'</span><span class="token punctuation">]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>å¦‚æœ'my-loader3', 'my-loader2', 'my-loader'3ä¸ªloaderå‡æ— è¿”å›å€¼ï¼Œé‚£ä¹ˆå…ˆæ‰§è¡Œ<code>pitch</code>æ–¹æ³•ï¼Œä»å·¦åˆ°å³ï¼Œå†è·å–èµ„æºã€‚
<img src="/jerry.github.io/assets/img/loader3.b10dd1bc.png" alt=""></p> <p>æ‰€æœ‰çš„pitchLoaderéƒ½æ²¡æœ‰è¿”å›å€¼ã€‚</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>pitch   loader3 â†’ loader2 â†’ loader1
                                    â†˜
                                      èµ„æº
                                    â†™
normal   loader3 â† loader2 â† loader1
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code>æˆ‘æ˜¯loader3 çš„pitch
æˆ‘æ˜¯loader2 çš„pitch
æˆ‘æ˜¯loader1 çš„pitch
my<span class="token operator">-</span>loader1
my<span class="token operator">-</span>loader2
my<span class="token operator">-</span>loader3
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="æœ‰pitchloaderå­˜åœ¨è¿”å›å€¼"><a href="#æœ‰pitchloaderå­˜åœ¨è¿”å›å€¼" class="header-anchor">#</a> æœ‰pitchLoaderå­˜åœ¨è¿”å›å€¼</h3> <p>æœ‰è¿”å›å€¼ï¼š<strong>ç›´æ¥è·³è¿‡åç»­æ‰€æœ‰çš„loaderåŒ…æ‹¬è‡ªå·±çš„</strong>ï¼Œè·³åˆ°ä¹‹å‰çš„loaderï¼Œå¯ç”¨äºé˜»æ–­loaderã€‚
<img src="/jerry.github.io/assets/img/loader4.89565706.png" alt=""></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">loader</span> <span class="token operator">=</span> <span class="token parameter">source</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// å½“å‰loaderä»…ä»…åœ¨æºç åé¢è¿½åŠ äº†ä¸€æ®µæ–‡å­—</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'my-loader2'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> source <span class="token operator">+</span> <span class="token string">'æˆ‘æ˜¯æ‰‹å†™loaderå¤„ç†è¿‡çš„'</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

loader<span class="token punctuation">.</span><span class="token function-variable function">pitch</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token string">'æˆ‘æœ‰è¿”å›å€¼-é˜»æ–­äº†'</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> loader<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>è¾“å‡ºï¼š</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>my<span class="token operator">-</span>loader3
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h2 id="loader-runner"><a href="#loader-runner" class="header-anchor">#</a> loader-runner</h2> <p>å®šä¹‰ï¼šloader-runner å…è®¸ä½ åœ¨ä¸å®‰è£… webpack çš„æƒ…å†µä¸‹è¿è¡Œ loadersã€‚</p> <p>ä½œç”¨ï¼š</p> <ul><li>ä½œä¸º webpack çš„ä¾èµ–ï¼Œwebpack ä¸­ä½¿ç”¨å®ƒæ‰§è¡Œ loader</li> <li>è¿›è¡Œ loader çš„å¼€å‘å’Œè°ƒè¯•</li></ul> <h2 id="å®æˆ˜"><a href="#å®æˆ˜" class="header-anchor">#</a> å®æˆ˜</h2> <p><img src="/jerry.github.io/assets/img/loader6.6f4f7e7d.png" alt=""></p> <p>é¦–å…ˆåœ¨é¡¹ç›®ç›®å½•ä¸‹æ–°å»ºloadersç›®å½•ï¼Œç”¨æ¥å­˜æ”¾è‡ªå®šä¹‰çš„loaderã€‚åœ¨loadersç›®å½•ä¸­æ–°å»º<code>my-webpack-loader</code>ç›®å½•ï¼Œè¿™å°±æ˜¯æˆ‘ä»¬çš„ç¬¬ä¸€ä¸ªè‡ªå®šä¹‰loaderï¼Œå¹¶åœ¨è¯¥ç›®å½•ä¸‹æ–°å»ºindex.jså’Œpackage.jsonæ–‡ä»¶ã€‚å…·ä½“å†…å®¹å¦‚ä¸‹ï¼š</p> <p>index.jsï¼š</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> loaderUtils <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'loader-utils'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span><span class="token function-variable function">exports</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">content</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// è·å–ç”¨æˆ·é…ç½®çš„options</span>
    <span class="token keyword">const</span> options <span class="token operator">=</span> loaderUtils<span class="token punctuation">.</span><span class="token function">getOptions</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'***options***'</span><span class="token punctuation">,</span> options<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// è¯¥loaderçš„ä½œç”¨å°±æ˜¯åœ¨åŸå†…å®¹å‰åŠ ä¸Šå¦‚ä¸‹å­—ç¬¦ä¸²</span>
    <span class="token keyword">return</span> <span class="token string">'{test123};'</span> <span class="token operator">+</span> content<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>package.jsonï¼š</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token punctuation">{</span>
  <span class="token string-property property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;my-webpack-loader&quot;</span><span class="token punctuation">,</span>
  <span class="token string-property property">&quot;version&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1.0.0&quot;</span><span class="token punctuation">,</span>
  <span class="token string-property property">&quot;description&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
  <span class="token string-property property">&quot;main&quot;</span><span class="token operator">:</span> <span class="token string">&quot;index.js&quot;</span><span class="token punctuation">,</span>
  <span class="token string-property property">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string-property property">&quot;test&quot;</span><span class="token operator">:</span> <span class="token string">&quot;echo \&quot;Error: no test specified\&quot; &amp;&amp; exit 1&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token string-property property">&quot;keywords&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token string-property property">&quot;author&quot;</span><span class="token operator">:</span> <span class="token string">&quot;liujie&quot;</span><span class="token punctuation">,</span>
  <span class="token string-property property">&quot;license&quot;</span><span class="token operator">:</span> <span class="token string">&quot;ISC&quot;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>åœ¨webpack.config.jsä¸­é…ç½®ï¼š</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token literal-property property">module</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">rules</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.js$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
        <span class="token literal-property property">exclude</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">node_modules</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
        <span class="token literal-property property">use</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token literal-property property">loader</span><span class="token operator">:</span> <span class="token string">'my-webpack-loader'</span><span class="token punctuation">,</span>
            <span class="token literal-property property">options</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token string">'wangwu'</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p>æ‰§è¡Œ<code>npm run dev</code>ï¼Œç»“æœå¦‚ä¸‹ï¼š
<img src="/jerry.github.io/assets/img/loader5.59a5d09c.png" alt=""></p> <h3 id="raw-loader"><a href="#raw-loader" class="header-anchor">#</a> raw-loader</h3> <p><img src="/jerry.github.io/assets/img/image-20200605193224056.03fe265b.png" alt="image-20200605193224056"></p> <ul><li><code>\u2028</code>ï¼šè¡Œåˆ†éš”ç¬¦(è¡Œç»“æŸç¬¦)</li> <li><code>\u2029</code>ï¼šæ®µè½åˆ†éš”ç¬¦(è¡Œç»“æŸç¬¦)</li></ul> <p><code>\u2028</code>ä¸ºè¡Œåˆ†éš”ç¬¦ï¼Œä¼šè¢«æµè§ˆå™¨è§£æä¸ºæ¢è¡Œï¼Œè€Œåœ¨Javascriptçš„å­—ç¬¦ä¸²è¡¨è¾¾å¼ä¸­æ˜¯ä¸å…è®¸æ¢è¡Œçš„ï¼Œä»è€Œå¯¼è‡´é”™è¯¯ã€‚</p> <p>æŠŠç‰¹æ®Šå­—ç¬¦è½¬ä¹‰æ›¿æ¢å³å¯ï¼Œä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼š</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>str = str.replace(/\u2028/g, '\\u2028');
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// raw-loaderä½œç”¨ï¼šå°†æ–‡ä»¶è½¬åŒ–ä¸ºå­—ç¬¦ä¸²</span>
<span class="token keyword">const</span> loaderUtils <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'loader-utils'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'fs'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span><span class="token function-variable function">exports</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">source</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span>name<span class="token punctuation">}</span> <span class="token operator">=</span> loaderUtils<span class="token punctuation">.</span><span class="token function">getOptions</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// è·å–loaderå‚æ•°</span>

    <span class="token keyword">const</span> url <span class="token operator">=</span> loaderUtils<span class="token punctuation">.</span><span class="token function">interpolateName</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token string">'[name].[ext]'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
        source
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// è·å–æ–‡ä»¶å</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">emitFile</span><span class="token punctuation">(</span>path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> url<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>source<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token string">'foo'</span><span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// å…³é—­loaderç¼“å­˜</span>
    <span class="token comment">// this.cacheable(false);</span>
    <span class="token comment">// const callback = this.async();</span>
    <span class="token comment">// console.log('name', name);</span>

    <span class="token comment">// \u2028 è¡Œåˆ†éš”ç¬¦ \u2029 æ®µè½åˆ†éš”ç¬¦</span>
    <span class="token keyword">const</span> json <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>source<span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token string">'foo'</span><span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\u2028</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">,</span> <span class="token string">'\\u2028'</span><span class="token punctuation">)</span> <span class="token comment">// ä¸ºäº†å®‰å…¨èµ·è§ï¼Œå¤„ç†ES6æ¨¡æ¿å­—ç¬¦ä¸²çš„é—®é¢˜</span>
        <span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\u2029</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">,</span> <span class="token string">'\\u2029'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ES6æ¨¡æ¿å­—ç¬¦ä¸²æ›¿æ¢</span>
    <span class="token comment">// å¼‚æ­¥loaderæ¨¡æ‹Ÿ</span>
    <span class="token comment">// fs.readFile(path.join(__dirname, './async.txt'), 'utf-8', (err, data) =&gt; {</span>
    <span class="token comment">//     if (err) {</span>
    <span class="token comment">//         callback(err, ''); // this.callbackæ–¹å¼å¤„ç†é”™è¯¯</span>
    <span class="token comment">//     }</span>
    <span class="token comment">//     callback(null, data);</span>
    <span class="token comment">// });</span>

    <span class="token comment">// throw new Error('Error'); // throwæ–¹å¼å¤„ç†é”™è¯¯</span>

    <span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">export default </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>json<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">666</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span> <span class="token comment">// loaderè½¬æ¢åçš„ç»“æœ</span>
    <span class="token comment">// loaderè¿”å›ä¸€ä¸ªå€¼çš„è¯å¯ä»¥é‡‡ç”¨returnçš„æ–¹å¼</span>
    <span class="token comment">// å¦‚æœè¦è¿”å›å¤šä¸ªå€¼çš„è¯å°±éœ€è¦é‡‡ç”¨this.callbackçš„æ–¹å¼äº†</span>
    <span class="token comment">// this.callback(null, json, 2, 3, 4);</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br></div></div><h2 id="å‚è€ƒæ–‡æ¡£"><a href="#å‚è€ƒæ–‡æ¡£" class="header-anchor">#</a> å‚è€ƒæ–‡æ¡£</h2> <ol><li><a href="https://webpack.docschina.org/api/loaders/" target="_blank" rel="noopener noreferrer">loader API<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://segmentfault.com/a/1190000015088834#articleHeader10" target="_blank" rel="noopener noreferrer">webpackåŸç†<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://webpack.docschina.org/contribute/writing-a-loader/" target="_blank" rel="noopener noreferrer">ç¼–å†™ä¸€ä¸ª loader<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://juejin.im/post/5bc1a73df265da0a8d36b74f" target="_blank" rel="noopener noreferrer">ã€webpackè¿›é˜¶ã€‘ä½ çœŸçš„æŒæ¡äº†loaderä¹ˆï¼Ÿ- loaderåé—®<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://github.com/CommanderXL/Biu-blog/issues/31" target="_blank" rel="noopener noreferrer">Webpack Loader é«˜æ‰‹è¿›é˜¶(ä¸€)<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ol></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">2022-05-26 16:21:47</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      â†
      <a href="/jerry.github.io/frontend/webpack/03.Tapable.html" class="prev">
        3.Tapableå­¦ä¹ 
      </a></span> <span class="next"><a href="/jerry.github.io/frontend/webpack/05.ç¼–å†™è‡ªå®šä¹‰plugin.html">
        5.ç¼–å†™è‡ªå®šä¹‰plugin
      </a>
      â†’
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/jerry.github.io/assets/js/app.8cb867ca.js" defer></script><script src="/jerry.github.io/assets/js/2.7d547363.js" defer></script><script src="/jerry.github.io/assets/js/11.230bdafc.js" defer></script><script src="/jerry.github.io/assets/js/20.cf42ebc2.js" defer></script>
  </body>
</html>
