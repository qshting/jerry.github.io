<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Nginx入门 | 雪山之巅</title>
    <meta name="generator" content="VuePress 1.9.7">
    <link rel="apple-touch-icon" href="/jerry.github.io/apple-touch-icon.png">
    <link rel="icon" href="/jerry.github.io/favicon.ico">
    <link rel="manifest" href="/jerry.github.io/manifest.json">
    <meta name="description" content="我与夏风皆过客1">
    <meta name="theme-color" content="#ffffff">
    
    <link rel="preload" href="/jerry.github.io/assets/css/0.styles.ba9d0c50.css" as="style"><link rel="preload" href="/jerry.github.io/assets/js/app.8cb867ca.js" as="script"><link rel="preload" href="/jerry.github.io/assets/js/2.7d547363.js" as="script"><link rel="preload" href="/jerry.github.io/assets/js/51.f8825ce8.js" as="script"><link rel="preload" href="/jerry.github.io/assets/js/20.cf42ebc2.js" as="script"><link rel="prefetch" href="/jerry.github.io/assets/js/10.a1c8416b.js"><link rel="prefetch" href="/jerry.github.io/assets/js/100.504935d6.js"><link rel="prefetch" href="/jerry.github.io/assets/js/101.21e817bf.js"><link rel="prefetch" href="/jerry.github.io/assets/js/102.65169271.js"><link rel="prefetch" href="/jerry.github.io/assets/js/103.6fcbe2c9.js"><link rel="prefetch" href="/jerry.github.io/assets/js/104.11583416.js"><link rel="prefetch" href="/jerry.github.io/assets/js/105.151c8c59.js"><link rel="prefetch" href="/jerry.github.io/assets/js/106.5363313f.js"><link rel="prefetch" href="/jerry.github.io/assets/js/107.b871dbb1.js"><link rel="prefetch" href="/jerry.github.io/assets/js/108.3c9edfb6.js"><link rel="prefetch" href="/jerry.github.io/assets/js/109.a2864e45.js"><link rel="prefetch" href="/jerry.github.io/assets/js/11.230bdafc.js"><link rel="prefetch" href="/jerry.github.io/assets/js/110.a19fcc30.js"><link rel="prefetch" href="/jerry.github.io/assets/js/111.093fdfd1.js"><link rel="prefetch" href="/jerry.github.io/assets/js/112.10ea3de4.js"><link rel="prefetch" href="/jerry.github.io/assets/js/113.95e556d2.js"><link rel="prefetch" href="/jerry.github.io/assets/js/114.bab0361c.js"><link rel="prefetch" href="/jerry.github.io/assets/js/115.a9cf132f.js"><link rel="prefetch" href="/jerry.github.io/assets/js/116.da97d300.js"><link rel="prefetch" href="/jerry.github.io/assets/js/117.36250871.js"><link rel="prefetch" href="/jerry.github.io/assets/js/118.e52f5780.js"><link rel="prefetch" href="/jerry.github.io/assets/js/119.7758e874.js"><link rel="prefetch" href="/jerry.github.io/assets/js/12.8cade74a.js"><link rel="prefetch" href="/jerry.github.io/assets/js/120.8f88acbb.js"><link rel="prefetch" href="/jerry.github.io/assets/js/121.6dcee880.js"><link rel="prefetch" href="/jerry.github.io/assets/js/122.8777c1e2.js"><link rel="prefetch" href="/jerry.github.io/assets/js/123.16bc758e.js"><link rel="prefetch" href="/jerry.github.io/assets/js/124.f8f1ed86.js"><link rel="prefetch" href="/jerry.github.io/assets/js/125.b4d23aeb.js"><link rel="prefetch" href="/jerry.github.io/assets/js/126.29d9ca54.js"><link rel="prefetch" href="/jerry.github.io/assets/js/127.cfe3a252.js"><link rel="prefetch" href="/jerry.github.io/assets/js/128.e7ab0c95.js"><link rel="prefetch" href="/jerry.github.io/assets/js/129.d0cac2ec.js"><link rel="prefetch" href="/jerry.github.io/assets/js/13.f32bffef.js"><link rel="prefetch" href="/jerry.github.io/assets/js/130.53ae1e24.js"><link rel="prefetch" href="/jerry.github.io/assets/js/131.b382f1b0.js"><link rel="prefetch" href="/jerry.github.io/assets/js/132.9f7a7079.js"><link rel="prefetch" href="/jerry.github.io/assets/js/133.9bedf5c8.js"><link rel="prefetch" href="/jerry.github.io/assets/js/134.0fde1402.js"><link rel="prefetch" href="/jerry.github.io/assets/js/135.8ce45018.js"><link rel="prefetch" href="/jerry.github.io/assets/js/136.165553e5.js"><link rel="prefetch" href="/jerry.github.io/assets/js/137.6e606b3c.js"><link rel="prefetch" href="/jerry.github.io/assets/js/138.21058c26.js"><link rel="prefetch" href="/jerry.github.io/assets/js/139.695a93ac.js"><link rel="prefetch" href="/jerry.github.io/assets/js/14.3eb5eb18.js"><link rel="prefetch" href="/jerry.github.io/assets/js/140.a9f8a3df.js"><link rel="prefetch" href="/jerry.github.io/assets/js/141.c7f4ec43.js"><link rel="prefetch" href="/jerry.github.io/assets/js/142.e5649d1a.js"><link rel="prefetch" href="/jerry.github.io/assets/js/143.1ee6e8a2.js"><link rel="prefetch" href="/jerry.github.io/assets/js/144.94acf2f4.js"><link rel="prefetch" href="/jerry.github.io/assets/js/145.eb5135d7.js"><link rel="prefetch" href="/jerry.github.io/assets/js/146.18f8a40e.js"><link rel="prefetch" href="/jerry.github.io/assets/js/147.b21fb0df.js"><link rel="prefetch" href="/jerry.github.io/assets/js/148.adfd1662.js"><link rel="prefetch" href="/jerry.github.io/assets/js/149.dc7e9bb0.js"><link rel="prefetch" href="/jerry.github.io/assets/js/15.5fbe3ada.js"><link rel="prefetch" href="/jerry.github.io/assets/js/150.f8fa379b.js"><link rel="prefetch" href="/jerry.github.io/assets/js/151.6f065a1f.js"><link rel="prefetch" href="/jerry.github.io/assets/js/152.1475f8d1.js"><link rel="prefetch" href="/jerry.github.io/assets/js/153.78885179.js"><link rel="prefetch" href="/jerry.github.io/assets/js/154.4047c70a.js"><link rel="prefetch" href="/jerry.github.io/assets/js/155.406967ab.js"><link rel="prefetch" href="/jerry.github.io/assets/js/156.751598e1.js"><link rel="prefetch" href="/jerry.github.io/assets/js/157.e7a7a219.js"><link rel="prefetch" href="/jerry.github.io/assets/js/158.d1ca1de8.js"><link rel="prefetch" href="/jerry.github.io/assets/js/159.93693f00.js"><link rel="prefetch" href="/jerry.github.io/assets/js/16.13e04a1e.js"><link rel="prefetch" href="/jerry.github.io/assets/js/160.4657154d.js"><link rel="prefetch" href="/jerry.github.io/assets/js/161.27b64c01.js"><link rel="prefetch" href="/jerry.github.io/assets/js/162.d58c457f.js"><link rel="prefetch" href="/jerry.github.io/assets/js/163.79343a4c.js"><link rel="prefetch" href="/jerry.github.io/assets/js/164.5a25522e.js"><link rel="prefetch" href="/jerry.github.io/assets/js/165.c52e5816.js"><link rel="prefetch" href="/jerry.github.io/assets/js/166.d5d598c8.js"><link rel="prefetch" href="/jerry.github.io/assets/js/167.82b2360f.js"><link rel="prefetch" href="/jerry.github.io/assets/js/168.88cc8b96.js"><link rel="prefetch" href="/jerry.github.io/assets/js/169.1cb9b389.js"><link rel="prefetch" href="/jerry.github.io/assets/js/17.283191f2.js"><link rel="prefetch" href="/jerry.github.io/assets/js/170.e3dcbc16.js"><link rel="prefetch" href="/jerry.github.io/assets/js/171.07ef11f3.js"><link rel="prefetch" href="/jerry.github.io/assets/js/172.c183eb41.js"><link rel="prefetch" href="/jerry.github.io/assets/js/173.59fc33e7.js"><link rel="prefetch" href="/jerry.github.io/assets/js/174.d37ec705.js"><link rel="prefetch" href="/jerry.github.io/assets/js/175.ab467af4.js"><link rel="prefetch" href="/jerry.github.io/assets/js/176.6d5f2e13.js"><link rel="prefetch" href="/jerry.github.io/assets/js/177.fd722926.js"><link rel="prefetch" href="/jerry.github.io/assets/js/178.901e44b1.js"><link rel="prefetch" href="/jerry.github.io/assets/js/179.95aecdf1.js"><link rel="prefetch" href="/jerry.github.io/assets/js/18.f812f6af.js"><link rel="prefetch" href="/jerry.github.io/assets/js/180.6f7205ee.js"><link rel="prefetch" href="/jerry.github.io/assets/js/181.7e1e1402.js"><link rel="prefetch" href="/jerry.github.io/assets/js/182.eb3c32f9.js"><link rel="prefetch" href="/jerry.github.io/assets/js/183.794272e9.js"><link rel="prefetch" href="/jerry.github.io/assets/js/184.3ed1d5af.js"><link rel="prefetch" href="/jerry.github.io/assets/js/185.2430ff76.js"><link rel="prefetch" href="/jerry.github.io/assets/js/186.46272a01.js"><link rel="prefetch" href="/jerry.github.io/assets/js/187.c617b164.js"><link rel="prefetch" href="/jerry.github.io/assets/js/19.f9e85296.js"><link rel="prefetch" href="/jerry.github.io/assets/js/21.724fc087.js"><link rel="prefetch" href="/jerry.github.io/assets/js/22.c6929093.js"><link rel="prefetch" href="/jerry.github.io/assets/js/23.f56ff06f.js"><link rel="prefetch" href="/jerry.github.io/assets/js/24.44ba2312.js"><link rel="prefetch" href="/jerry.github.io/assets/js/25.f35c5403.js"><link rel="prefetch" href="/jerry.github.io/assets/js/26.b731cd9b.js"><link rel="prefetch" href="/jerry.github.io/assets/js/27.3d5daa0a.js"><link rel="prefetch" href="/jerry.github.io/assets/js/28.8cc8bab9.js"><link rel="prefetch" href="/jerry.github.io/assets/js/29.7730d077.js"><link rel="prefetch" href="/jerry.github.io/assets/js/3.5ab0026b.js"><link rel="prefetch" href="/jerry.github.io/assets/js/30.6d37c03b.js"><link rel="prefetch" href="/jerry.github.io/assets/js/31.e8f4a77a.js"><link rel="prefetch" href="/jerry.github.io/assets/js/32.549d6f8e.js"><link rel="prefetch" href="/jerry.github.io/assets/js/33.95792b9f.js"><link rel="prefetch" href="/jerry.github.io/assets/js/34.b7e709b1.js"><link rel="prefetch" href="/jerry.github.io/assets/js/35.daed2e5c.js"><link rel="prefetch" href="/jerry.github.io/assets/js/36.90c3c71a.js"><link rel="prefetch" href="/jerry.github.io/assets/js/37.dfa11bd8.js"><link rel="prefetch" href="/jerry.github.io/assets/js/38.e36c7a27.js"><link rel="prefetch" href="/jerry.github.io/assets/js/39.017d9b19.js"><link rel="prefetch" href="/jerry.github.io/assets/js/4.7259a42f.js"><link rel="prefetch" href="/jerry.github.io/assets/js/40.e43eaee9.js"><link rel="prefetch" href="/jerry.github.io/assets/js/41.697e21b6.js"><link rel="prefetch" href="/jerry.github.io/assets/js/42.f01531a7.js"><link rel="prefetch" href="/jerry.github.io/assets/js/43.84df7d63.js"><link rel="prefetch" href="/jerry.github.io/assets/js/44.891e9a3f.js"><link rel="prefetch" href="/jerry.github.io/assets/js/45.f19e5ca4.js"><link rel="prefetch" href="/jerry.github.io/assets/js/46.f81f1bfa.js"><link rel="prefetch" href="/jerry.github.io/assets/js/47.8f4693a3.js"><link rel="prefetch" href="/jerry.github.io/assets/js/48.b0c93d91.js"><link rel="prefetch" href="/jerry.github.io/assets/js/49.f9f0f3f8.js"><link rel="prefetch" href="/jerry.github.io/assets/js/5.e04d3d1e.js"><link rel="prefetch" href="/jerry.github.io/assets/js/50.e03d13cd.js"><link rel="prefetch" href="/jerry.github.io/assets/js/52.ec76efc3.js"><link rel="prefetch" href="/jerry.github.io/assets/js/53.c9a34637.js"><link rel="prefetch" href="/jerry.github.io/assets/js/54.8abbd387.js"><link rel="prefetch" href="/jerry.github.io/assets/js/55.c468aca8.js"><link rel="prefetch" href="/jerry.github.io/assets/js/56.f4b50a04.js"><link rel="prefetch" href="/jerry.github.io/assets/js/57.de666ddb.js"><link rel="prefetch" href="/jerry.github.io/assets/js/58.458d0401.js"><link rel="prefetch" href="/jerry.github.io/assets/js/59.40e6b3d1.js"><link rel="prefetch" href="/jerry.github.io/assets/js/6.c98e06b3.js"><link rel="prefetch" href="/jerry.github.io/assets/js/60.43848b9a.js"><link rel="prefetch" href="/jerry.github.io/assets/js/61.2fe1e137.js"><link rel="prefetch" href="/jerry.github.io/assets/js/62.3f176587.js"><link rel="prefetch" href="/jerry.github.io/assets/js/63.f552851c.js"><link rel="prefetch" href="/jerry.github.io/assets/js/64.d50a2fff.js"><link rel="prefetch" href="/jerry.github.io/assets/js/65.0d627c3b.js"><link rel="prefetch" href="/jerry.github.io/assets/js/66.78e14677.js"><link rel="prefetch" href="/jerry.github.io/assets/js/67.caf5006d.js"><link rel="prefetch" href="/jerry.github.io/assets/js/68.39e8b4be.js"><link rel="prefetch" href="/jerry.github.io/assets/js/69.bd962060.js"><link rel="prefetch" href="/jerry.github.io/assets/js/7.5838a81a.js"><link rel="prefetch" href="/jerry.github.io/assets/js/70.578ae89e.js"><link rel="prefetch" href="/jerry.github.io/assets/js/71.8c97f45c.js"><link rel="prefetch" href="/jerry.github.io/assets/js/72.d9e369a7.js"><link rel="prefetch" href="/jerry.github.io/assets/js/73.4b42860a.js"><link rel="prefetch" href="/jerry.github.io/assets/js/74.1a99cf28.js"><link rel="prefetch" href="/jerry.github.io/assets/js/75.58b36cd5.js"><link rel="prefetch" href="/jerry.github.io/assets/js/76.ed9de37a.js"><link rel="prefetch" href="/jerry.github.io/assets/js/77.227912ee.js"><link rel="prefetch" href="/jerry.github.io/assets/js/78.93f12412.js"><link rel="prefetch" href="/jerry.github.io/assets/js/79.81a03b40.js"><link rel="prefetch" href="/jerry.github.io/assets/js/8.4e52af96.js"><link rel="prefetch" href="/jerry.github.io/assets/js/80.b777d54f.js"><link rel="prefetch" href="/jerry.github.io/assets/js/81.0b43f0cc.js"><link rel="prefetch" href="/jerry.github.io/assets/js/82.28396efa.js"><link rel="prefetch" href="/jerry.github.io/assets/js/83.1277f065.js"><link rel="prefetch" href="/jerry.github.io/assets/js/84.8e6d03c2.js"><link rel="prefetch" href="/jerry.github.io/assets/js/85.2376dca3.js"><link rel="prefetch" href="/jerry.github.io/assets/js/86.555d125a.js"><link rel="prefetch" href="/jerry.github.io/assets/js/87.d6aee5d0.js"><link rel="prefetch" href="/jerry.github.io/assets/js/88.1737751f.js"><link rel="prefetch" href="/jerry.github.io/assets/js/89.e3d5e734.js"><link rel="prefetch" href="/jerry.github.io/assets/js/9.6a9d759a.js"><link rel="prefetch" href="/jerry.github.io/assets/js/90.f1b5cd88.js"><link rel="prefetch" href="/jerry.github.io/assets/js/91.87444e61.js"><link rel="prefetch" href="/jerry.github.io/assets/js/92.45ed101b.js"><link rel="prefetch" href="/jerry.github.io/assets/js/93.18f7d79e.js"><link rel="prefetch" href="/jerry.github.io/assets/js/94.efb5658f.js"><link rel="prefetch" href="/jerry.github.io/assets/js/95.1228ac2d.js"><link rel="prefetch" href="/jerry.github.io/assets/js/96.c1a66ad9.js"><link rel="prefetch" href="/jerry.github.io/assets/js/97.32033135.js"><link rel="prefetch" href="/jerry.github.io/assets/js/98.37b12cfd.js"><link rel="prefetch" href="/jerry.github.io/assets/js/99.cd7ac96d.js">
    <link rel="stylesheet" href="/jerry.github.io/assets/css/0.styles.ba9d0c50.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/jerry.github.io/" class="home-link router-link-active"><!----> <span class="site-name">雪山之巅</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/jerry.github.io/" class="nav-link">
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端知识" class="dropdown-title"><span class="title">前端知识</span> <span class="arrow down"></span></button> <button type="button" aria-label="前端知识" class="mobile-dropdown-title"><span class="title">前端知识</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/jerry.github.io/frontend/es6/" class="nav-link">
  ECMAScript6
</a></li><li class="dropdown-item"><!----> <a href="/jerry.github.io/frontend/typescript/" class="nav-link">
  TypeScript
</a></li><li class="dropdown-item"><!----> <a href="/jerry.github.io/backend/nginx/.html" class="nav-link">
  ---------------
</a></li><li class="dropdown-item"><!----> <a href="/jerry.github.io/frontend/javascript/" class="nav-link">
  JS基础专题
</a></li><li class="dropdown-item"><!----> <a href="/jerry.github.io/frontend/jsTopic/" class="nav-link">
  JS技术专题
</a></li><li class="dropdown-item"><!----> <a href="/jerry.github.io/frontend/jsOpt/" class="nav-link">
  JS优化专题
</a></li><li class="dropdown-item"><!----> <a href="/jerry.github.io/backend/nginx/.html" class="nav-link">
  ---------------
</a></li><li class="dropdown-item"><!----> <a href="/jerry.github.io/frontend/webpack/" class="nav-link">
  Webpack
</a></li><li class="dropdown-item"><!----> <a href="/jerry.github.io/frontend/webpack4/" class="nav-link">
  Webpack4配置实战
</a></li><li class="dropdown-item"><!----> <a href="/jerry.github.io/backend/nginx/.html" class="nav-link">
  ---------------
</a></li><li class="dropdown-item"><!----> <a href="/jerry.github.io/frontend/web/" class="nav-link">
  浏览器相关
</a></li><li class="dropdown-item"><!----> <a href="/jerry.github.io/frontend/html/" class="nav-link">
  HTML5
</a></li><li class="dropdown-item"><!----> <a href="/jerry.github.io/frontend/css/" class="nav-link">
  CSS3
</a></li><li class="dropdown-item"><!----> <a href="/jerry.github.io/frontend/excellent/" class="nav-link">
  优秀博客
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="框架知识" class="dropdown-title"><span class="title">框架知识</span> <span class="arrow down"></span></button> <button type="button" aria-label="框架知识" class="mobile-dropdown-title"><span class="title">框架知识</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/jerry.github.io/frameModule/vue/" class="nav-link">
  Vue3
</a></li><li class="dropdown-item"><!----> <a href="/jerry.github.io/frameModule/ReactNative/" class="nav-link">
  React Native
</a></li><li class="dropdown-item"><!----> <a href="/jerry.github.io/frameModule/weixin/" class="nav-link">
  微信小程序
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="服务端知识" class="dropdown-title"><span class="title">服务端知识</span> <span class="arrow down"></span></button> <button type="button" aria-label="服务端知识" class="mobile-dropdown-title"><span class="title">服务端知识</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/jerry.github.io/backend/nodejs/" class="nav-link">
  NodeJS
</a></li><li class="dropdown-item"><!----> <a href="/jerry.github.io/backend/koa/" class="nav-link">
  Koa
</a></li><li class="dropdown-item"><!----> <a href="/jerry.github.io/backend/mysql/" class="nav-link">
  Mysql
</a></li><li class="dropdown-item"><!----> <a href="/jerry.github.io/backend/mongodb/" class="nav-link">
  MongoDB
</a></li><li class="dropdown-item"><!----> <a href="/jerry.github.io/backend/nginx/" class="nav-link router-link-active">
  Nginx
</a></li><li class="dropdown-item"><!----> <a href="/jerry.github.io/backend/http/" class="nav-link">
  HTTP协议
</a></li><li class="dropdown-item"><!----> <a href="/jerry.github.io/backend/docker/" class="nav-link">
  官网知识推荐
</a></li></ul></div></div><div class="nav-item"><a href="/jerry.github.io/blog/" class="nav-link">
  其他杂谈
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/jerry.github.io/" class="nav-link">
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端知识" class="dropdown-title"><span class="title">前端知识</span> <span class="arrow down"></span></button> <button type="button" aria-label="前端知识" class="mobile-dropdown-title"><span class="title">前端知识</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/jerry.github.io/frontend/es6/" class="nav-link">
  ECMAScript6
</a></li><li class="dropdown-item"><!----> <a href="/jerry.github.io/frontend/typescript/" class="nav-link">
  TypeScript
</a></li><li class="dropdown-item"><!----> <a href="/jerry.github.io/backend/nginx/.html" class="nav-link">
  ---------------
</a></li><li class="dropdown-item"><!----> <a href="/jerry.github.io/frontend/javascript/" class="nav-link">
  JS基础专题
</a></li><li class="dropdown-item"><!----> <a href="/jerry.github.io/frontend/jsTopic/" class="nav-link">
  JS技术专题
</a></li><li class="dropdown-item"><!----> <a href="/jerry.github.io/frontend/jsOpt/" class="nav-link">
  JS优化专题
</a></li><li class="dropdown-item"><!----> <a href="/jerry.github.io/backend/nginx/.html" class="nav-link">
  ---------------
</a></li><li class="dropdown-item"><!----> <a href="/jerry.github.io/frontend/webpack/" class="nav-link">
  Webpack
</a></li><li class="dropdown-item"><!----> <a href="/jerry.github.io/frontend/webpack4/" class="nav-link">
  Webpack4配置实战
</a></li><li class="dropdown-item"><!----> <a href="/jerry.github.io/backend/nginx/.html" class="nav-link">
  ---------------
</a></li><li class="dropdown-item"><!----> <a href="/jerry.github.io/frontend/web/" class="nav-link">
  浏览器相关
</a></li><li class="dropdown-item"><!----> <a href="/jerry.github.io/frontend/html/" class="nav-link">
  HTML5
</a></li><li class="dropdown-item"><!----> <a href="/jerry.github.io/frontend/css/" class="nav-link">
  CSS3
</a></li><li class="dropdown-item"><!----> <a href="/jerry.github.io/frontend/excellent/" class="nav-link">
  优秀博客
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="框架知识" class="dropdown-title"><span class="title">框架知识</span> <span class="arrow down"></span></button> <button type="button" aria-label="框架知识" class="mobile-dropdown-title"><span class="title">框架知识</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/jerry.github.io/frameModule/vue/" class="nav-link">
  Vue3
</a></li><li class="dropdown-item"><!----> <a href="/jerry.github.io/frameModule/ReactNative/" class="nav-link">
  React Native
</a></li><li class="dropdown-item"><!----> <a href="/jerry.github.io/frameModule/weixin/" class="nav-link">
  微信小程序
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="服务端知识" class="dropdown-title"><span class="title">服务端知识</span> <span class="arrow down"></span></button> <button type="button" aria-label="服务端知识" class="mobile-dropdown-title"><span class="title">服务端知识</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/jerry.github.io/backend/nodejs/" class="nav-link">
  NodeJS
</a></li><li class="dropdown-item"><!----> <a href="/jerry.github.io/backend/koa/" class="nav-link">
  Koa
</a></li><li class="dropdown-item"><!----> <a href="/jerry.github.io/backend/mysql/" class="nav-link">
  Mysql
</a></li><li class="dropdown-item"><!----> <a href="/jerry.github.io/backend/mongodb/" class="nav-link">
  MongoDB
</a></li><li class="dropdown-item"><!----> <a href="/jerry.github.io/backend/nginx/" class="nav-link router-link-active">
  Nginx
</a></li><li class="dropdown-item"><!----> <a href="/jerry.github.io/backend/http/" class="nav-link">
  HTTP协议
</a></li><li class="dropdown-item"><!----> <a href="/jerry.github.io/backend/docker/" class="nav-link">
  官网知识推荐
</a></li></ul></div></div><div class="nav-item"><a href="/jerry.github.io/blog/" class="nav-link">
  其他杂谈
</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Nginx</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/jerry.github.io/backend/nginx/" aria-current="page" class="sidebar-link">首页</a></li><li><a href="/jerry.github.io/backend/nginx/nginx入门.html" class="active sidebar-link">Nginx入门</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/jerry.github.io/backend/nginx/nginx入门.html#nginx-好处" class="sidebar-link">nginx 好处</a></li><li class="sidebar-sub-header"><a href="/jerry.github.io/backend/nginx/nginx入门.html#初识-nginx-和环境准备" class="sidebar-link">初识 Nginx 和环境准备</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/jerry.github.io/backend/nginx/nginx入门.html#基于-yum-的方式安装-nginx" class="sidebar-link">基于 Yum 的方式安装 Nginx</a></li></ul></li><li class="sidebar-sub-header"><a href="/jerry.github.io/backend/nginx/nginx入门.html#nginx-配置文件详解" class="sidebar-link">Nginx 配置文件详解</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/jerry.github.io/backend/nginx/nginx入门.html#查看-nginx-的安装目录" class="sidebar-link">查看 Nginx 的安装目录</a></li><li class="sidebar-sub-header"><a href="/jerry.github.io/backend/nginx/nginx入门.html#nginx-conf" class="sidebar-link">nginx.conf</a></li><li class="sidebar-sub-header"><a href="/jerry.github.io/backend/nginx/nginx入门.html#default-conf" class="sidebar-link">default.conf</a></li></ul></li><li class="sidebar-sub-header"><a href="/jerry.github.io/backend/nginx/nginx入门.html#nginx-服务启动、停止、重启" class="sidebar-link">Nginx 服务启动、停止、重启</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/jerry.github.io/backend/nginx/nginx入门.html#启动-nginx-服务" class="sidebar-link">启动 Nginx 服务</a></li><li class="sidebar-sub-header"><a href="/jerry.github.io/backend/nginx/nginx入门.html#停止-nginx-服务的四种方法" class="sidebar-link">停止 Nginx 服务的四种方法</a></li><li class="sidebar-sub-header"><a href="/jerry.github.io/backend/nginx/nginx入门.html#重启-nginx-服务" class="sidebar-link">重启 Nginx 服务</a></li><li class="sidebar-sub-header"><a href="/jerry.github.io/backend/nginx/nginx入门.html#重新载入配置文件" class="sidebar-link">重新载入配置文件</a></li><li class="sidebar-sub-header"><a href="/jerry.github.io/backend/nginx/nginx入门.html#查看端口号" class="sidebar-link">查看端口号</a></li></ul></li><li class="sidebar-sub-header"><a href="/jerry.github.io/backend/nginx/nginx入门.html#自定义错误页和访问设置" class="sidebar-link">自定义错误页和访问设置</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/jerry.github.io/backend/nginx/nginx入门.html#简单实现访问控制" class="sidebar-link">简单实现访问控制</a></li></ul></li><li class="sidebar-sub-header"><a href="/jerry.github.io/backend/nginx/nginx入门.html#nginx-访问权限详解" class="sidebar-link">Nginx 访问权限详解</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/jerry.github.io/backend/nginx/nginx入门.html#指令优先级" class="sidebar-link">指令优先级</a></li><li class="sidebar-sub-header"><a href="/jerry.github.io/backend/nginx/nginx入门.html#复杂访问控制权限匹配" class="sidebar-link">复杂访问控制权限匹配</a></li><li class="sidebar-sub-header"><a href="/jerry.github.io/backend/nginx/nginx入门.html#使用正则表达式设置访问权限" class="sidebar-link">使用正则表达式设置访问权限</a></li></ul></li><li class="sidebar-sub-header"><a href="/jerry.github.io/backend/nginx/nginx入门.html#nginx-配置虚拟主机" class="sidebar-link">Nginx 配置虚拟主机</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/jerry.github.io/backend/nginx/nginx入门.html#基于端口号来设置虚拟主机" class="sidebar-link">基于端口号来设置虚拟主机</a></li><li class="sidebar-sub-header"><a href="/jerry.github.io/backend/nginx/nginx入门.html#基于-ip-的虚拟主机" class="sidebar-link">基于 IP 的虚拟主机</a></li><li class="sidebar-sub-header"><a href="/jerry.github.io/backend/nginx/nginx入门.html#配置以域名为划分的虚拟主机" class="sidebar-link">配置以域名为划分的虚拟主机</a></li></ul></li><li class="sidebar-sub-header"><a href="/jerry.github.io/backend/nginx/nginx入门.html#nginx-反向代理的设置" class="sidebar-link">Nginx 反向代理的设置</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/jerry.github.io/backend/nginx/nginx入门.html#正向代理-代理客户端" class="sidebar-link">正向代理(代理客户端)</a></li><li class="sidebar-sub-header"><a href="/jerry.github.io/backend/nginx/nginx入门.html#反向代理-代理服务器" class="sidebar-link">反向代理(代理服务器)</a></li><li class="sidebar-sub-header"><a href="/jerry.github.io/backend/nginx/nginx入门.html#反向代理的用途和好处" class="sidebar-link">反向代理的用途和好处</a></li></ul></li><li class="sidebar-sub-header"><a href="/jerry.github.io/backend/nginx/nginx入门.html#nginx-的-gzip-压缩配置" class="sidebar-link">Nginx 的 Gzip 压缩配置</a></li><li class="sidebar-sub-header"><a href="/jerry.github.io/backend/nginx/nginx入门.html#参考文档" class="sidebar-link">参考文档</a></li></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><p>[TOC]</p> <h2 id="nginx-好处"><a href="#nginx-好处" class="header-anchor">#</a> nginx 好处</h2> <ul><li>支持海量高并发</li> <li>内存消耗少</li> <li>免费使用可以商业化</li> <li>配置文件简单</li></ul> <h2 id="初识-nginx-和环境准备"><a href="#初识-nginx-和环境准备" class="header-anchor">#</a> 初识 Nginx 和环境准备</h2> <div class="language-js line-numbers-mode"><pre class="language-js"><code>yum <span class="token operator">-</span>y install gcc gcc<span class="token operator">-</span>c<span class="token operator">++</span> autoconf pcre<span class="token operator">-</span>devel make automake
yum <span class="token operator">-</span>y install wget httpd<span class="token operator">-</span>tools vim
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="基于-yum-的方式安装-nginx"><a href="#基于-yum-的方式安装-nginx" class="header-anchor">#</a> 基于 Yum 的方式安装 Nginx</h3> <p>我们可以先来查看一下 yum 是否已经存在，命令如下：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>yum list <span class="token operator">|</span> grep nginx
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>如果出现类似下面的内容，说明 yum 源是存在的。
<img src="evernotecid://25C71799-9F90-488F-8836-E5CA81A8E273/appyinxiangcom/10797539/ENResource/p1439" alt="b72907f6d5c8c860d21dddd6fca58fca.png">
如果不存在，或者不是你需要的版本，那我们可以自行配置 yum 源，下面是官网提供的源，我们可以放心大胆的使用。</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>nginx<span class="token punctuation">]</span>
<span class="token assign-left variable">name</span><span class="token operator">=</span>nginx repo
<span class="token assign-left variable">baseurl</span><span class="token operator">=</span>http://nginx.org/packages/OS/OSRELEASE/<span class="token variable">$basearch</span>/
<span class="token assign-left variable">gpgcheck</span><span class="token operator">=</span><span class="token number">0</span>
<span class="token assign-left variable">enabled</span><span class="token operator">=</span><span class="token number">1</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>复制上面的代码，然后在终端里输入：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">vim</span> /etc/yum.repos.d/nginx.repo
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>复制代码然后把代码复制进去，这里你可能需要一些 Vim 的操作知识，如果不熟悉，可以自行学习一下，当然我视频中也是有讲解的。
赋值完成后，你需要修改一下对应的操作系统和版本号，因为我的是 centos 和 7 的版本，所以改为这样。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>baseurl<span class="token operator">=</span>http<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>nginx<span class="token punctuation">.</span>org<span class="token operator">/</span>packages<span class="token operator">/</span>centos<span class="token operator">/</span><span class="token number">7</span><span class="token operator">/</span>$basearch<span class="token operator">/</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>你可以根据你的系统或需要的版本进行修改。</p> <p>如果都已经准备好了，那就可以开始安装了，安装的命令非常简单：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>yum <span class="token function">install</span> nginx
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>复制代码
安装完成后可以使用命令，来检测 Nginx 的版本。</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>nginx -v
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><img src="evernotecid://25C71799-9F90-488F-8836-E5CA81A8E273/appyinxiangcom/10797539/ENResource/p1441" alt="ea9393b321e9cf44b41266cb5acfba98.png">
出现上述内容说明安装成功。
<img src="evernotecid://25C71799-9F90-488F-8836-E5CA81A8E273/appyinxiangcom/10797539/ENResource/p1440" alt="e0fd309936d0d08e75ba95782a7e8bf3.png"></p> <h2 id="nginx-配置文件详解"><a href="#nginx-配置文件详解" class="header-anchor">#</a> Nginx 配置文件详解</h2> <h3 id="查看-nginx-的安装目录"><a href="#查看-nginx-的安装目录" class="header-anchor">#</a> 查看 Nginx 的安装目录</h3> <p>在使用 yum 安装完 Nginx 后，需要知道系统中多了那些文件，它们都安装到了那里。可以使用下面的命令进行查看：</p> <div class="language-bsah line-numbers-mode"><pre class="language-text"><code>rpm -ql nginx
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>rpm 是 linux 的 rpm 包管理工具，-q 代表询问模式，-l 代表返回列表，这样我们就可以找到 nginx 的所有安装位置了。
列表列出的内容还是比较多的，我们尽量给大家进行讲解，我们这节先来看看重要的文件。</p> <h3 id="nginx-conf"><a href="#nginx-conf" class="header-anchor">#</a> nginx.conf</h3> <p>nginx.conf 文件是 Nginx 总配置文件，在我们搭建服务器时经常调整的文件。
进入 etc/nginx 目录下，然后用 vim 进行打开</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token builtin class-name">cd</span> /etc/nginx
<span class="token function">vim</span> nginx.conf
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>下面是文件的详细注释，我几乎把每一句都进行了注释，你可以根据你的需要来进行配置。</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token comment">#运行用户，默认即是nginx，可以不进行设置</span>
user  nginx<span class="token punctuation">;</span>
<span class="token comment">#Nginx进程，一般设置为和CPU核数一样</span>
worker_processes  <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token comment">#错误日志存放目录</span>
error_log  /var/log/nginx/error.log warn<span class="token punctuation">;</span>
<span class="token comment">#进程pid存放位置</span>
pid        /var/run/nginx.pid<span class="token punctuation">;</span>


events <span class="token punctuation">{</span>
    worker_connections  <span class="token number">1024</span><span class="token punctuation">;</span> <span class="token comment"># 单个后台进程的最大并发数</span>
<span class="token punctuation">}</span>


http <span class="token punctuation">{</span>
    include       /etc/nginx/mime.types<span class="token punctuation">;</span>   <span class="token comment">#文件扩展名与类型映射表</span>
    default_type  application/octet-stream<span class="token punctuation">;</span>  <span class="token comment">#默认文件类型</span>
    <span class="token comment">#设置日志模式</span>
    log_format  main  <span class="token string">'$remote_addr - $remote_user [$time_local] &quot;$request&quot; '</span>
                      <span class="token string">'$status $body_bytes_sent &quot;$http_referer&quot; '</span>
                      <span class="token string">'&quot;$http_user_agent&quot; &quot;$http_x_forwarded_for&quot;'</span><span class="token punctuation">;</span>

    access_log  /var/log/nginx/access.log  main<span class="token punctuation">;</span>   <span class="token comment">#nginx访问日志存放位置</span>

    sendfile        on<span class="token punctuation">;</span>   <span class="token comment">#开启高效传输模式</span>
    <span class="token comment">#tcp_nopush     on;    #减少网络报文段的数量</span>

    keepalive_timeout  <span class="token number">65</span><span class="token punctuation">;</span>  <span class="token comment">#保持连接的时间，也叫超时时间</span>

    <span class="token comment">#gzip  on;  #开启gzip压缩</span>

    include /etc/nginx/conf.d/*.conf<span class="token punctuation">;</span> <span class="token comment">#包含的子配置项位置和文件</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br></div></div><h3 id="default-conf"><a href="#default-conf" class="header-anchor">#</a> default.conf</h3> <p>我们看到最后有一个子文件的配置项，那我们打开这个 include 子文件配置项看一下里边都有些什么内容。</p> <p>进入 conf.d 目录，然后使用 vim default.conf 进行查看。</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>server <span class="token punctuation">{</span>
    listen       <span class="token number">80</span><span class="token punctuation">;</span>   <span class="token comment">#配置监听端口</span>
    server_name  localhost<span class="token punctuation">;</span>  //配置域名

    <span class="token comment">#charset koi8-r;</span>
    <span class="token comment">#access_log  /var/log/nginx/host.access.log  main;</span>

    location / <span class="token punctuation">{</span>
        root   /usr/share/nginx/html<span class="token punctuation">;</span>     <span class="token comment">#服务默认启动目录</span>
        index  index.html index.htm<span class="token punctuation">;</span>    <span class="token comment">#默认访问文件</span>
    <span class="token punctuation">}</span>

    <span class="token comment">#error_page  404              /404.html;   # 配置404页面</span>

    <span class="token comment"># redirect server error pages to the static page /50x.html</span>
    <span class="token comment">#</span>
    error_page   <span class="token number">500</span> <span class="token number">502</span> <span class="token number">503</span> <span class="token number">504</span>  /50x.html<span class="token punctuation">;</span>   <span class="token comment">#错误状态码的显示页面，配置后需要重启</span>
    location <span class="token operator">=</span> /50x.html <span class="token punctuation">{</span>
        root   /usr/share/nginx/html<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment"># proxy the PHP scripts to Apache listening on 127.0.0.1:80</span>
    <span class="token comment">#</span>
    <span class="token comment">#location ~ \.php$ {</span>
    <span class="token comment">#    proxy_pass   http://127.0.0.1;</span>
    <span class="token comment">#}</span>

    <span class="token comment"># pass the PHP scripts to FastCGI server listening on 127.0.0.1:9000</span>
    <span class="token comment">#</span>
    <span class="token comment">#location ~ \.php$ {</span>
    <span class="token comment">#    root           html;</span>
    <span class="token comment">#    fastcgi_pass   127.0.0.1:9000;</span>
    <span class="token comment">#    fastcgi_index  index.php;</span>
    <span class="token comment">#    fastcgi_param  SCRIPT_FILENAME  /scripts$fastcgi_script_name;</span>
    <span class="token comment">#    include        fastcgi_params;</span>
    <span class="token comment">#}</span>

    <span class="token comment"># deny access to .htaccess files, if Apache's document root</span>
    <span class="token comment"># concurs with nginx's one</span>
    <span class="token comment">#</span>
    <span class="token comment">#location ~ /\.ht {</span>
    <span class="token comment">#    deny  all;</span>
    <span class="token comment">#}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br></div></div><p>明白了这些配置项，我们知道我们的服务目录放在了
<strong>/usr/share/nginx/html</strong>下，可以使用命令进入看一下目录下的文件。</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token builtin class-name">cd</span> /usr/share/nginx/html
<span class="token function">ls</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>可以看到目录下面有两个文件，50x.html 和 index.html。我们可以使用 vim 进行编辑。
学到这里，其实可以预想到，我们的 nginx 服务器已经可以为 html 提供服务器了。我们可以打开浏览器，访问 ip 地址试一试。</p> <h2 id="nginx-服务启动、停止、重启"><a href="#nginx-服务启动、停止、重启" class="header-anchor">#</a> Nginx 服务启动、停止、重启</h2> <h3 id="启动-nginx-服务"><a href="#启动-nginx-服务" class="header-anchor">#</a> 启动 Nginx 服务</h3> <p>默认的情况下，Nginx 是不会自动启动的，需要我们手动进行启动，当然启动 Nginx 的方法也不是单一的。</p> <h4 id="nginx-直接启动"><a href="#nginx-直接启动" class="header-anchor">#</a> nginx 直接启动</h4> <p>在 CentOS7.4 版本里（低版本是不行的），是可以直接直接使用 nginx 启动服务的。</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>nginx
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h4 id="使用-systemctl-命令启动"><a href="#使用-systemctl-命令启动" class="header-anchor">#</a> 使用 systemctl 命令启动</h4> <p>还可以使用个 Linux 的命令进行启动，我一般都是采用这种方法进行使用。因为这种方法无论启动什么服务，都是一样的，只是换一下服务的名字（不用增加额外的记忆点）。</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>systemctl start nginx.service
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>输入命令后，没有任何提示，那我们如何知道 Nginx 服务已经启动了哪？可以使用 Linux 的组合命令，进行查询服务的运行状况。</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">ps</span> aux <span class="token operator">|</span> <span class="token function">grep</span> nginx
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>如果启动成功会出现如下图片中类似的结果。
<img src="evernotecid://25C71799-9F90-488F-8836-E5CA81A8E273/appyinxiangcom/10797539/ENResource/p1438" alt="7f58f96302e5274aea53b0c67b8849ff.png"></p> <h3 id="停止-nginx-服务的四种方法"><a href="#停止-nginx-服务的四种方法" class="header-anchor">#</a> 停止 Nginx 服务的四种方法</h3> <p>停止 Nginx 方法有很多种，可以根据需求采用不一样的方法，我们一个一个说明。</p> <h4 id="立即停止服务"><a href="#立即停止服务" class="header-anchor">#</a> 立即停止服务</h4> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>nginx  -s stop
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>这种方法比较强硬，无论进程是否在工作，都直接停止进程。</p> <h4 id="从容停止服务"><a href="#从容停止服务" class="header-anchor">#</a> 从容停止服务</h4> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>nginx -s quit
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>这种方法较 stop 相比就比较温和一些了，需要进程完成当前工作后再停止。</p> <h4 id="killall-方法杀死进程"><a href="#killall-方法杀死进程" class="header-anchor">#</a> killall 方法杀死进程</h4> <p>这种方法也是比较野蛮的，我们直接杀死进程，但是在上面使用没有效果时，我们用这种方法还是比较好的。</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">killall</span> nginx
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h4 id="systemctl-停止"><a href="#systemctl-停止" class="header-anchor">#</a> systemctl 停止</h4> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>systemctl stop nginx.service
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="重启-nginx-服务"><a href="#重启-nginx-服务" class="header-anchor">#</a> 重启 Nginx 服务</h3> <p>有时候我们需要重启 Nginx 服务，这时候可以使用下面的命令。</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>systemctl restart nginx.service
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="重新载入配置文件"><a href="#重新载入配置文件" class="header-anchor">#</a> 重新载入配置文件</h3> <p>在重新编写或者修改 Nginx 的配置文件后，都需要作一下重新载入，这时候可以用 Nginx 给的命令。</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>nginx -s reload
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="查看端口号"><a href="#查看端口号" class="header-anchor">#</a> 查看端口号</h3> <p>在默认情况下，Nginx 启动后会监听 80 端口，从而提供 HTTP 访问，如果 80 端口已经被占用则会启动失败。我么可以使用<code>netstat -tlnp</code>命令查看端口号的占用情况。</p> <h2 id="自定义错误页和访问设置"><a href="#自定义错误页和访问设置" class="header-anchor">#</a> 自定义错误页和访问设置</h2> <h3 id="简单实现访问控制"><a href="#简单实现访问控制" class="header-anchor">#</a> 简单实现访问控制</h3> <p>有时候我们的服务器只允许特定主机访问，比如内部 OA 系统，或者应用的管理后台系统，更或者是某些应用接口，这时候我们就需要控制一些 IP 访问，我们可以直接在 location 里进行配置。
可以直接在 default.conf 里进行配置。</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>location / <span class="token punctuation">{</span>
    deny   <span class="token number">123.9</span>.51.42<span class="token punctuation">;</span>
    allow  <span class="token number">45.76</span>.202.231<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>配置完成后，重启一下服务器就可以实现限制和允许访问了。这在工作中非常常用，一定要好好记得。</p> <h2 id="nginx-访问权限详解"><a href="#nginx-访问权限详解" class="header-anchor">#</a> Nginx 访问权限详解</h2> <h3 id="指令优先级"><a href="#指令优先级" class="header-anchor">#</a> 指令优先级</h3> <p>我们先来看一下代码：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>location / <span class="token punctuation">{</span>
    allow  <span class="token number">45.76</span>.202.231<span class="token punctuation">;</span>
    deny   all<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>上面的配置表示只允许 45.76.202.231 进行访问，其他的 IP 是禁止访问的。但是如果我们把 deny all 指令，移动到 allow 45.76.202.231 之前，会发生什么那？会发现所有的 IP 都不允许访问了。这说明了一个问题：就是在同一个块下的两个权限指令，先出现的设置会覆盖后出现的设置（也就是谁先触发，谁起作用）。</p> <h3 id="复杂访问控制权限匹配"><a href="#复杂访问控制权限匹配" class="header-anchor">#</a> 复杂访问控制权限匹配</h3> <p>在工作中，访问权限的控制需求更加复杂，例如，对于网站下的 img（图片目录）是运行所有用户访问，但对于网站下的 admin 目录则只允许公司内部固定 IP 访问。这时候仅靠 deny 和 allow 这两个指令，是无法实现的。我们需要 location 块来完成相关的需求匹配。
上面的需求，配置代码如下：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>    location <span class="token operator">=</span>/img<span class="token punctuation">{</span>
        allow all<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    location <span class="token operator">=</span>/admin<span class="token punctuation">{</span>
        deny all<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>=号代表精确匹配，使用了=后是根据其后的模式进行精确匹配。这个直接关系到我们网站的安全，一定要学会。</p> <h3 id="使用正则表达式设置访问权限"><a href="#使用正则表达式设置访问权限" class="header-anchor">#</a> 使用正则表达式设置访问权限</h3> <p>只有精确匹配有时是完不成我们的工作任务的，比如现在我们要禁止访问所有 php 的页面，php 的页面大多是后台的管理或者接口代码，所以为了安全我们经常要禁止所有用户访问，而只开放公司内部访问的。
代码如下：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code> location ~<span class="token punctuation">\</span>.php$ <span class="token punctuation">{</span>
        deny all<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>这样我们再访问的时候就不能访问以 php 结尾的文件了</p> <h2 id="nginx-配置虚拟主机"><a href="#nginx-配置虚拟主机" class="header-anchor">#</a> Nginx 配置虚拟主机</h2> <p>虚拟主机是指在一台物理主机服务器上划分出多个磁盘空间，每个磁盘空间都是一个虚拟主机，每台虚拟主机都可以对外提供 Web 服务，并且互不干扰。在外界看来，虚拟主机就是一台独立的服务器主机，这意味着用户能够利用虚拟主机把多个不同域名的网站部署在同一台服务器上，而不必再为简历一个网站单独购买一台服务器，既解决了维护服务器技术的难题，同时又极大地节省了服务器硬件成本和相关的维护费用。</p> <p>配置虚拟主机可以基于端口号、基于 IP 和基于域名，这节课我们先学习基于端口号来设置虚拟主机。</p> <h3 id="基于端口号来设置虚拟主机"><a href="#基于端口号来设置虚拟主机" class="header-anchor">#</a> 基于端口号来设置虚拟主机</h3> <p>基于端口号来配置虚拟主机，算是 Nginx 中最简单的一种方式了。</p> <blockquote><p>原理就是：Nginx 监听多个端口，根据不同的端口号，来区分不同的网站。</p></blockquote> <p>我们可以直接配置在主文件里<code>etc/nginx/nginx.conf</code>文件里，也可以配置在子配置文件里<code>etc/nginx/conf.d/default.conf</code>。我这里为了配置方便，就配置在子文件里了。当然你也可以再新建一个文件，只要在<code>conf.d</code>文件夹下就可以了。
修改配置文件中的 server 选项，这时候就会有两个 server。</p> <h3 id="基于-ip-的虚拟主机"><a href="#基于-ip-的虚拟主机" class="header-anchor">#</a> 基于 IP 的虚拟主机</h3> <p>基于 IP 和基于端口的配置几乎一样，只是把 server_name 选项，配置成 IP 就可以了。
比如上面的配置，我们可以修改为：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>server<span class="token punctuation">{</span>
        listen <span class="token number">80</span><span class="token punctuation">;</span>
        server_name <span class="token number">112.74</span><span class="token number">.164</span><span class="token number">.244</span><span class="token punctuation">;</span>
        root <span class="token operator">/</span>usr<span class="token operator">/</span>share<span class="token operator">/</span>nginx<span class="token operator">/</span>html<span class="token operator">/</span>html8001<span class="token punctuation">;</span>
        index index<span class="token punctuation">.</span>html<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>这种演示需要多个 IP 的支持，由于我们的阿里 ECS 只提供了一个 IP，所以这里就不给大家演示了，如果工作中用到，只要安装这种方法配置就可以了。</p> <h3 id="配置以域名为划分的虚拟主机"><a href="#配置以域名为划分的虚拟主机" class="header-anchor">#</a> 配置以域名为划分的虚拟主机</h3> <p>在真实的上线环境中，一个网站是需要域名和公网 IP 才可以访问的。</p> <ul><li>nginx.jspang.com: 这个域名映射到默认的 Nginx 首页位置。</li> <li>nginx2.jspang.com: 这个域名映射到原来的 8001 端口的位置。</li></ul> <p>我们修改 etc/nginx/conf.d 目录下的 default.conf 文件，把原来的 80 端口虚拟主机改为以域名划分的虚拟主机。代码如下：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>server <span class="token punctuation">{</span>
    listen       <span class="token number">80</span><span class="token punctuation">;</span>
    server_name  nginx.jspang.com<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>我们再把同目录下的 8001.conf 文件进行修改，改成如下：</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>server<span class="token punctuation">{</span>
        listen <span class="token number">80</span><span class="token punctuation">;</span>
        server_name nginx2.jspang.com<span class="token punctuation">;</span>
        location / <span class="token punctuation">{</span>
                root /usr/share/nginx/html/html8001<span class="token punctuation">;</span>
                index index.html index.htm<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>然后我们用平滑重启的方式，进行重启，这时候我们在浏览器中访问这两个网页。
其实域名设置虚拟主机也非常简单，主要操作的是配置文件的 server_name 项，还需要域名解析的配合。小伙伴们一定要进行练习一下。后面的课程可能就没有这么简单了。</p> <h2 id="nginx-反向代理的设置"><a href="#nginx-反向代理的设置" class="header-anchor">#</a> Nginx 反向代理的设置</h2> <p>作为一个前端必会的一个技能就是反向代理。大家都知道，我们现在的 web 模式基本上都是标准的 CS 结构，即 Client 端到 Server 端。那代理就是在 Client 端和 Server 端之间增加一个提供特定功能的服务器，这个服务器就是我们说的代理服务器。</p> <h3 id="正向代理-代理客户端"><a href="#正向代理-代理客户端" class="header-anchor">#</a> 正向代理(代理客户端)</h3> <p>在理解反向代理之前，我们先来了解一下正向代理。我们常用的翻墙工具就是一个典型的正向代理工具。它会把不让我们访问的服务器的网页请求，代理到一个可以访问该网站的代理服务器上来，一般叫做 proxy 服务器，再转发给客户。</p> <p><img src="evernotecid://25C71799-9F90-488F-8836-E5CA81A8E273/appyinxiangcom/10797539/ENResource/p1443" alt="aecdae2623bb86788d6c22b2219b1421.png">
简单来说就是：你想访问目标服务器的权限，但是没有权限。这时候代理服务器有权限访问服务器，并且你有访问代理服务器的权限，这时候你就可以通过访问代理服务器，代理服务器访问真实服务器，把内容给你呈现出来。</p> <h3 id="反向代理-代理服务器"><a href="#反向代理-代理服务器" class="header-anchor">#</a> 反向代理(代理服务器)</h3> <p>反向代理跟代理正好相反（需要说明的是，现在基本所有的大型网站的页面都是用了反向代理），客户端发送的请求，想要访问 server 服务器上的内容。发送的内容被发送到代理服务器上，这个代理服务器再把请求发送到自己设置好的内部服务器上，而用户真实想获得的内容就在这些设置好的服务器上。
<img src="evernotecid://25C71799-9F90-488F-8836-E5CA81A8E273/appyinxiangcom/10797539/ENResource/p1444" alt="63fd48834262bfc2c8ef59c903901f72.png"></p> <p>通过图片的对比，应该看出一些区别，这里 proxy 服务器代理的并不是客户端，而是服务器。即向外部客户端提供了一个统一的代理入口，客户端的请求都要先经过这个 proxy 服务器。具体访问哪个服务器 server 是由 Nginx 来控制的。再简单点来讲，<strong>一般代理指代理的客户端，反向代理是代理的服务器</strong>。</p> <h3 id="反向代理的用途和好处"><a href="#反向代理的用途和好处" class="header-anchor">#</a> 反向代理的用途和好处</h3> <ul><li><p>安全性：正向代理的客户端能够在隐藏自身信息的同时访问任意网站，这个给网络安全代理了极大的威胁。因此，我们必须把服务器保护起来，使用反向代理客户端用户只能通过外来网来访问代理服务器，并且用户并不知道自己访问的真实服务器是那一台，可以很好的提供安全保护。</p></li> <li><p>功能性：反向代理的主要用途是为多个服务器提供负载均衡、缓存等功能。负载均衡就是一个网站的内容被部署在若干服务器上，可以把这些机子看成一个集群，那 Nginx 可以将接收到的客户端请求“均匀地”分配到这个集群中所有的服务器上，从而实现服务器压力的平均分配，也叫负载均衡。</p> <blockquote><p>修改后的配置文件：</p></blockquote></li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code>server<span class="token punctuation">{</span>
        listen <span class="token number">8093</span><span class="token punctuation">;</span>
        server_name localhost<span class="token punctuation">;</span>
        location <span class="token operator">/</span> <span class="token punctuation">{</span>
            proxy_pass http<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span><span class="token number">39.107</span><span class="token number">.236</span><span class="token number">.234</span><span class="token punctuation">;</span>
            #root <span class="token operator">/</span>usr<span class="token operator">/</span>share<span class="token operator">/</span>nginx<span class="token operator">/</span>html<span class="token operator">/</span>html8093<span class="token punctuation">;</span>
            #index index<span class="token punctuation">.</span>html<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>这样一来，所有http://39.107.236.234:8093的请求，都会被代理到http://39.107.236.234。</p> <h2 id="nginx-的-gzip-压缩配置"><a href="#nginx-的-gzip-压缩配置" class="header-anchor">#</a> Nginx 的 Gzip 压缩配置</h2> <p>Gzip 是网页的一种网页压缩技术，经过 gzip 压缩后，页面大小可以变为原来的 30%甚至更小。更小的网页会让用户浏览的体验更好，速度更快。gzip 网页压缩的实现需要浏览器和服务器的支持。
<img src="evernotecid://25C71799-9F90-488F-8836-E5CA81A8E273/appyinxiangcom/10797539/ENResource/p1442" alt="ba601157791305bdf04d20a62ba13db0.png"></p> <p>从上图可以清楚的看出，gzip 是需要服务器和浏览器同时支持的。当浏览器支持 gzip 压缩时，会在请求消息中包含<code>Accept-Encoding: gzip</code>，这样 Nginx 就会向浏览器发送经过 gzip 后的内容，同时在相应信息头中加入<code>Content-Encoding: gzip</code>，声明这是 gzip 后的内容，告知浏览器要先解压后才能解析输出。</p> <h2 id="参考文档"><a href="#参考文档" class="header-anchor">#</a> 参考文档</h2> <ol><li><a href="https://juejin.im/post/5bd7a6046fb9a05d2c43f8c7" target="_blank" rel="noopener noreferrer">前端必会的 Nginx 入门视频教程(共 11 集)<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://jspang.com/detailed?id=39" target="_blank" rel="noopener noreferrer">一个前端必会的 Nginx 免费教程 (共 11 集)<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://www.bilibili.com/video/av35986548?from=search&amp;seid=16777063348958326206" target="_blank" rel="noopener noreferrer">Nginx 免费视频教程<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ol></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">2022-02-28 16:06:13</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/jerry.github.io/backend/nginx/" class="prev router-link-active">
        首页
      </a></span> <!----></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/jerry.github.io/assets/js/app.8cb867ca.js" defer></script><script src="/jerry.github.io/assets/js/2.7d547363.js" defer></script><script src="/jerry.github.io/assets/js/51.f8825ce8.js" defer></script><script src="/jerry.github.io/assets/js/20.cf42ebc2.js" defer></script>
  </body>
</html>
