<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>3. mongoose学习总结 | 雪山之巅</title>
    <meta name="generator" content="VuePress 1.9.7">
    <link rel="apple-touch-icon" href="/jerry.github.io/apple-touch-icon.png">
    <link rel="icon" href="/jerry.github.io/favicon.ico">
    <link rel="manifest" href="/jerry.github.io/manifest.json">
    <meta name="description" content="我与夏风皆过客1">
    <meta name="theme-color" content="#ffffff">
    
    <link rel="preload" href="/jerry.github.io/assets/css/0.styles.ba9d0c50.css" as="style"><link rel="preload" href="/jerry.github.io/assets/js/app.8cb867ca.js" as="script"><link rel="preload" href="/jerry.github.io/assets/js/2.7d547363.js" as="script"><link rel="preload" href="/jerry.github.io/assets/js/47.8f4693a3.js" as="script"><link rel="preload" href="/jerry.github.io/assets/js/20.cf42ebc2.js" as="script"><link rel="prefetch" href="/jerry.github.io/assets/js/10.a1c8416b.js"><link rel="prefetch" href="/jerry.github.io/assets/js/100.504935d6.js"><link rel="prefetch" href="/jerry.github.io/assets/js/101.21e817bf.js"><link rel="prefetch" href="/jerry.github.io/assets/js/102.65169271.js"><link rel="prefetch" href="/jerry.github.io/assets/js/103.6fcbe2c9.js"><link rel="prefetch" href="/jerry.github.io/assets/js/104.11583416.js"><link rel="prefetch" href="/jerry.github.io/assets/js/105.151c8c59.js"><link rel="prefetch" href="/jerry.github.io/assets/js/106.5363313f.js"><link rel="prefetch" href="/jerry.github.io/assets/js/107.b871dbb1.js"><link rel="prefetch" href="/jerry.github.io/assets/js/108.3c9edfb6.js"><link rel="prefetch" href="/jerry.github.io/assets/js/109.a2864e45.js"><link rel="prefetch" href="/jerry.github.io/assets/js/11.230bdafc.js"><link rel="prefetch" href="/jerry.github.io/assets/js/110.a19fcc30.js"><link rel="prefetch" href="/jerry.github.io/assets/js/111.093fdfd1.js"><link rel="prefetch" href="/jerry.github.io/assets/js/112.10ea3de4.js"><link rel="prefetch" href="/jerry.github.io/assets/js/113.95e556d2.js"><link rel="prefetch" href="/jerry.github.io/assets/js/114.bab0361c.js"><link rel="prefetch" href="/jerry.github.io/assets/js/115.a9cf132f.js"><link rel="prefetch" href="/jerry.github.io/assets/js/116.da97d300.js"><link rel="prefetch" href="/jerry.github.io/assets/js/117.36250871.js"><link rel="prefetch" href="/jerry.github.io/assets/js/118.e52f5780.js"><link rel="prefetch" href="/jerry.github.io/assets/js/119.7758e874.js"><link rel="prefetch" href="/jerry.github.io/assets/js/12.8cade74a.js"><link rel="prefetch" href="/jerry.github.io/assets/js/120.8f88acbb.js"><link rel="prefetch" href="/jerry.github.io/assets/js/121.6dcee880.js"><link rel="prefetch" href="/jerry.github.io/assets/js/122.8777c1e2.js"><link rel="prefetch" href="/jerry.github.io/assets/js/123.16bc758e.js"><link rel="prefetch" href="/jerry.github.io/assets/js/124.f8f1ed86.js"><link rel="prefetch" href="/jerry.github.io/assets/js/125.b4d23aeb.js"><link rel="prefetch" href="/jerry.github.io/assets/js/126.29d9ca54.js"><link rel="prefetch" href="/jerry.github.io/assets/js/127.cfe3a252.js"><link rel="prefetch" href="/jerry.github.io/assets/js/128.e7ab0c95.js"><link rel="prefetch" href="/jerry.github.io/assets/js/129.d0cac2ec.js"><link rel="prefetch" href="/jerry.github.io/assets/js/13.f32bffef.js"><link rel="prefetch" href="/jerry.github.io/assets/js/130.53ae1e24.js"><link rel="prefetch" href="/jerry.github.io/assets/js/131.b382f1b0.js"><link rel="prefetch" href="/jerry.github.io/assets/js/132.9f7a7079.js"><link rel="prefetch" href="/jerry.github.io/assets/js/133.9bedf5c8.js"><link rel="prefetch" href="/jerry.github.io/assets/js/134.0fde1402.js"><link rel="prefetch" href="/jerry.github.io/assets/js/135.8ce45018.js"><link rel="prefetch" href="/jerry.github.io/assets/js/136.165553e5.js"><link rel="prefetch" href="/jerry.github.io/assets/js/137.6e606b3c.js"><link rel="prefetch" href="/jerry.github.io/assets/js/138.21058c26.js"><link rel="prefetch" href="/jerry.github.io/assets/js/139.695a93ac.js"><link rel="prefetch" href="/jerry.github.io/assets/js/14.3eb5eb18.js"><link rel="prefetch" href="/jerry.github.io/assets/js/140.a9f8a3df.js"><link rel="prefetch" href="/jerry.github.io/assets/js/141.c7f4ec43.js"><link rel="prefetch" href="/jerry.github.io/assets/js/142.e5649d1a.js"><link rel="prefetch" href="/jerry.github.io/assets/js/143.1ee6e8a2.js"><link rel="prefetch" href="/jerry.github.io/assets/js/144.94acf2f4.js"><link rel="prefetch" href="/jerry.github.io/assets/js/145.eb5135d7.js"><link rel="prefetch" href="/jerry.github.io/assets/js/146.18f8a40e.js"><link rel="prefetch" href="/jerry.github.io/assets/js/147.b21fb0df.js"><link rel="prefetch" href="/jerry.github.io/assets/js/148.adfd1662.js"><link rel="prefetch" href="/jerry.github.io/assets/js/149.dc7e9bb0.js"><link rel="prefetch" href="/jerry.github.io/assets/js/15.5fbe3ada.js"><link rel="prefetch" href="/jerry.github.io/assets/js/150.f8fa379b.js"><link rel="prefetch" href="/jerry.github.io/assets/js/151.6f065a1f.js"><link rel="prefetch" href="/jerry.github.io/assets/js/152.1475f8d1.js"><link rel="prefetch" href="/jerry.github.io/assets/js/153.78885179.js"><link rel="prefetch" href="/jerry.github.io/assets/js/154.4047c70a.js"><link rel="prefetch" href="/jerry.github.io/assets/js/155.406967ab.js"><link rel="prefetch" href="/jerry.github.io/assets/js/156.751598e1.js"><link rel="prefetch" href="/jerry.github.io/assets/js/157.e7a7a219.js"><link rel="prefetch" href="/jerry.github.io/assets/js/158.d1ca1de8.js"><link rel="prefetch" href="/jerry.github.io/assets/js/159.93693f00.js"><link rel="prefetch" href="/jerry.github.io/assets/js/16.13e04a1e.js"><link rel="prefetch" href="/jerry.github.io/assets/js/160.4657154d.js"><link rel="prefetch" href="/jerry.github.io/assets/js/161.27b64c01.js"><link rel="prefetch" href="/jerry.github.io/assets/js/162.d58c457f.js"><link rel="prefetch" href="/jerry.github.io/assets/js/163.79343a4c.js"><link rel="prefetch" href="/jerry.github.io/assets/js/164.5a25522e.js"><link rel="prefetch" href="/jerry.github.io/assets/js/165.c52e5816.js"><link rel="prefetch" href="/jerry.github.io/assets/js/166.d5d598c8.js"><link rel="prefetch" href="/jerry.github.io/assets/js/167.82b2360f.js"><link rel="prefetch" href="/jerry.github.io/assets/js/168.88cc8b96.js"><link rel="prefetch" href="/jerry.github.io/assets/js/169.1cb9b389.js"><link rel="prefetch" href="/jerry.github.io/assets/js/17.283191f2.js"><link rel="prefetch" href="/jerry.github.io/assets/js/170.e3dcbc16.js"><link rel="prefetch" href="/jerry.github.io/assets/js/171.07ef11f3.js"><link rel="prefetch" href="/jerry.github.io/assets/js/172.c183eb41.js"><link rel="prefetch" href="/jerry.github.io/assets/js/173.59fc33e7.js"><link rel="prefetch" href="/jerry.github.io/assets/js/174.d37ec705.js"><link rel="prefetch" href="/jerry.github.io/assets/js/175.ab467af4.js"><link rel="prefetch" href="/jerry.github.io/assets/js/176.6d5f2e13.js"><link rel="prefetch" href="/jerry.github.io/assets/js/177.fd722926.js"><link rel="prefetch" href="/jerry.github.io/assets/js/178.901e44b1.js"><link rel="prefetch" href="/jerry.github.io/assets/js/179.95aecdf1.js"><link rel="prefetch" href="/jerry.github.io/assets/js/18.f812f6af.js"><link rel="prefetch" href="/jerry.github.io/assets/js/180.6f7205ee.js"><link rel="prefetch" href="/jerry.github.io/assets/js/181.7e1e1402.js"><link rel="prefetch" href="/jerry.github.io/assets/js/182.eb3c32f9.js"><link rel="prefetch" href="/jerry.github.io/assets/js/183.794272e9.js"><link rel="prefetch" href="/jerry.github.io/assets/js/184.3ed1d5af.js"><link rel="prefetch" href="/jerry.github.io/assets/js/185.2430ff76.js"><link rel="prefetch" href="/jerry.github.io/assets/js/186.46272a01.js"><link rel="prefetch" href="/jerry.github.io/assets/js/187.c617b164.js"><link rel="prefetch" href="/jerry.github.io/assets/js/19.f9e85296.js"><link rel="prefetch" href="/jerry.github.io/assets/js/21.724fc087.js"><link rel="prefetch" href="/jerry.github.io/assets/js/22.c6929093.js"><link rel="prefetch" href="/jerry.github.io/assets/js/23.f56ff06f.js"><link rel="prefetch" href="/jerry.github.io/assets/js/24.44ba2312.js"><link rel="prefetch" href="/jerry.github.io/assets/js/25.f35c5403.js"><link rel="prefetch" href="/jerry.github.io/assets/js/26.b731cd9b.js"><link rel="prefetch" href="/jerry.github.io/assets/js/27.3d5daa0a.js"><link rel="prefetch" href="/jerry.github.io/assets/js/28.8cc8bab9.js"><link rel="prefetch" href="/jerry.github.io/assets/js/29.7730d077.js"><link rel="prefetch" href="/jerry.github.io/assets/js/3.5ab0026b.js"><link rel="prefetch" href="/jerry.github.io/assets/js/30.6d37c03b.js"><link rel="prefetch" href="/jerry.github.io/assets/js/31.e8f4a77a.js"><link rel="prefetch" href="/jerry.github.io/assets/js/32.549d6f8e.js"><link rel="prefetch" href="/jerry.github.io/assets/js/33.95792b9f.js"><link rel="prefetch" href="/jerry.github.io/assets/js/34.b7e709b1.js"><link rel="prefetch" href="/jerry.github.io/assets/js/35.daed2e5c.js"><link rel="prefetch" href="/jerry.github.io/assets/js/36.90c3c71a.js"><link rel="prefetch" href="/jerry.github.io/assets/js/37.dfa11bd8.js"><link rel="prefetch" href="/jerry.github.io/assets/js/38.e36c7a27.js"><link rel="prefetch" href="/jerry.github.io/assets/js/39.017d9b19.js"><link rel="prefetch" href="/jerry.github.io/assets/js/4.7259a42f.js"><link rel="prefetch" href="/jerry.github.io/assets/js/40.e43eaee9.js"><link rel="prefetch" href="/jerry.github.io/assets/js/41.697e21b6.js"><link rel="prefetch" href="/jerry.github.io/assets/js/42.f01531a7.js"><link rel="prefetch" href="/jerry.github.io/assets/js/43.84df7d63.js"><link rel="prefetch" href="/jerry.github.io/assets/js/44.891e9a3f.js"><link rel="prefetch" href="/jerry.github.io/assets/js/45.f19e5ca4.js"><link rel="prefetch" href="/jerry.github.io/assets/js/46.f81f1bfa.js"><link rel="prefetch" href="/jerry.github.io/assets/js/48.b0c93d91.js"><link rel="prefetch" href="/jerry.github.io/assets/js/49.f9f0f3f8.js"><link rel="prefetch" href="/jerry.github.io/assets/js/5.e04d3d1e.js"><link rel="prefetch" href="/jerry.github.io/assets/js/50.e03d13cd.js"><link rel="prefetch" href="/jerry.github.io/assets/js/51.f8825ce8.js"><link rel="prefetch" href="/jerry.github.io/assets/js/52.ec76efc3.js"><link rel="prefetch" href="/jerry.github.io/assets/js/53.c9a34637.js"><link rel="prefetch" href="/jerry.github.io/assets/js/54.8abbd387.js"><link rel="prefetch" href="/jerry.github.io/assets/js/55.c468aca8.js"><link rel="prefetch" href="/jerry.github.io/assets/js/56.f4b50a04.js"><link rel="prefetch" href="/jerry.github.io/assets/js/57.de666ddb.js"><link rel="prefetch" href="/jerry.github.io/assets/js/58.458d0401.js"><link rel="prefetch" href="/jerry.github.io/assets/js/59.40e6b3d1.js"><link rel="prefetch" href="/jerry.github.io/assets/js/6.c98e06b3.js"><link rel="prefetch" href="/jerry.github.io/assets/js/60.43848b9a.js"><link rel="prefetch" href="/jerry.github.io/assets/js/61.2fe1e137.js"><link rel="prefetch" href="/jerry.github.io/assets/js/62.3f176587.js"><link rel="prefetch" href="/jerry.github.io/assets/js/63.f552851c.js"><link rel="prefetch" href="/jerry.github.io/assets/js/64.d50a2fff.js"><link rel="prefetch" href="/jerry.github.io/assets/js/65.0d627c3b.js"><link rel="prefetch" href="/jerry.github.io/assets/js/66.78e14677.js"><link rel="prefetch" href="/jerry.github.io/assets/js/67.caf5006d.js"><link rel="prefetch" href="/jerry.github.io/assets/js/68.39e8b4be.js"><link rel="prefetch" href="/jerry.github.io/assets/js/69.bd962060.js"><link rel="prefetch" href="/jerry.github.io/assets/js/7.5838a81a.js"><link rel="prefetch" href="/jerry.github.io/assets/js/70.578ae89e.js"><link rel="prefetch" href="/jerry.github.io/assets/js/71.8c97f45c.js"><link rel="prefetch" href="/jerry.github.io/assets/js/72.d9e369a7.js"><link rel="prefetch" href="/jerry.github.io/assets/js/73.4b42860a.js"><link rel="prefetch" href="/jerry.github.io/assets/js/74.1a99cf28.js"><link rel="prefetch" href="/jerry.github.io/assets/js/75.58b36cd5.js"><link rel="prefetch" href="/jerry.github.io/assets/js/76.ed9de37a.js"><link rel="prefetch" href="/jerry.github.io/assets/js/77.227912ee.js"><link rel="prefetch" href="/jerry.github.io/assets/js/78.93f12412.js"><link rel="prefetch" href="/jerry.github.io/assets/js/79.81a03b40.js"><link rel="prefetch" href="/jerry.github.io/assets/js/8.4e52af96.js"><link rel="prefetch" href="/jerry.github.io/assets/js/80.b777d54f.js"><link rel="prefetch" href="/jerry.github.io/assets/js/81.0b43f0cc.js"><link rel="prefetch" href="/jerry.github.io/assets/js/82.28396efa.js"><link rel="prefetch" href="/jerry.github.io/assets/js/83.1277f065.js"><link rel="prefetch" href="/jerry.github.io/assets/js/84.8e6d03c2.js"><link rel="prefetch" href="/jerry.github.io/assets/js/85.2376dca3.js"><link rel="prefetch" href="/jerry.github.io/assets/js/86.555d125a.js"><link rel="prefetch" href="/jerry.github.io/assets/js/87.d6aee5d0.js"><link rel="prefetch" href="/jerry.github.io/assets/js/88.1737751f.js"><link rel="prefetch" href="/jerry.github.io/assets/js/89.e3d5e734.js"><link rel="prefetch" href="/jerry.github.io/assets/js/9.6a9d759a.js"><link rel="prefetch" href="/jerry.github.io/assets/js/90.f1b5cd88.js"><link rel="prefetch" href="/jerry.github.io/assets/js/91.87444e61.js"><link rel="prefetch" href="/jerry.github.io/assets/js/92.45ed101b.js"><link rel="prefetch" href="/jerry.github.io/assets/js/93.18f7d79e.js"><link rel="prefetch" href="/jerry.github.io/assets/js/94.efb5658f.js"><link rel="prefetch" href="/jerry.github.io/assets/js/95.1228ac2d.js"><link rel="prefetch" href="/jerry.github.io/assets/js/96.c1a66ad9.js"><link rel="prefetch" href="/jerry.github.io/assets/js/97.32033135.js"><link rel="prefetch" href="/jerry.github.io/assets/js/98.37b12cfd.js"><link rel="prefetch" href="/jerry.github.io/assets/js/99.cd7ac96d.js">
    <link rel="stylesheet" href="/jerry.github.io/assets/css/0.styles.ba9d0c50.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/jerry.github.io/" class="home-link router-link-active"><!----> <span class="site-name">雪山之巅</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/jerry.github.io/" class="nav-link">
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端知识" class="dropdown-title"><span class="title">前端知识</span> <span class="arrow down"></span></button> <button type="button" aria-label="前端知识" class="mobile-dropdown-title"><span class="title">前端知识</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/jerry.github.io/frontend/es6/" class="nav-link">
  ECMAScript6
</a></li><li class="dropdown-item"><!----> <a href="/jerry.github.io/frontend/typescript/" class="nav-link">
  TypeScript
</a></li><li class="dropdown-item"><!----> <a href="/jerry.github.io/backend/mongodb/.html" class="nav-link">
  ---------------
</a></li><li class="dropdown-item"><!----> <a href="/jerry.github.io/frontend/javascript/" class="nav-link">
  JS基础专题
</a></li><li class="dropdown-item"><!----> <a href="/jerry.github.io/frontend/jsTopic/" class="nav-link">
  JS技术专题
</a></li><li class="dropdown-item"><!----> <a href="/jerry.github.io/frontend/jsOpt/" class="nav-link">
  JS优化专题
</a></li><li class="dropdown-item"><!----> <a href="/jerry.github.io/backend/mongodb/.html" class="nav-link">
  ---------------
</a></li><li class="dropdown-item"><!----> <a href="/jerry.github.io/frontend/webpack/" class="nav-link">
  Webpack
</a></li><li class="dropdown-item"><!----> <a href="/jerry.github.io/frontend/webpack4/" class="nav-link">
  Webpack4配置实战
</a></li><li class="dropdown-item"><!----> <a href="/jerry.github.io/backend/mongodb/.html" class="nav-link">
  ---------------
</a></li><li class="dropdown-item"><!----> <a href="/jerry.github.io/frontend/web/" class="nav-link">
  浏览器相关
</a></li><li class="dropdown-item"><!----> <a href="/jerry.github.io/frontend/html/" class="nav-link">
  HTML5
</a></li><li class="dropdown-item"><!----> <a href="/jerry.github.io/frontend/css/" class="nav-link">
  CSS3
</a></li><li class="dropdown-item"><!----> <a href="/jerry.github.io/frontend/excellent/" class="nav-link">
  优秀博客
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="框架知识" class="dropdown-title"><span class="title">框架知识</span> <span class="arrow down"></span></button> <button type="button" aria-label="框架知识" class="mobile-dropdown-title"><span class="title">框架知识</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/jerry.github.io/frameModule/vue/" class="nav-link">
  Vue3
</a></li><li class="dropdown-item"><!----> <a href="/jerry.github.io/frameModule/ReactNative/" class="nav-link">
  React Native
</a></li><li class="dropdown-item"><!----> <a href="/jerry.github.io/frameModule/weixin/" class="nav-link">
  微信小程序
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="服务端知识" class="dropdown-title"><span class="title">服务端知识</span> <span class="arrow down"></span></button> <button type="button" aria-label="服务端知识" class="mobile-dropdown-title"><span class="title">服务端知识</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/jerry.github.io/backend/nodejs/" class="nav-link">
  NodeJS
</a></li><li class="dropdown-item"><!----> <a href="/jerry.github.io/backend/koa/" class="nav-link">
  Koa
</a></li><li class="dropdown-item"><!----> <a href="/jerry.github.io/backend/mysql/" class="nav-link">
  Mysql
</a></li><li class="dropdown-item"><!----> <a href="/jerry.github.io/backend/mongodb/" class="nav-link router-link-active">
  MongoDB
</a></li><li class="dropdown-item"><!----> <a href="/jerry.github.io/backend/nginx/" class="nav-link">
  Nginx
</a></li><li class="dropdown-item"><!----> <a href="/jerry.github.io/backend/http/" class="nav-link">
  HTTP协议
</a></li><li class="dropdown-item"><!----> <a href="/jerry.github.io/backend/docker/" class="nav-link">
  官网知识推荐
</a></li></ul></div></div><div class="nav-item"><a href="/jerry.github.io/blog/" class="nav-link">
  其他杂谈
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/jerry.github.io/" class="nav-link">
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端知识" class="dropdown-title"><span class="title">前端知识</span> <span class="arrow down"></span></button> <button type="button" aria-label="前端知识" class="mobile-dropdown-title"><span class="title">前端知识</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/jerry.github.io/frontend/es6/" class="nav-link">
  ECMAScript6
</a></li><li class="dropdown-item"><!----> <a href="/jerry.github.io/frontend/typescript/" class="nav-link">
  TypeScript
</a></li><li class="dropdown-item"><!----> <a href="/jerry.github.io/backend/mongodb/.html" class="nav-link">
  ---------------
</a></li><li class="dropdown-item"><!----> <a href="/jerry.github.io/frontend/javascript/" class="nav-link">
  JS基础专题
</a></li><li class="dropdown-item"><!----> <a href="/jerry.github.io/frontend/jsTopic/" class="nav-link">
  JS技术专题
</a></li><li class="dropdown-item"><!----> <a href="/jerry.github.io/frontend/jsOpt/" class="nav-link">
  JS优化专题
</a></li><li class="dropdown-item"><!----> <a href="/jerry.github.io/backend/mongodb/.html" class="nav-link">
  ---------------
</a></li><li class="dropdown-item"><!----> <a href="/jerry.github.io/frontend/webpack/" class="nav-link">
  Webpack
</a></li><li class="dropdown-item"><!----> <a href="/jerry.github.io/frontend/webpack4/" class="nav-link">
  Webpack4配置实战
</a></li><li class="dropdown-item"><!----> <a href="/jerry.github.io/backend/mongodb/.html" class="nav-link">
  ---------------
</a></li><li class="dropdown-item"><!----> <a href="/jerry.github.io/frontend/web/" class="nav-link">
  浏览器相关
</a></li><li class="dropdown-item"><!----> <a href="/jerry.github.io/frontend/html/" class="nav-link">
  HTML5
</a></li><li class="dropdown-item"><!----> <a href="/jerry.github.io/frontend/css/" class="nav-link">
  CSS3
</a></li><li class="dropdown-item"><!----> <a href="/jerry.github.io/frontend/excellent/" class="nav-link">
  优秀博客
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="框架知识" class="dropdown-title"><span class="title">框架知识</span> <span class="arrow down"></span></button> <button type="button" aria-label="框架知识" class="mobile-dropdown-title"><span class="title">框架知识</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/jerry.github.io/frameModule/vue/" class="nav-link">
  Vue3
</a></li><li class="dropdown-item"><!----> <a href="/jerry.github.io/frameModule/ReactNative/" class="nav-link">
  React Native
</a></li><li class="dropdown-item"><!----> <a href="/jerry.github.io/frameModule/weixin/" class="nav-link">
  微信小程序
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="服务端知识" class="dropdown-title"><span class="title">服务端知识</span> <span class="arrow down"></span></button> <button type="button" aria-label="服务端知识" class="mobile-dropdown-title"><span class="title">服务端知识</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/jerry.github.io/backend/nodejs/" class="nav-link">
  NodeJS
</a></li><li class="dropdown-item"><!----> <a href="/jerry.github.io/backend/koa/" class="nav-link">
  Koa
</a></li><li class="dropdown-item"><!----> <a href="/jerry.github.io/backend/mysql/" class="nav-link">
  Mysql
</a></li><li class="dropdown-item"><!----> <a href="/jerry.github.io/backend/mongodb/" class="nav-link router-link-active">
  MongoDB
</a></li><li class="dropdown-item"><!----> <a href="/jerry.github.io/backend/nginx/" class="nav-link">
  Nginx
</a></li><li class="dropdown-item"><!----> <a href="/jerry.github.io/backend/http/" class="nav-link">
  HTTP协议
</a></li><li class="dropdown-item"><!----> <a href="/jerry.github.io/backend/docker/" class="nav-link">
  官网知识推荐
</a></li></ul></div></div><div class="nav-item"><a href="/jerry.github.io/blog/" class="nav-link">
  其他杂谈
</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>MongoDB</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/jerry.github.io/backend/mongodb/" aria-current="page" class="sidebar-link">mongodb</a></li><li><a href="/jerry.github.io/backend/mongodb/01.Mac安装MongoDB.html" class="sidebar-link">1. Mac安装MongoDB</a></li><li><a href="/jerry.github.io/backend/mongodb/02.MongoDB基本操作.html" class="sidebar-link">2. MongoDB基础操作</a></li><li><a href="/jerry.github.io/backend/mongodb/03.mongoose学习总结.html" class="active sidebar-link">3. mongoose学习总结</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/jerry.github.io/backend/mongodb/03.mongoose学习总结.html#_1-mongodb简介" class="sidebar-link">1. MongoDB简介</a></li><li class="sidebar-sub-header"><a href="/jerry.github.io/backend/mongodb/03.mongoose学习总结.html#_2-mongoose是什么" class="sidebar-link">2. Mongoose是什么？</a></li><li class="sidebar-sub-header"><a href="/jerry.github.io/backend/mongodb/03.mongoose学习总结.html#_3-mongoose模块介绍" class="sidebar-link">3. Mongoose模块介绍</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/jerry.github.io/backend/mongodb/03.mongoose学习总结.html#_3-1-mongoose安装" class="sidebar-link">3.1 mongoose安装</a></li></ul></li><li class="sidebar-sub-header"><a href="/jerry.github.io/backend/mongodb/03.mongoose学习总结.html#_4-配置与连接" class="sidebar-link">4. 配置与连接</a></li><li class="sidebar-sub-header"><a href="/jerry.github.io/backend/mongodb/03.mongoose学习总结.html#_5-modal与schema" class="sidebar-link">5. Modal与Schema</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/jerry.github.io/backend/mongodb/03.mongoose学习总结.html#_5-1-schema" class="sidebar-link">5.1 Schema</a></li><li class="sidebar-sub-header"><a href="/jerry.github.io/backend/mongodb/03.mongoose学习总结.html#_5-2-schema-type" class="sidebar-link">5.2 Schema.Type</a></li><li class="sidebar-sub-header"><a href="/jerry.github.io/backend/mongodb/03.mongoose学习总结.html#_5-3-model" class="sidebar-link">5.3 Model</a></li></ul></li><li class="sidebar-sub-header"><a href="/jerry.github.io/backend/mongodb/03.mongoose学习总结.html#_6-创建文档" class="sidebar-link">6. 创建文档</a></li><li class="sidebar-sub-header"><a href="/jerry.github.io/backend/mongodb/03.mongoose学习总结.html#_7-删除文档" class="sidebar-link">7. 删除文档</a></li><li class="sidebar-sub-header"><a href="/jerry.github.io/backend/mongodb/03.mongoose学习总结.html#_8-简单查询" class="sidebar-link">8. 简单查询</a></li><li class="sidebar-sub-header"><a href="/jerry.github.io/backend/mongodb/03.mongoose学习总结.html#_9-条件语句" class="sidebar-link">9. 条件语句</a></li><li class="sidebar-sub-header"><a href="/jerry.github.io/backend/mongodb/03.mongoose学习总结.html#mongoose增删改查demo" class="sidebar-link">mongoose增删改查Demo</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/jerry.github.io/backend/mongodb/03.mongoose学习总结.html#连接数据库" class="sidebar-link">连接数据库</a></li><li class="sidebar-sub-header"><a href="/jerry.github.io/backend/mongodb/03.mongoose学习总结.html#构建模型骨架schame" class="sidebar-link">构建模型骨架Schame</a></li><li class="sidebar-sub-header"><a href="/jerry.github.io/backend/mongodb/03.mongoose学习总结.html#插入数据" class="sidebar-link">插入数据</a></li><li class="sidebar-sub-header"><a href="/jerry.github.io/backend/mongodb/03.mongoose学习总结.html#删除数据" class="sidebar-link">删除数据</a></li><li class="sidebar-sub-header"><a href="/jerry.github.io/backend/mongodb/03.mongoose学习总结.html#修改数据" class="sidebar-link">修改数据</a></li><li class="sidebar-sub-header"><a href="/jerry.github.io/backend/mongodb/03.mongoose学习总结.html#查询数据" class="sidebar-link">查询数据</a></li><li class="sidebar-sub-header"><a href="/jerry.github.io/backend/mongodb/03.mongoose学习总结.html#findone" class="sidebar-link">findOne</a></li><li class="sidebar-sub-header"><a href="/jerry.github.io/backend/mongodb/03.mongoose学习总结.html#条件查询" class="sidebar-link">条件查询</a></li></ul></li><li class="sidebar-sub-header"><a href="/jerry.github.io/backend/mongodb/03.mongoose学习总结.html#mongoose-使用进阶" class="sidebar-link">Mongoose 使用进阶</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/jerry.github.io/backend/mongodb/03.mongoose学习总结.html#模式的扩展" class="sidebar-link">模式的扩展</a></li></ul></li><li class="sidebar-sub-header"><a href="/jerry.github.io/backend/mongodb/03.mongoose学习总结.html#参考文档" class="sidebar-link">参考文档</a></li></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><p>[TOC]</p> <h2 id="_1-mongodb简介"><a href="#_1-mongodb简介" class="header-anchor">#</a> 1. MongoDB简介</h2> <ol><li>MongoDB是一个开源的NoSQL数据库；</li> <li>同时它也是一个对象数据库，没有固定的模式和结构；</li> <li>所有的数据以文档的形式存储,数据格式就是JSON。</li></ol> <h2 id="_2-mongoose是什么"><a href="#_2-mongoose是什么" class="header-anchor">#</a> 2. Mongoose是什么？</h2> <ol><li><code>Mongoose</code>是<code>MongoDB</code>的一个对象模型工具；</li> <li>同时它也是针对<code>MongoDB</code>操作的一个对象模型库，封装了<code>MongoDB</code>对文档的的一些增删改查等常用方法；</li> <li>让<code>NodeJS</code>操作<code>Mongodb</code>数据库变得更加灵活简单。</li></ol> <h2 id="_3-mongoose模块介绍"><a href="#_3-mongoose模块介绍" class="header-anchor">#</a> 3. Mongoose模块介绍</h2> <p>mongoose模块用来将nodejs中的对象与mongodb中的文档进行对应的模块。
<code>Mongoose</code>是在<code>node.js</code>异步环境下对<code>mongodb</code>进行便捷操作的对象模型工具。那么要使用它，首先你得装上<code>node.js</code>和<code>mongodb</code>。</p> <h3 id="_3-1-mongoose安装"><a href="#_3-1-mongoose安装" class="header-anchor">#</a> 3.1 mongoose安装</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code>npm install mongoose
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>安装成功后，就可以通过<code>require('mongoose')</code>来使用。</p> <p>官网实例：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> mongoose <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'mongoose'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
mongoose<span class="token punctuation">.</span><span class="token function">connect</span><span class="token punctuation">(</span><span class="token string">'mongodb://localhost/test'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> Cat <span class="token operator">=</span> mongoose<span class="token punctuation">.</span><span class="token function">model</span><span class="token punctuation">(</span><span class="token string">'Cat'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">name</span><span class="token operator">:</span> String <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> kitty <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Cat</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'Zildjian'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
kitty<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'meow'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><blockquote><p><code>Mongoose</code>提供了一个直观的，基于模式的解决方案来建模应用程序数据。它包括内置的类型转换，验证，查询构建，业务逻辑挂钩等，开箱即用；是<code>mongoDB</code>的好基友。</p></blockquote> <p>为了保存网站的用户数据和业务数据，通常需要一个数据库。<code>MongoDB和Node.js</code>特别般配，因为<code>mongodb</code>是基于文档的非关系型数据库，文档是按<code>BSON</code>（JSON的轻量化二进制格式）存储的，增删改查等管理数据库的命令和<code>JavaScript</code>语法很像。如果你在<code>node.js</code>里访问<code>MongoDB</code>的数据，会有我们是一家人的感觉，特别亲切。</p> <p><code>MongoDB</code>使用集合（collection）和文档（document）来描述和存储数据，collection就相当于表，document相当于行，不过MySQL之类的关系型数据库，表结构是固定的，比如某一行由若干列组成，行行都一样，而MongoDB不同，一个集合里的多个文档可以有不同的结构，更灵活一些。</p> <p><img src="evernotecid://AC85336C-B325-443E-8ED7-E6554790A944/appyinxiangcom/10797539/ENResource/p161" alt="78f5517bf2e0a7ef14533b03e675848e.png"></p> <h2 id="_4-配置与连接"><a href="#_4-配置与连接" class="header-anchor">#</a> 4. 配置与连接</h2> <blockquote><p>创建一个db.js：</p></blockquote> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 引入mongoose</span>
<span class="token keyword">const</span> mongoose <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'mongoose'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 连接字符串</span>
<span class="token keyword">const</span> <span class="token constant">DB_URL</span> <span class="token operator">=</span> <span class="token string">'mongodb://localhost:27017/mongoosesample'</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> db <span class="token operator">=</span> mongoose<span class="token punctuation">.</span>connection<span class="token punctuation">;</span>

<span class="token comment">// 连接数据库</span>
mongoose<span class="token punctuation">.</span><span class="token function">connect</span><span class="token punctuation">(</span><span class="token constant">DB_URL</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token literal-property property">useNewUrlParser</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 连接成功</span>
db<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'connected'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Mongoose connection open to:'</span> <span class="token operator">+</span> <span class="token constant">DB_URL</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 连接失败</span>
db<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'error'</span><span class="token punctuation">,</span> <span class="token parameter">err</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Mongoose connection error：'</span> <span class="token operator">+</span> err<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 连接断开</span>
db<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'disconnected'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Mongoose connection disconnected'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> mongoose<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> mongoose <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'mongoose'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token constant">DB_URL</span> <span class="token operator">=</span> <span class="token string">'mongodb://localhost:27017/mongoosesample'</span><span class="token punctuation">;</span>

<span class="token comment">/**
 * 连接
 */</span>
mongoose<span class="token punctuation">.</span><span class="token function">connect</span><span class="token punctuation">(</span><span class="token constant">DB_URL</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">/**
  * 连接成功
  */</span>
mongoose<span class="token punctuation">.</span>connection<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'connected'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Mongoose connection open to '</span> <span class="token operator">+</span> <span class="token constant">DB_URL</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">/**
 * 连接异常
 */</span>
mongoose<span class="token punctuation">.</span>connection<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'error'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Mongoose connection error: '</span> <span class="token operator">+</span> err<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">/**
 * 连接断开
 */</span>
mongoose<span class="token punctuation">.</span>connection<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'disconnected'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Mongoose connection disconnected'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> mongoose<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br></div></div><h2 id="_5-modal与schema"><a href="#_5-modal与schema" class="header-anchor">#</a> 5. Modal与Schema</h2> <h3 id="_5-1-schema"><a href="#_5-1-schema" class="header-anchor">#</a> 5.1 Schema</h3> <p><code>Schema</code>是数据库集合的模型骨架，定义了集合中的字段的名称和类型以及默认值等信息。</p> <p><code>schema</code>是<code>mongoose</code>里会用到的一种数据模式，可以理解为表结构的定义；每个<code>schema</code>会映射到<code>mongodb</code>中的一个<code>collection</code>，它不具备操作数据库的能力。我们先改造一下db.js，导出mongoose对象。</p> <h3 id="_5-2-schema-type"><a href="#_5-2-schema-type" class="header-anchor">#</a> 5.2 Schema.Type</h3> <p><code>NodeJS</code>中的基本数据类型都属于<code>Schema.Type</code>。另外<code>Mongoose</code>还定义了自己的类型，基本属性类型有:</p> <ul><li>字符串(String)</li> <li>日期型(Date)</li> <li>数值型(Number)</li> <li>布尔型(Boolean)</li> <li>null</li> <li>数组([])</li> <li>内嵌文档</li></ul> <blockquote><p>定义Schema：</p></blockquote> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> personSchema <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Schema</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> String<span class="token punctuation">,</span> <span class="token comment">//姓名</span>
  <span class="token literal-property property">binary</span><span class="token operator">:</span> Buffer<span class="token punctuation">,</span> <span class="token comment">//二进制</span>
  <span class="token literal-property property">living</span><span class="token operator">:</span> Boolean<span class="token punctuation">,</span> <span class="token comment">//是否活着</span>
  <span class="token literal-property property">birthday</span><span class="token operator">:</span> Date<span class="token punctuation">,</span> <span class="token comment">//生日</span>
  <span class="token literal-property property">age</span><span class="token operator">:</span> Number<span class="token punctuation">,</span> <span class="token comment">//年龄</span>
  <span class="token literal-property property">_id</span><span class="token operator">:</span> Schema<span class="token punctuation">.</span>Types<span class="token punctuation">.</span>ObjectId<span class="token punctuation">,</span> <span class="token comment">//主键</span>
  <span class="token literal-property property">_fk</span><span class="token operator">:</span> Schema<span class="token punctuation">.</span>Types<span class="token punctuation">.</span>ObjectId<span class="token punctuation">,</span> <span class="token comment">//外键</span>
  <span class="token literal-property property">array</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">//数组</span>
  <span class="token literal-property property">arrOfString</span><span class="token operator">:</span> <span class="token punctuation">[</span>String<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">//字符串数组</span>
  <span class="token literal-property property">arrOfNumber</span><span class="token operator">:</span> <span class="token punctuation">[</span>Number<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">//数字数组</span>
  <span class="token literal-property property">arrOfDate</span><span class="token operator">:</span> <span class="token punctuation">[</span>Date<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">//日期数组</span>
  <span class="token literal-property property">arrOfBuffer</span><span class="token operator">:</span> <span class="token punctuation">[</span>Buffer<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">//Buffer数组</span>
  <span class="token literal-property property">arrOfBoolean</span><span class="token operator">:</span> <span class="token punctuation">[</span>Boolean<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">//布尔值数组</span>
  <span class="token literal-property property">arrOfObjectId</span><span class="token operator">:</span> <span class="token punctuation">[</span>Schema<span class="token punctuation">.</span>Types<span class="token punctuation">.</span>ObjectId<span class="token punctuation">]</span> <span class="token comment">//对象ID数组</span>
  <span class="token literal-property property">nested</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token comment">//内嵌文档</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> String<span class="token punctuation">,</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><h3 id="_5-3-model"><a href="#_5-3-model" class="header-anchor">#</a> 5.3 Model</h3> <p><code>Model</code>是由通过<code>Schema</code>构造而成，除了具有<code>Schema</code>定义的数据库骨架以外，还可以操作数据库。如何通过<code>Schema</code>来创建<code>Model</code>呢，如下:</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 连接数据库</span>
mongoose<span class="token punctuation">.</span><span class="token function">connect</span><span class="token punctuation">(</span><span class="token string">&quot;mongodb://123.57.143.189:27017/zfpx&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 两个参数表示定义一个模型</span>
<span class="token comment">// PersonSchema是定义好的Schema</span>
<span class="token comment">// Person是Modal的名称，第一个字母要大写</span>
<span class="token keyword">const</span> PersonModel <span class="token operator">=</span> mongoose<span class="token punctuation">.</span><span class="token function">model</span><span class="token punctuation">(</span><span class="token string">&quot;Person&quot;</span><span class="token punctuation">,</span> PersonSchema<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 如果该Model已经定义，则可以直接通过名字获取</span>
<span class="token keyword">const</span> PersonModel <span class="token operator">=</span> mongoose<span class="token punctuation">.</span><span class="token function">model</span><span class="token punctuation">(</span><span class="token string">'Person'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 一个参数表示获取已定义的模型</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>拥有了<code>Model</code>，我们也就拥有了操作数据库的能力。</p> <blockquote><p>在数据库中的集合名称等于模型名转小写再转复数，比如Person&gt;person&gt;people，Child&gt;child&gt;children。</p></blockquote> <p><img src="evernotecid://AC85336C-B325-443E-8ED7-E6554790A944/appyinxiangcom/10797539/ENResource/p162" alt="d94d433935b73f873232794d099c6bca.png"> <img src="evernotecid://AC85336C-B325-443E-8ED7-E6554790A944/appyinxiangcom/10797539/ENResource/p163" alt="86f41e35a12e070046d03ef229c7b431.png"></p> <blockquote><p>在上例中，我们的模型名称为<code>Person</code>，最后的<code>collection</code>的名称为<code>people</code>。</p></blockquote> <h2 id="_6-创建文档"><a href="#_6-创建文档" class="header-anchor">#</a> 6. 创建文档</h2> <h2 id="_7-删除文档"><a href="#_7-删除文档" class="header-anchor">#</a> 7. 删除文档</h2> <h2 id="_8-简单查询"><a href="#_8-简单查询" class="header-anchor">#</a> 8. 简单查询</h2> <h2 id="_9-条件语句"><a href="#_9-条件语句" class="header-anchor">#</a> 9. 条件语句</h2> <h2 id="mongoose增删改查demo"><a href="#mongoose增删改查demo" class="header-anchor">#</a> mongoose增删改查Demo</h2> <p>在项目中安装mongoose：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>cnpm install mongoose <span class="token comment">// 或者</span>
yarn add mongoose
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>做个简单项目的项目结构，对数据的增删改查，都是简单的操作，主要是引入mongoose的链接操作，复杂的增删改查在MongoDB的基础知识中学习。</p> <blockquote><p>目录结构如下：</p></blockquote> <p><img src="evernotecid://AC85336C-B325-443E-8ED7-E6554790A944/appyinxiangcom/10797539/ENResource/p152" alt="d85407c74206be2e7a56e6bf73a7486f.png"></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>MongoDB数据库框架mongoose

db<span class="token punctuation">.</span>js 		连接数据库

Model<span class="token punctuation">.</span>js 	构建模型骨架，构建Model

insert<span class="token punctuation">.</span>js 	<span class="token function">插入数据</span><span class="token punctuation">(</span>增<span class="token punctuation">)</span>

<span class="token keyword">delete</span><span class="token punctuation">.</span>js 	<span class="token function">删除数据</span><span class="token punctuation">(</span>删<span class="token punctuation">)</span>

update<span class="token punctuation">.</span>js 	<span class="token function">修改数据</span><span class="token punctuation">(</span>改<span class="token punctuation">)</span>

find<span class="token punctuation">.</span>js 	<span class="token function">查询数据</span><span class="token punctuation">(</span>查<span class="token punctuation">)</span>

MongoDB可视化工具robo 3t
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><h3 id="连接数据库"><a href="#连接数据库" class="header-anchor">#</a> 连接数据库</h3> <blockquote><p>连接数据库，创建db.js文件</p></blockquote> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 连接数据库</span>
<span class="token keyword">const</span> mongoose <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'mongoose'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 连接数据库</span>
mongoose<span class="token punctuation">.</span><span class="token function">connect</span><span class="token punctuation">(</span><span class="token string">'mongodb://127.0.0.1:27017/user'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">useNewUrlParser</span><span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 连接失败</span>
mongoose<span class="token punctuation">.</span>connection<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'error'</span><span class="token punctuation">,</span> <span class="token parameter">err</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">'数据库链接失败:'</span> <span class="token operator">+</span> err<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 连接成功</span>
mongoose<span class="token punctuation">.</span>connection<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'open'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'数据库链接成功'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 断开数据库</span>
mongoose<span class="token punctuation">.</span>connection<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'disconnected'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'数据库断开成功'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// 将mongoose导出</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> mongoose<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><h3 id="构建模型骨架schame"><a href="#构建模型骨架schame" class="header-anchor">#</a> 构建模型骨架Schame</h3> <blockquote><p>构建模型骨架Schame，构建Model，创建文件Model.js：</p></blockquote> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> mongoose <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./db.js'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 模型骨架</span>
<span class="token keyword">const</span> Schema <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">mongoose<span class="token punctuation">.</span>Schema</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">username</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token literal-property property">type</span><span class="token operator">:</span> String<span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token literal-property property">type</span><span class="token operator">:</span> Number<span class="token punctuation">,</span> <span class="token keyword">default</span><span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">address</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token literal-property property">type</span><span class="token operator">:</span> String<span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">time</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token literal-property property">type</span><span class="token operator">:</span> Date<span class="token punctuation">}</span> <span class="token comment">// 创建时间</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 定义好了Schema，接下就是生成Model。model是由schema生成的模型，可以对数据库的操作。</span>
<span class="token comment">// 由schema构造生成Model</span>
<span class="token keyword">const</span> Model <span class="token operator">=</span> mongoose<span class="token punctuation">.</span><span class="token function">model</span><span class="token punctuation">(</span><span class="token string">'user'</span><span class="token punctuation">,</span> Schema<span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> Model<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><blockquote><p>定义一个Schema就这么简单，指定字段名和类型。Schema Types内置类型如下：</p></blockquote> <ul><li>String</li> <li>Number</li> <li>Boolean | Bool</li> <li>Array</li> <li>Buffer</li> <li>Date</li> <li>ObjectId | Oid</li> <li>Mixed</li></ul> <h3 id="插入数据"><a href="#插入数据" class="header-anchor">#</a> 插入数据</h3> <blockquote><p>增加数据，创建文件insert.js：</p></blockquote> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> Model <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./Model.js'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 插入数据</span>
Model<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
        <span class="token literal-property property">username</span><span class="token operator">:</span> <span class="token string">'wangwu'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">33</span><span class="token punctuation">,</span>
        <span class="token literal-property property">address</span><span class="token operator">:</span> <span class="token string">'tianjin'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">time</span><span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">else</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'插入数据成功'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><h3 id="删除数据"><a href="#删除数据" class="header-anchor">#</a> 删除数据</h3> <blockquote><p>删除数据, 创建文件delete.js：</p></blockquote> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> Model <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./Model.js'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 删除数据</span>
Model<span class="token punctuation">.</span><span class="token function">deleteOne</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">username</span><span class="token operator">:</span> <span class="token string">'zhaoliu'</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
	<span class="token keyword">if</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">else</span> <span class="token punctuation">{</span>
		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h3 id="修改数据"><a href="#修改数据" class="header-anchor">#</a> 修改数据</h3> <blockquote><p>修改数据, 创建文件 update.js：</p></blockquote> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> Model <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./Model.js'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 更新数据</span>
Model<span class="token punctuation">.</span><span class="token function">updateOne</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">username</span><span class="token operator">:</span> <span class="token string">'liutao'</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">62</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
	<span class="token keyword">if</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">'Error: '</span> <span class="token operator">+</span> err<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h3 id="查询数据"><a href="#查询数据" class="header-anchor">#</a> 查询数据</h3> <blockquote><p>查询数据，创建文件<code>find.js</code>：</p></blockquote> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 引入模型</span>
<span class="token keyword">const</span> Model <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./Model.js'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 查询数据(通过调用模型的find方法)</span>
<span class="token comment">// find函数的第一个参数是查询条件，第二个参数是查询操作完成后的回调，回调函数的第一个参数是查询出错后的错误对象，第二个参数是查询的结果。</span>
<span class="token comment">// 当第一个参数为{}空对象时，可以返回所有结果</span>
Model<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">username</span><span class="token operator">:</span> <span class="token string">'liutao'</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
	<span class="token keyword">if</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">{</span>
		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h3 id="findone"><a href="#findone" class="header-anchor">#</a> findOne</h3> <p>findOne()方法：只返回符合查询条件的第一条数据。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> Model <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./Model.js'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 查询数据</span>
Model<span class="token punctuation">.</span><span class="token function">findOne</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">username</span><span class="token operator">:</span> <span class="token string">'liutao'</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
	<span class="token keyword">if</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">{</span>
		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">else</span> <span class="token punctuation">{</span>
		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h3 id="条件查询"><a href="#条件查询" class="header-anchor">#</a> 条件查询</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> Person <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./Model.js'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 查询username为lisi或者wangwu的数据</span>
<span class="token keyword">const</span> cond <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">$or</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span><span class="token literal-property property">username</span><span class="token operator">:</span> <span class="token string">'lisi'</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span><span class="token literal-property property">username</span><span class="token operator">:</span> <span class="token string">'wangwu'</span><span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
Person<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span>cond<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
	<span class="token keyword">if</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'cond:'</span><span class="token punctuation">,</span> cond<span class="token punctuation">,</span> <span class="token string">'res:'</span><span class="token punctuation">,</span> res<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p><img src="evernotecid://AC85336C-B325-443E-8ED7-E6554790A944/appyinxiangcom/10797539/ENResource/p164" alt="f21824f094c8bd4aed15ea810f1448e9.png"></p> <h2 id="mongoose-使用进阶"><a href="#mongoose-使用进阶" class="header-anchor">#</a> Mongoose 使用进阶</h2> <h3 id="模式的扩展"><a href="#模式的扩展" class="header-anchor">#</a> 模式的扩展</h3> <h4 id="默认值"><a href="#默认值" class="header-anchor">#</a> 默认值</h4> <blockquote><p>默认值的类型：</p></blockquote> <ul><li>固定值</li> <li>即时生成</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> mongoose <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./db.js'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 模型骨架</span>
<span class="token keyword">const</span> PersonSchema <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">mongoose<span class="token punctuation">.</span>Schema</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">username</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token literal-property property">type</span><span class="token operator">:</span> String<span class="token punctuation">,</span> <span class="token keyword">default</span><span class="token operator">:</span> <span class="token string">'lisi'</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token literal-property property">type</span><span class="token operator">:</span> Number<span class="token punctuation">,</span> <span class="token keyword">default</span><span class="token operator">:</span> <span class="token number">12</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">address</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token literal-property property">type</span><span class="token operator">:</span> String<span class="token punctuation">,</span> <span class="token keyword">default</span><span class="token operator">:</span> <span class="token string">'beijing'</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">time</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token literal-property property">type</span><span class="token operator">:</span> Date<span class="token punctuation">,</span> <span class="token keyword">default</span><span class="token operator">:</span> Date<span class="token punctuation">.</span>now<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 由schema构造生成Model</span>
<span class="token keyword">const</span> Person <span class="token operator">=</span> mongoose<span class="token punctuation">.</span><span class="token function">model</span><span class="token punctuation">(</span><span class="token string">'Person'</span><span class="token punctuation">,</span> PersonSchema<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> person <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 这里不传参数将使用Modal的默认值</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>person<span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> Person<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><p><img src="evernotecid://AC85336C-B325-443E-8ED7-E6554790A944/appyinxiangcom/10797539/ENResource/p165" alt="c7a7dcfa1ad7a161f7ece2fa422038ba.png"></p> <h4 id="模式修饰符"><a href="#模式修饰符" class="header-anchor">#</a> 模式修饰符</h4> <ul><li>预定义的模式修饰符(例如：去除字段值两侧的空格)</li> <li>自定义setter修饰符</li> <li>自定义getter修饰符</li></ul> <blockquote><p>setter.js</p></blockquote> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> mongoose <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./db.js'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 模型骨架</span>
<span class="token keyword">const</span> PersonSchema <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">mongoose<span class="token punctuation">.</span>Schema</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">username</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">type</span><span class="token operator">:</span> String<span class="token punctuation">,</span>
        <span class="token literal-property property">trim</span><span class="token operator">:</span> <span class="token boolean">true</span> <span class="token comment">// 去空格(预定义的模式修饰符)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token literal-property property">type</span><span class="token operator">:</span> Number<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 由schema构造生成Model</span>
<span class="token keyword">const</span> Person <span class="token operator">=</span> mongoose<span class="token punctuation">.</span><span class="token function">model</span><span class="token punctuation">(</span><span class="token string">'Person'</span><span class="token punctuation">,</span> PersonSchema<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> person <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">username</span><span class="token operator">:</span> <span class="token string">'  zhaoliu '</span><span class="token punctuation">,</span>
    <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">20</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>person<span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> Person<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><p><img src="evernotecid://AC85336C-B325-443E-8ED7-E6554790A944/appyinxiangcom/10797539/ENResource/p166" alt="9e3af90848a33613066b44730f61a428.png"></p> <blockquote><p>如上图所示：username左右两侧的空格被去除了。</p></blockquote> <blockquote><p>自定义setter修饰符demo：</p></blockquote> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> mongoose <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./db.js'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 模型骨架</span>
<span class="token keyword">const</span> PersonSchema <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">mongoose<span class="token punctuation">.</span>Schema</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">username</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">type</span><span class="token operator">:</span> String<span class="token punctuation">,</span>
        <span class="token literal-property property">trim</span><span class="token operator">:</span> <span class="token boolean">true</span> <span class="token comment">// 去空格</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token literal-property property">type</span><span class="token operator">:</span> Number<span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">blog</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">type</span><span class="token operator">:</span> String<span class="token punctuation">,</span>
        <span class="token function-variable function">set</span><span class="token operator">:</span> <span class="token parameter">url</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> <span class="token comment">// 如果blog前面没有协议，则默认添加'http://'</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>url<span class="token punctuation">)</span> <span class="token keyword">return</span> url<span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>url<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token string">'http://'</span><span class="token punctuation">)</span> <span class="token operator">!==</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> url<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token string">'https://'</span><span class="token punctuation">)</span> <span class="token operator">!==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                url <span class="token operator">=</span> <span class="token string">'http://'</span> <span class="token operator">+</span> url<span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">return</span> url<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 由schema构造生成Model</span>
<span class="token keyword">const</span> Person <span class="token operator">=</span> mongoose<span class="token punctuation">.</span><span class="token function">model</span><span class="token punctuation">(</span><span class="token string">'Person'</span><span class="token punctuation">,</span> PersonSchema<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> person <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">username</span><span class="token operator">:</span> <span class="token string">'  zhaoliu '</span><span class="token punctuation">,</span>
    <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">20</span><span class="token punctuation">,</span>
    <span class="token literal-property property">blog</span><span class="token operator">:</span> <span class="token string">'www.baidu.com'</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>person<span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> Person<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br></div></div><p><img src="evernotecid://AC85336C-B325-443E-8ED7-E6554790A944/appyinxiangcom/10797539/ENResource/p167" alt="09d7801364fea6d7e07ba1ec48197f88.png"></p> <blockquote><p>如上图所示，blog字段前面加上了相应的协议。</p></blockquote> <blockquote><p>自定义getter修饰符demo：</p></blockquote> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> mongoose <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./db.js'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 模型骨架</span>
<span class="token keyword">const</span> PersonSchema <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">mongoose<span class="token punctuation">.</span>Schema</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">blog</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">type</span><span class="token operator">:</span> String<span class="token punctuation">,</span>
        <span class="token function-variable function">get</span><span class="token operator">:</span> <span class="token parameter">url</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> <span class="token comment">// 如果blog前面没有协议，则默认添加'http://'</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>url<span class="token punctuation">)</span> <span class="token keyword">return</span> url<span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>url<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token string">'http://'</span><span class="token punctuation">)</span> <span class="token operator">!==</span> <span class="token number">0</span> <span class="token operator">||</span> url<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token string">'https://'</span><span class="token punctuation">)</span> <span class="token operator">!==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                url <span class="token operator">=</span> <span class="token string">'http://'</span> <span class="token operator">+</span> url<span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">return</span> url<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 由schema构造生成Model</span>
<span class="token keyword">const</span> Person <span class="token operator">=</span> mongoose<span class="token punctuation">.</span><span class="token function">model</span><span class="token punctuation">(</span><span class="token string">'Person'</span><span class="token punctuation">,</span> PersonSchema<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> person <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">blog</span><span class="token operator">:</span> <span class="token string">'www.baidu.com'</span> <span class="token comment">// 这里的值会传给get修饰符</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>person<span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> Person<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br></div></div><p><img src="evernotecid://AC85336C-B325-443E-8ED7-E6554790A944/appyinxiangcom/10797539/ENResource/p168" alt="4c598c8135f365d237bfc2eaf6a8e647.png"></p> <h4 id="虚拟属性-使用schema-virtual-方法创建"><a href="#虚拟属性-使用schema-virtual-方法创建" class="header-anchor">#</a> 虚拟属性(使用Schema.virtual()方法创建)</h4> <blockquote><p>virtual.js</p></blockquote> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> mongoose <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./db.js'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 模型骨架</span>
<span class="token keyword">const</span> PersonSchema <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">mongoose<span class="token punctuation">.</span>Schema</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">fristName</span><span class="token operator">:</span> String<span class="token punctuation">,</span>
    <span class="token literal-property property">lastName</span><span class="token operator">:</span> String
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 创建虚拟属性</span>
PersonSchema<span class="token punctuation">.</span><span class="token function">virtual</span><span class="token punctuation">(</span><span class="token string">'fullName'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>fristName <span class="token operator">+</span> <span class="token string">' '</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>lastName<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 由schema构造生成Model</span>
<span class="token keyword">const</span> Person <span class="token operator">=</span> mongoose<span class="token punctuation">.</span><span class="token function">model</span><span class="token punctuation">(</span><span class="token string">'Person'</span><span class="token punctuation">,</span> PersonSchema<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 实例化</span>
<span class="token keyword">const</span> person <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">fristName</span><span class="token operator">:</span> <span class="token string">'li'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">lastName</span><span class="token operator">:</span> <span class="token string">'si'</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'fullName:'</span><span class="token punctuation">,</span> person<span class="token punctuation">.</span>fullName<span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> Person<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><p><img src="evernotecid://AC85336C-B325-443E-8ED7-E6554790A944/appyinxiangcom/10797539/ENResource/p169" alt="2bf27c8bc990dabcecc671843533e78b.png"></p> <blockquote><p>将person转为json：</p></blockquote> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> mongoose <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./db.js'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 模型骨架</span>
<span class="token keyword">const</span> PersonSchema <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">mongoose<span class="token punctuation">.</span>Schema</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">fristName</span><span class="token operator">:</span> String<span class="token punctuation">,</span>
    <span class="token literal-property property">lastName</span><span class="token operator">:</span> String
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 创建虚拟属性</span>
PersonSchema<span class="token punctuation">.</span><span class="token function">virtual</span><span class="token punctuation">(</span><span class="token string">'fullName'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>fristName <span class="token operator">+</span> <span class="token string">' '</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>lastName<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

PersonSchema<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">'toJSON'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token literal-property property">getters</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token literal-property property">virtual</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 由schema构造生成Model</span>
<span class="token keyword">const</span> Person <span class="token operator">=</span> mongoose<span class="token punctuation">.</span><span class="token function">model</span><span class="token punctuation">(</span><span class="token string">'Person'</span><span class="token punctuation">,</span> PersonSchema<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 实例化</span>
<span class="token keyword">const</span> person <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">fristName</span><span class="token operator">:</span> <span class="token string">'li'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">lastName</span><span class="token operator">:</span> <span class="token string">'si'</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'fullName:'</span><span class="token punctuation">,</span> person<span class="token punctuation">.</span>fullName<span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'JSON:'</span><span class="token punctuation">,</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>person<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> Person<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br></div></div><p><img src="evernotecid://AC85336C-B325-443E-8ED7-E6554790A944/appyinxiangcom/10797539/ENResource/p173" alt="48104b28cd61e006633934d001120139.png"></p> <h4 id="索引"><a href="#索引" class="header-anchor">#</a> 索引</h4> <p>索引的目的</p> <ul><li>唯一索引</li> <li>辅助索引(用来增加查询速度)</li></ul> <h4 id="模型的方法"><a href="#模型的方法" class="header-anchor">#</a> 模型的方法</h4> <blockquote><p>自定义静态方法：</p></blockquote> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 连接数据库</span>
<span class="token keyword">const</span> mongoose <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'mongoose'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 连接数据库</span>
mongoose<span class="token punctuation">.</span><span class="token function">connect</span><span class="token punctuation">(</span><span class="token string">'mongodb://127.0.0.1:27017/book'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">useNewUrlParser</span><span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 模型骨架</span>
<span class="token keyword">const</span> BookSchema <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">mongoose<span class="token punctuation">.</span>Schema</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">isbn</span><span class="token operator">:</span> Number<span class="token punctuation">,</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> String
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 定义静态方法</span>
BookSchema<span class="token punctuation">.</span>statics<span class="token punctuation">.</span><span class="token function-variable function">findByISBN</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">isbn<span class="token punctuation">,</span> cb</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">findOne</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">isbn</span><span class="token operator">:</span> isbn<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> doc</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token function">cb</span><span class="token punctuation">(</span>err<span class="token punctuation">,</span> doc<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> Book <span class="token operator">=</span> mongoose<span class="token punctuation">.</span><span class="token function">model</span><span class="token punctuation">(</span><span class="token string">'Book'</span><span class="token punctuation">,</span> BookSchema<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> book <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Book</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'计算机程序设计'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">isbn</span><span class="token operator">:</span> <span class="token number">123456</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
book<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span><span class="token parameter">err</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'save book failed'</span><span class="token punctuation">,</span> err<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    Book<span class="token punctuation">.</span><span class="token function">findByISBN</span><span class="token punctuation">(</span><span class="token number">123456</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> doc</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'findByISBN, err, doc：'</span><span class="token punctuation">,</span> err<span class="token punctuation">,</span> doc<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br></div></div><p><img src="evernotecid://AC85336C-B325-443E-8ED7-E6554790A944/appyinxiangcom/10797539/ENResource/p171" alt="5c8c5ab3aebecb880ad9ddaea3ff7fea.png"></p> <blockquote><p>自定义实例方法：</p></blockquote> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 连接数据库</span>
<span class="token keyword">const</span> mongoose <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'mongoose'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 连接数据库</span>
mongoose<span class="token punctuation">.</span><span class="token function">connect</span><span class="token punctuation">(</span><span class="token string">'mongodb://127.0.0.1:27017/book'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">useNewUrlParser</span><span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 模型骨架</span>
<span class="token keyword">const</span> BookSchema <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">mongoose<span class="token punctuation">.</span>Schema</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">isbn</span><span class="token operator">:</span> Number<span class="token punctuation">,</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> String
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 定义静态方法</span>
BookSchema<span class="token punctuation">.</span>statics<span class="token punctuation">.</span><span class="token function-variable function">findByISBN</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">isbn<span class="token punctuation">,</span> cb</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">findOne</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">isbn</span><span class="token operator">:</span> isbn<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> doc</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token function">cb</span><span class="token punctuation">(</span>err<span class="token punctuation">,</span> doc<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token comment">// 定义实例方法</span>
BookSchema<span class="token punctuation">.</span>methods<span class="token punctuation">.</span><span class="token function-variable function">print</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Book info：'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'\tTitle：'</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'\tISBN：'</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>isbn<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> Book <span class="token operator">=</span> mongoose<span class="token punctuation">.</span><span class="token function">model</span><span class="token punctuation">(</span><span class="token string">'Book'</span><span class="token punctuation">,</span> BookSchema<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> book <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Book</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'计算机程序设计'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">isbn</span><span class="token operator">:</span> <span class="token number">123456</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
book<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span><span class="token parameter">err</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'save book failed'</span><span class="token punctuation">,</span> err<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    Book<span class="token punctuation">.</span><span class="token function">findByISBN</span><span class="token punctuation">(</span><span class="token number">123456</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> doc</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'findByISBN, err, doc：'</span><span class="token punctuation">,</span> err<span class="token punctuation">,</span> doc<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    book<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 调用实例方法</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br></div></div><p><img src="evernotecid://AC85336C-B325-443E-8ED7-E6554790A944/appyinxiangcom/10797539/ENResource/p172" alt="99821836cd3ed06aec8d52fb1346c476.png"></p> <h4 id="数据的校验"><a href="#数据的校验" class="header-anchor">#</a> 数据的校验</h4> <p>预定义的验证器：required，Number(max,min)，String(enum,match)。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 连接数据库</span>
<span class="token keyword">const</span> mongoose <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'mongoose'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 连接数据库</span>
mongoose<span class="token punctuation">.</span><span class="token function">connect</span><span class="token punctuation">(</span><span class="token string">'mongodb://127.0.0.1:27017/book'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">useNewUrlParser</span><span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 模型骨架</span>
<span class="token keyword">const</span> OrderSchema <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">mongoose<span class="token punctuation">.</span>Schema</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">count</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">type</span><span class="token operator">:</span> Number<span class="token punctuation">,</span>
        <span class="token literal-property property">required</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// 设置必须</span>
        <span class="token literal-property property">max</span><span class="token operator">:</span> <span class="token number">1000</span><span class="token punctuation">,</span> <span class="token comment">// 设置最大值</span>
        <span class="token literal-property property">min</span><span class="token operator">:</span> <span class="token number">10</span> <span class="token comment">// 设置最小值</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">status</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">type</span><span class="token operator">:</span> String<span class="token punctuation">,</span>
        <span class="token keyword">enum</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'created'</span><span class="token punctuation">,</span> <span class="token string">'success'</span><span class="token punctuation">,</span> <span class="token string">'failed'</span><span class="token punctuation">]</span> <span class="token comment">// 枚举验证器</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">desc</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">type</span><span class="token operator">:</span> String<span class="token punctuation">,</span>
        <span class="token literal-property property">match</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">book</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">,</span> <span class="token comment">// 正则验证器，值中必须包含book字符串</span>
        <span class="token function-variable function">validate</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">desc</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// 自定义验证器，必须大于10个字符</span>
            <span class="token keyword">return</span> desc<span class="token punctuation">.</span>length <span class="token operator">&gt;=</span> <span class="token number">10</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> Order <span class="token operator">=</span> mongoose<span class="token punctuation">.</span><span class="token function">model</span><span class="token punctuation">(</span><span class="token string">'Order'</span><span class="token punctuation">,</span> OrderSchema<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> order <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Order</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
order<span class="token punctuation">.</span>count <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span>
order<span class="token punctuation">.</span>status <span class="token operator">=</span> <span class="token string">'success'</span><span class="token punctuation">;</span>
order<span class="token punctuation">.</span>desc <span class="token operator">=</span> <span class="token string">'test'</span><span class="token punctuation">;</span>
order<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span><span class="token parameter">err</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'save failed'</span><span class="token punctuation">,</span> err<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'save success'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br></div></div><p><img src="evernotecid://AC85336C-B325-443E-8ED7-E6554790A944/appyinxiangcom/10797539/ENResource/p174" alt="2c620e33b5c083e275da09ae07777384.png"> <img src="evernotecid://AC85336C-B325-443E-8ED7-E6554790A944/appyinxiangcom/10797539/ENResource/p175" alt="2fe112e5e6ff274bfea95821c76e3b64.png"> <img src="evernotecid://AC85336C-B325-443E-8ED7-E6554790A944/appyinxiangcom/10797539/ENResource/p176" alt="f4245f4e6d6f6313e7a2c51f7ad7a2cc.png"> <img src="evernotecid://AC85336C-B325-443E-8ED7-E6554790A944/appyinxiangcom/10797539/ENResource/p177" alt="57fc355ae4747f9db26db598cadd4045.png"></p> <blockquote><p>自定义验证器：</p></blockquote> <h4 id="中间件"><a href="#中间件" class="header-anchor">#</a> 中间件</h4> <p><img src="evernotecid://AC85336C-B325-443E-8ED7-E6554790A944/appyinxiangcom/10797539/ENResource/p178" alt="974c76ca967771029d7a58a9f5cdf3d9.png"></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 连接数据库</span>
<span class="token keyword">const</span> mongoose <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'mongoose'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 连接数据库</span>
mongoose<span class="token punctuation">.</span><span class="token function">connect</span><span class="token punctuation">(</span><span class="token string">'mongodb://127.0.0.1:27017/book'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">useNewUrlParser</span><span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 模型骨架</span>
<span class="token keyword">const</span> ResellerSchema <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">mongoose<span class="token punctuation">.</span>Schema</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">address</span><span class="token operator">:</span> String
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

ResellerSchema<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">'save'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">next</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'我是后置中间件，在保存动作之后执行'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
ResellerSchema<span class="token punctuation">.</span><span class="token function">pre</span><span class="token punctuation">(</span><span class="token string">'save'</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">next<span class="token punctuation">,</span> done</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'我是预处理中间件，在保存动作之前执行'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">done</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> Reseller <span class="token operator">=</span> mongoose<span class="token punctuation">.</span><span class="token function">model</span><span class="token punctuation">(</span><span class="token string">'Reseller'</span><span class="token punctuation">,</span> ResellerSchema<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> reseller <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Reseller</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">address</span><span class="token operator">:</span> <span class="token string">'beijing'</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
reseller<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br></div></div><p><img src="evernotecid://AC85336C-B325-443E-8ED7-E6554790A944/appyinxiangcom/10797539/ENResource/p179" alt="513c89ff966c6342ce4bd868c79bc346.png"></p> <h4 id="dbref"><a href="#dbref" class="header-anchor">#</a> DBRef</h4> <blockquote><p>DBRef作用：在一个collection中引用另一个collection中的数据。实现集合数据的交叉引用。</p></blockquote> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 连接数据库</span>
<span class="token keyword">const</span> mongoose <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'mongoose'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 连接数据库</span>
mongoose<span class="token punctuation">.</span><span class="token function">connect</span><span class="token punctuation">(</span><span class="token string">'mongodb://127.0.0.1:27017/book'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">useNewUrlParser</span><span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 模型骨架</span>
<span class="token keyword">const</span> UserSchema <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">mongoose<span class="token punctuation">.</span>Schema</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">username</span><span class="token operator">:</span> String
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> NewsSchema <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">mongoose<span class="token punctuation">.</span>Schema</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">title</span><span class="token operator">:</span> String<span class="token punctuation">,</span>
    <span class="token literal-property property">author</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">type</span><span class="token operator">:</span> mongoose<span class="token punctuation">.</span>Schema<span class="token punctuation">.</span>ObjectId<span class="token punctuation">,</span>
        <span class="token literal-property property">ref</span><span class="token operator">:</span> <span class="token string">'User'</span> <span class="token comment">// 指定使用User集合中的数据，通过ref指定将两个集合关联起来</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> Users <span class="token operator">=</span> mongoose<span class="token punctuation">.</span><span class="token function">model</span><span class="token punctuation">(</span><span class="token string">'User'</span><span class="token punctuation">,</span> UserSchema<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> News <span class="token operator">=</span> mongoose<span class="token punctuation">.</span><span class="token function">model</span><span class="token punctuation">(</span><span class="token string">'News'</span><span class="token punctuation">,</span> NewsSchema<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> user <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Users</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">username</span><span class="token operator">:</span> <span class="token string">'lisi'</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> news <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">News</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">'武侠小说'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">author</span><span class="token operator">:</span> user
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

user<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span><span class="token parameter">err</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'save failed'</span><span class="token punctuation">,</span> err<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    news<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span><span class="token parameter">err</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'save news failed：'</span><span class="token punctuation">,</span> err<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        News<span class="token punctuation">.</span><span class="token function">findOne</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">populate</span><span class="token punctuation">(</span><span class="token string">'author'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> doc</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'save success:'</span><span class="token punctuation">,</span> doc<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br></div></div><p><img src="evernotecid://AC85336C-B325-443E-8ED7-E6554790A944/appyinxiangcom/10797539/ENResource/p180" alt="db5cec2389e40d97006390e90b188bd9.png"></p> <h2 id="参考文档"><a href="#参考文档" class="header-anchor">#</a> 参考文档</h2> <ol><li><a href="https://github.com/Automattic/mongoose" target="_blank" rel="noopener noreferrer">https://github.com/Automattic/mongoose<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="http://jspang.com/post/mongodb.html" target="_blank" rel="noopener noreferrer">挑战全栈 MongoDB基础视频教程<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://mongoose.shujuwajue.com/guide/schemas.html" target="_blank" rel="noopener noreferrer">mongoose4.5中文文档<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://mongoosejs.com/index.html" target="_blank" rel="noopener noreferrer">mongoose文档<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://www.cnblogs.com/zhongweiv/p/mongoose.html" target="_blank" rel="noopener noreferrer">Nodejs学习笔记（十四）— Mongoose介绍和入门<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://www.cnblogs.com/BlingSun/p/7903520.html" target="_blank" rel="noopener noreferrer">Mongoose介绍和入门<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://mongoosedoc.top/docs/index.html" target="_blank" rel="noopener noreferrer">mongoose中文文档<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://segmentfault.com/a/1190000008245062" target="_blank" rel="noopener noreferrer">Mongoose增查改删学习笔记<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://segmentfault.com/a/1190000012512347" target="_blank" rel="noopener noreferrer">mongodb和nodejs mongoose使用详解<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://segmentfault.com/a/1190000014293019" target="_blank" rel="noopener noreferrer">Node+express+mongoose 基础笔记<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="http://www.jsdaxue.com/archives/40.html" target="_blank" rel="noopener noreferrer">超详细的数据库mongoose的使用方法/教程<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://robomongo.org/" target="_blank" rel="noopener noreferrer">MongoDB的可视化工具 robo 3t MongoDB的可视化工具 robo 3t<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ol></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">2022-02-28 16:06:13</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/jerry.github.io/backend/mongodb/02.MongoDB基本操作.html" class="prev">
        2. MongoDB基础操作
      </a></span> <!----></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/jerry.github.io/assets/js/app.8cb867ca.js" defer></script><script src="/jerry.github.io/assets/js/2.7d547363.js" defer></script><script src="/jerry.github.io/assets/js/47.8f4693a3.js" defer></script><script src="/jerry.github.io/assets/js/20.cf42ebc2.js" defer></script>
  </body>
</html>
